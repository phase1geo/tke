<!DOCTYPE html>  
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>TKE Developer Guide</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style id="mkstylesheet">
/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}h1{font-size:2em;margin:0.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace, monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto}input[type="search"]{-webkit-appearance:textfield;box-sizing:content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:0.35em 0.625em 0.75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:bold}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}*{box-sizing:border-box}input,select,textarea,button{font:13px/1.4 Helvetica,arial,nimbussansl,liberationsans,freesans,clean,sans-serif,"Segoe UI Emoji","Segoe UI Symbol"}body{font:13px/1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";color:#333;background-color:#fff}a{color:#4078c0;text-decoration:none}a:hover,a:active{text-decoration:underline}hr,.rule{height:0;margin:15px 0;overflow:hidden;background:transparent;border:0;border-bottom:1px solid #ddd}hr:before,.rule:before{display:table;content:""}hr:after,.rule:after{display:table;clear:both;content:""}h1,h2,h3,h4,h5,h6{margin-top:15px;margin-bottom:15px;line-height:1.1}h1{font-size:30px}h2{font-size:21px}h3{font-size:16px}h4{font-size:14px}h5{font-size:12px}h6{font-size:11px}small{font-size:90%}blockquote{margin:0}ul,ol{padding:0;margin-top:0;margin-bottom:0}ol ol,ul ol{list-style-type:lower-roman}ul ul ol,ul ol ol,ol ul ol,ol ol ol{list-style-type:lower-alpha}dd{margin-left:0}tt,code{font-family:Consolas, "Liberation Mono", Menlo, Courier, monospace;font-size:12px}pre{margin-top:0;margin-bottom:0;font:12px Consolas,"Liberation Mono",Menlo,Courier,monospace}html,body{color:black}#wrapper{font:16px helvetica,arial,freesans,clean,sans-serif;-webkit-font-smoothing:antialiased;line-height:1.6;padding:3px;background:#fff;border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px;border:solid 1px #dddddd !important;color:#333}p{margin:1em 0}a{color:#4183c4;text-decoration:none}#wrapper{background-color:#fff;padding:30px;margin:15px;font-size:16px;line-height:1.6}#wrapper>*:first-child{margin-top:0 !important}#wrapper>*:last-child{margin-bottom:0 !important}@media screen{#wrapper{border:solid 1px #ddd}}h1,h2,h3,h4,h5,h6{position:relative;margin-top:1em;margin-bottom:16px;font-weight:700;line-height:1.4;color:#333}h1{padding-bottom:.3em;font-size:2.25em;line-height:1.2;border-bottom:1px solid #eee}h2{padding-bottom:0.3em;font-size:1.75em;line-height:1.225;border-bottom:1px solid #eee}h3{font-size:1.5em;line-height:1.43}h4{font-size:1.25em}h5{font-size:1em}h6{color:#777;font-size:1em}p,blockquote,ul,ol,dl,table,pre{margin-top:0;margin-bottom:16px}hr{height:4px;padding:0;margin:16px 0;background-color:#e7e7e7;border:0 none}ul,ol{padding-left:2em}ul.no-list,ol.no-list{padding:0;list-style-type:none}ul ul,ul ol{margin-top:0;margin-bottom:0}ol ol,ol ul{margin-top:0;margin-bottom:0}li>p{margin-top:16px}dl{padding:0}dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}dl dd{padding:0 16px;margin-bottom:16px}blockquote{padding:0 15px;margin-left:0;color:#777;border-left:4px solid #ddd}blockquote>:first-child{margin-top:0}blockquote>:last-child{margin-bottom:0}table{display:block;width:100%;overflow:auto}table th{font-weight:700;padding:6px 13px;border:1px solid #ddd}table td{padding:6px 13px;border:1px solid #ddd}table tr{background-color:#fff;border-top:1px solid #ccc}table tr:nth-child(2n){background-color:#f8f8f8}img{max-width:100%;-moz-box-sizing:border-box;box-sizing:border-box}span.frame{display:block;overflow:hidden}span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}span.frame span img{display:block;float:left}span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}span.align-center{display:block;overflow:hidden;clear:both}span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}span.align-center span img{margin:0 auto;text-align:center}span.align-right{display:block;overflow:hidden;clear:both}span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}span.align-right span img{margin:0;text-align:right}span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}span.float-left span{margin:13px 0 0}span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}code,tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,0.04);border-radius:3px}code:before,code:after{letter-spacing:-.2em;content:"\00a0"}tt:before,tt:after{letter-spacing:-.2em;content:"\00a0"}code br,tt br{display:none}del code{text-decoration:inherit;vertical-align:text-top}pre>code{padding:0;margin:0;font-size:100%;white-space:pre;background:transparent;border:0}.highlight{margin-bottom:16px}.highlight pre{padding:16px;margin-bottom:0;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}pre{padding:16px;margin-bottom:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px;word-wrap:normal}pre code,pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}pre code:before,pre code:after{content:normal}pre tt:before,pre tt:after{content:normal}.poetry pre{font-family:Georgia, Garamond, serif !important;font-style:italic;font-size:110% !important;line-height:1.6em;display:block;margin-left:1em}.poetry pre code{font-family:Georgia, Garamond, serif !important;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;hyphens:auto;white-space:pre-wrap}sup,sub,a.footnote{font-size:1.4ex;height:0;line-height:1;vertical-align:super;position:relative}sub{vertical-align:sub;top:-1px}@media print{body{background:#fff}img,table,figure{page-break-inside:avoid}#wrapper{background:#fff;border:none !important;font-size:12px}pre code{overflow:visible}}@media screen{body.inverted{color:#eee !important;border-color:#555;box-shadow:none}.inverted #wrapper,.inverted hr,.inverted p,.inverted td,.inverted li,.inverted h1,.inverted h2,.inverted h3,.inverted h4,.inverted h5,.inverted h6,.inverted th,.inverted .math,.inverted caption,.inverted dd,.inverted dt,.inverted blockquote{color:#eee !important;border-color:#555;box-shadow:none}.inverted td,.inverted th{background:#333}.inverted pre,.inverted code,.inverted tt{background:#eeeeee !important;color:#111}.inverted h2{border-color:#555555}.inverted hr{border-color:#777;border-width:1px !important}::selection{background:rgba(157,193,200,0.5)}h1::selection{background-color:rgba(45,156,208,0.3)}h2::selection{background-color:rgba(90,182,224,0.3)}h3::selection,h4::selection,h5::selection,h6::selection,li::selection,ol::selection{background-color:rgba(133,201,232,0.3)}code::selection{background-color:rgba(0,0,0,0.7);color:#eeeeee}code span::selection{background-color:rgba(0,0,0,0.7) !important;color:#eeeeee !important}a::selection{background-color:rgba(255,230,102,0.2)}.inverted a::selection{background-color:rgba(255,230,102,0.6)}td::selection,th::selection,caption::selection{background-color:rgba(180,237,95,0.5)}.inverted{background:#0b2531;background:#252a2a}.inverted #wrapper{background:#252a2a}.inverted a{color:#acd1d5}}.highlight{background:#fff}.highlight .c{color:#998;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k,.highlight .o{font-weight:700}.highlight .cm{color:#998;font-style:italic}.highlight .cp{color:#999;font-weight:700}.highlight .c1{color:#998;font-style:italic}.highlight .cs{color:#999;font-weight:700;font-style:italic}.highlight .gd{color:#000;background-color:#fdd}.highlight .gd .x{color:#000;background-color:#faa}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#999}.highlight .gi{color:#000;background-color:#dfd}.highlight .gi .x{color:#000;background-color:#afa}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:700}.highlight .gu{color:purple;font-weight:700}.highlight .gt{color:#a00}.highlight .kc,.highlight .kd,.highlight .kn,.highlight .kp,.highlight .kr{font-weight:700}.highlight .kt{color:#458;font-weight:700}.highlight .m{color:#099}.highlight .s{color:#d14}.highlight .n{color:#333}.highlight .na{color:teal}.highlight .nb{color:#0086b3}.highlight .nc{color:#458;font-weight:700}.highlight .no{color:teal}.highlight .ni{color:purple}.highlight .ne,.highlight .nf{color:#900;font-weight:700}.highlight .nn{color:#555}.highlight .nt{color:navy}.highlight .nv{color:teal}.highlight .ow{font-weight:700}.highlight .w{color:#bbb}.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:#099}.highlight .sb,.highlight .sc,.highlight .sd,.highlight .s2,.highlight .se,.highlight .sh,.highlight .si,.highlight .sx{color:#d14}.highlight .sr{color:#009926}.highlight .s1{color:#d14}.highlight .ss{color:#990073}.highlight .bp{color:#999}.highlight .vc,.highlight .vg,.highlight .vi{color:teal}.highlight .il{color:#099}.highlight .gc{color:#999;background-color:#EAF2F5}.type-csharp .highlight .k,.type-csharp .highlight .kt{color:blue}.type-csharp .highlight .nf{color:#000;font-weight:400}.type-csharp .highlight .nc{color:#2b91af}.type-csharp .highlight .nn{color:#000}.type-csharp .highlight .s,.type-csharp .highlight .sc{color:#a31515}.type-csharp .highlight .k,.type-csharp .highlight .kt{color:#00F}.type-csharp .highlight .nf{color:#000;font-weight:normal}.type-csharp .highlight .nc{color:#2B91AF}.type-csharp .highlight .nn{color:#000}.type-csharp .highlight .s,.type-csharp .highlight .sc{color:#A31515}body.dark #wrapper{background:transparent !important;box-shadow:none !important}
#mkreplaced-toc{list-style-position:inside;padding:0;margin:0 0 0 1rem;list-style-type:none}#mkreplaced-toc li::before{content:''}#mkreplaced-toc li{font-size:1rem;line-height:1.25;font-weight:normal}#mkreplaced-toc li ul{font-size:1.3rem;font-weight:300;padding:.5rem 0;margin:0 0 0 1rem}#mkreplaced-toc li.missing{list-style-type:none !important}#mkreplaced-toc.max-1 ul,#mkreplaced-toc.max1 ul{display:none}#mkreplaced-toc.max-2 ul ul,#mkreplaced-toc.max2 ul ul{display:none}#mkreplaced-toc.max-3 ul ul ul,#mkreplaced-toc.max3 ul ul ul{display:none}#mkreplaced-toc.max-4 ul ul ul ul,#mkreplaced-toc.max4 ul ul ul ul{display:none}#mkreplaced-toc.max-5 ul ul ul ul ul,#mkreplaced-toc.max5 ul ul ul ul ul{display:none}.rtl{direction:rtl;text-align:right}@media print{body{background:white;line-height:1.4}html,body,#wrapper{max-width:100%;width:100%;-webkit-text-size-adjust:none;-webkit-perspective:none !important;box-sizing:border-box;width:auto;border:0;margin:0;padding:0;float:none;-moz-box-shadow:none !important;-webkit-box-shadow:none !important;box-shadow:none !important}mark{background:transparent !important}h1,h2,h3,h4,h5,h6{page-break-after:avoid}p,h2,h3{orphans:3;widows:3}section{page-break-before:avoid}pre>code{white-space:pre;word-break:break-word}#generated-toc,#firstdiff,#toc-title,#mkdocumentprogress,#mkincludechart,#mkprogressbar1,#mkprogressbar2,.mkscrollmeter,#alllinks,.popup{display:none !important}.suppressprintlinks a{color:inherit !important;text-decoration:none !important;border-bottom:none !important;cursor:default !important}.hrefafterlinktext #wrapper a:link:after,.hrefafterlinktext #wrapper a:visited:after{content:" (" attr(href) ") ";font-size:90%;opacity:0.9}.nocodebreak pre{page-break-inside:avoid}img,table,figure{page-break-inside:avoid}.breakfootnotes .footnotes{page-break-before:always}.breakfootnotes .footnotes hr{display:none}#mktoctitle{display:block}#print-title{display:block;border-bottom:solid 1px #666}#wrapper pre{white-space:pre;white-space:pre-wrap;word-wrap:break-word}#wrapper #generated-toc-clone,#wrapper #mkreplaced-toc{display:block}.task-list .task-list-item{list-style-type:none !important}.task-list .gh-complete.task-list-item .task-list-item-checkbox:before{content:'\2713';background:#838387}.task-list .task-list-item-checkbox{-webkit-appearance:none;position:relative}.task-list .task-list-item-checkbox:before{content:' ';border:solid 1px #aaa;width:1em;height:1em;display:block;border-radius:2px;left:-20px;top:-.75em;color:white;font-weight:bold;line-height:1;text-align:center;position:absolute}}
#wrapper #generated-toc-clone,#wrapper #mkreplaced-toc,#wrapper #generated-toc-clone ul,#wrapper #mkreplaced-toc ul{list-style-position:inside}#wrapper #generated-toc-clone li.missing,#wrapper #mkreplaced-toc li.missing{list-style-type: none!important}#wrapper #generated-toc-clone,#wrapper #mkreplaced-toc{list-style-type: square}#wrapper #generated-toc-clone>li>ul,#wrapper #mkreplaced-toc>li>ul {list-style-type: circle}#wrapper #generated-toc-clone>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul{list-style-type: disc}#wrapper #generated-toc-clone>li>ul>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul>li>ul{list-style-type: lower-greek}#wrapper #generated-toc-clone>li>ul>li>ul>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul>li>ul>li>ul{list-style-type: disc}#wrapper #generated-toc-clone>li>ul>li>ul>li>ul>li>ul>li>ul,#wrapper #mkreplaced-toc>li>ul>li>ul>li>ul>li>ul>li>ul{list-style-type: square}
td {
  vertical-align: top;
}

thead>tr {
  background: #c7c7c7;
}

td:first-child {
  width: 33%;
}

table {
  table-layout: fixed;
}

</style>

<style id="mkprintstyles">@media print{h1:nth-of-type(n+2){page-break-before:always}
html,body,#wrapper{font-size:10pt!important}
}
</style>


</head>
<body class="normal poetry firstload">
  <div id="wrapper">
      <h1 id="tkedeveloperguide">TKE Developer Guide</h1>

<p><br><br><br><br><br><br><br></p>

<h4 id="version:3.0">Version: 3.0</h4>

<p><br><br></p>

<h4 id="author:trevorwilliams">Author: Trevor Williams</h4>

<h1 id="tableofcontents">Table of Contents</h1>


<ul style="display: block;" id="mkreplaced-toc" class="max-3"><li class="notmissing"><a href="#plugindevelopment" class="wiki-link">Plugin Development</a><ul><li class="notmissing"><a href="#pluginframework" class="wiki-link">Plugin Framework</a><ul><li class="notmissing"><a href="#startingup" class="wiki-link">Starting up</a></li><li class="notmissing"><a href="#pluginmanagement" class="wiki-link">Plugin management</a></li><li class="notmissing"><a href="#interpretercreation" class="wiki-link">Interpreter Creation</a></li><li class="notmissing"><a href="#safeuntrustedinterpreterdescription" class="wiki-link">Safe (Untrusted) Interpreter Description</a></li><li class="notmissing"><a href="#pluginguielementcreation" class="wiki-link">Plugin GUI Element Creation</a></li><li class="notmissing"><a href="#creatinglaunchercommands" class="wiki-link">Creating Launcher Commands</a></li></ul></li><li class="notmissing"><a href="#pluginbundlestructure" class="wiki-link">Plugin Bundle Structure</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#header.tkedat" data-orig-id="header.tkedat" class="wiki-link">header.tkedat</a></li><li class="notmissing"><a href="#registration" class="wiki-link">Registration</a></li><li class="notmissing"><a href="#pluginactionnamespaceandprocedures" class="wiki-link">Plugin Action Namespace and Procedures</a></li><li class="notmissing"><a href="#otherelements" class="wiki-link">Other Elements</a></li></ul></li></ul></li><li class="notmissing"><a href="#creatinganewplugintemplate" class="wiki-link">Creating a New Plugin Template</a></li></ul></li><li class="notmissing"><a href="#syntaxhandling" class="wiki-link">Syntax Handling</a><ul><li class="notmissing"><a href="#fileformat" class="wiki-link">File Format</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#filepatterns" class="wiki-link">filepatterns</a></li><li class="notmissing"><a href="#vimsyntax" class="wiki-link">vimsyntax</a></li><li class="notmissing"><a href="#reference" class="wiki-link">reference</a></li><li class="notmissing"><a href="#embedded" class="wiki-link">embedded</a></li><li class="notmissing"><a href="#matchcharsallowed" class="wiki-link">matchcharsallowed</a></li><li class="notmissing"><a href="#escapes" class="wiki-link">escapes</a></li><li class="notmissing"><a href="#tabsallowed" class="wiki-link">tabsallowed</a></li><li class="notmissing"><a href="#linewrap" class="wiki-link">linewrap</a></li><li class="notmissing"><a href="#casesensitive" class="wiki-link">casesensitive</a></li><li class="notmissing"><a href="#delimiters" class="wiki-link">delimiters</a></li><li class="notmissing"><a href="#indent" class="wiki-link">indent</a></li><li class="notmissing"><a href="#unindent" class="wiki-link">unindent</a></li><li class="notmissing"><a href="#reindent" class="wiki-link">reindent</a></li><li class="notmissing"><a href="#icomment" class="wiki-link">icomment</a></li><li class="notmissing"><a href="#lcomments" class="wiki-link">lcomments</a></li><li class="notmissing"><a href="#bcomments" class="wiki-link">bcomments</a></li><li class="notmissing"><a href="#strings" class="wiki-link">strings</a></li><li class="notmissing"><a href="#keywords" class="wiki-link">keywords</a></li><li class="notmissing"><a href="#symbols" class="wiki-link">symbols</a></li><li class="notmissing"><a href="#numbers" class="wiki-link">numbers</a></li><li class="notmissing"><a href="#punctuation" class="wiki-link">punctuation</a></li><li class="notmissing"><a href="#precompile" class="wiki-link">precompile</a></li><li class="notmissing"><a href="#miscellaneous1miscellaneous2miscellaneous3" class="wiki-link">miscellaneous1, miscellaneous2, miscellaneous3</a></li><li class="notmissing"><a href="#highlight" class="wiki-link">highlight</a></li><li class="notmissing"><a href="#meta" class="wiki-link">meta</a></li><li class="notmissing"><a href="#advanced" class="wiki-link">advanced</a><ul><li class="notmissing"><a href="#highlightclasses" class="wiki-link">Highlight Classes</a></li><li class="notmissing"><a href="#regularexpressions" class="wiki-link">Regular Expressions</a></li><li class="notmissing"><a href="#processingprocedures" class="wiki-link">Processing Procedures</a></li></ul></li><li class="notmissing"><a href="#formatting" class="wiki-link">formatting</a></li></ul></li></ul></li><li class="notmissing"><a href="#example" class="wiki-link">Example</a></li></ul></li><li class="notmissing"><a href="#pluginactiontypes" class="wiki-link">Plugin Action Types</a><ul><li class="notmissing"><a href="#menu" class="wiki-link">menu</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#tab_popup" data-orig-id="tab_popup" class="wiki-link">tab_popup</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description2" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration2" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures2" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#root_popup" data-orig-id="root_popup" class="wiki-link">root_popup</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description3" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration3" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures3" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#dir_popup" data-orig-id="dir_popup" class="wiki-link">dir_popup</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description4" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration4" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures4" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#file_popup" data-orig-id="file_popup" class="wiki-link">file_popup</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description5" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration5" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures5" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#text_binding" data-orig-id="text_binding" class="wiki-link">text_binding</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description6" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration6" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures6" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#on_start" data-orig-id="on_start" class="wiki-link">on_start</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description7" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration7" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures7" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#on_open" data-orig-id="on_open" class="wiki-link">on_open</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description8" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration8" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures8" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#on_focusin" data-orig-id="on_focusin" class="wiki-link">on_focusin</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description9" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration9" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures9" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#on_close" data-orig-id="on_close" class="wiki-link">on_close</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description10" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration10" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures10" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#on_quit" data-orig-id="on_quit" class="wiki-link">on_quit</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description11" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration11" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures11" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#on_reload" data-orig-id="on_reload" class="wiki-link">on_reload</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description12" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclprocedures12" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#on_save" data-orig-id="on_save" class="wiki-link">on_save</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description13" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration12" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures13" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#on_uninstall" data-orig-id="on_uninstall" class="wiki-link">on_uninstall</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description14" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration13" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures14" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#on_rename" data-orig-id="on_rename" class="wiki-link">on_rename</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description15" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration14" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures15" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#on_duplicate" data-orig-id="on_duplicate" class="wiki-link">on_duplicate</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description16" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration15" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures16" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#on_delete" data-orig-id="on_delete" class="wiki-link">on_delete</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description17" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration16" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures17" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#on_trash" data-orig-id="on_trash" class="wiki-link">on_trash</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description18" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration17" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures18" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#syntax" class="wiki-link">syntax</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description19" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration18" class="wiki-link">Tcl Registration</a></li></ul></li></ul></li><li class="notmissing"><a href="#vcs" class="wiki-link">vcs</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description20" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration19" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures19" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#on_pref_load" data-orig-id="on_pref_load" class="wiki-link">on_pref_load</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description21" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration20" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures20" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li><li class="notmissing"><a href="#do_pref_ui" data-orig-id="do_pref_ui" class="wiki-link">do_pref_ui</a><ul><li class="missing" style="list-style-type: none;"><ul><li class="notmissing"><a href="#description22" class="wiki-link">Description</a></li><li class="notmissing"><a href="#tclregistration21" class="wiki-link">Tcl Registration</a></li><li class="notmissing"><a href="#tclprocedures21" class="wiki-link">Tcl Procedures</a></li></ul></li></ul></li></ul></li><li class="notmissing"><a href="#pluginapi" class="wiki-link">Plugin API</a><ul><li class="notmissing"><a href="#api::tke_development" data-orig-id="api::tke_development" class="wiki-link">api::tke_development</a></li><li class="notmissing"><a href="#api::get_plugin_directory" data-orig-id="api::get_plugin_directory" class="wiki-link">api::get_plugin_directory</a></li><li class="notmissing"><a href="#api::get_images_directory" data-orig-id="api::get_images_directory" class="wiki-link">api::get_images_directory</a></li><li class="notmissing"><a href="#api::get_home_directory" data-orig-id="api::get_home_directory" class="wiki-link">api::get_home_directory</a></li><li class="notmissing"><a href="#api::normalize_filename" data-orig-id="api::normalize_filename" class="wiki-link">api::normalize_filename</a></li><li class="notmissing"><a href="#api::register_launcher" data-orig-id="api::register_launcher" class="wiki-link">api::register_launcher</a></li><li class="notmissing"><a href="#api::unregister_launcher" data-orig-id="api::unregister_launcher" class="wiki-link">api::unregister_launcher</a></li><li class="notmissing"><a href="#api::invoke_menu" data-orig-id="api::invoke_menu" class="wiki-link">api::invoke_menu</a></li><li class="notmissing"><a href="#api::log" data-orig-id="api::log" class="wiki-link">api::log</a></li><li class="notmissing"><a href="#api::show_info" data-orig-id="api::show_info" class="wiki-link">api::show_info</a></li><li class="notmissing"><a href="#api::show_error" data-orig-id="api::show_error" class="wiki-link">api::show_error</a></li><li class="notmissing"><a href="#api::get_user_input" data-orig-id="api::get_user_input" class="wiki-link">api::get_user_input</a></li><li class="notmissing"><a href="#api::reset_txt_focus" data-orig-id="api::reset_txt_focus" class="wiki-link">api::reset_txt_focus</a></li><li class="notmissing"><a href="#api::file::current_file_index" data-orig-id="api::file::current_file_index" class="wiki-link">api::file::current_file_index</a></li><li class="notmissing"><a href="#api::file::get_info" data-orig-id="api::file::get_info" class="wiki-link">api::file::get_info</a></li><li class="notmissing"><a href="#api::file::add_buffer" data-orig-id="api::file::add_buffer" class="wiki-link">api::file::add_buffer</a></li><li class="notmissing"><a href="#api::file::add_file" data-orig-id="api::file::add_file" class="wiki-link">api::file::add_file</a></li><li class="notmissing"><a href="#api::sidebar::get_selected_indices" data-orig-id="api::sidebar::get_selected_indices" class="wiki-link">api::sidebar::get_selected_indices</a></li><li class="notmissing"><a href="#api::sidebar::get_info" data-orig-id="api::sidebar::get_info" class="wiki-link">api::sidebar::get_info</a></li><li class="notmissing"><a href="#api::plugin::save_variable" data-orig-id="api::plugin::save_variable" class="wiki-link">api::plugin::save_variable</a></li><li class="notmissing"><a href="#api::plugin::load_variable" data-orig-id="api::plugin::load_variable" class="wiki-link">api::plugin::load_variable</a></li><li class="notmissing"><a href="#api::utils::open_file" data-orig-id="api::utils::open_file" class="wiki-link">api::utils::open_file</a></li><li class="notmissing"><a href="#api::get_default_foreground" data-orig-id="api::get_default_foreground" class="wiki-link">api::get_default_foreground</a></li><li class="notmissing"><a href="#api::get_default_background" data-orig-id="api::get_default_background" class="wiki-link">api::get_default_background</a></li><li class="notmissing"><a href="#api::color_to_rgb" data-orig-id="api::color_to_rgb" class="wiki-link">api::color_to_rgb</a></li><li class="notmissing"><a href="#api::get_complementary_mono_color" data-orig-id="api::get_complementary_mono_color" class="wiki-link">api::get_complementary_mono_color</a></li><li class="notmissing"><a href="#api::rgb_to_hsv" data-orig-id="api::rgb_to_hsv" class="wiki-link">api::rgb_to_hsv</a></li><li class="notmissing"><a href="#api::hsv_to_rgb" data-orig-id="api::hsv_to_rgb" class="wiki-link">api::hsv_to_rgb</a></li><li class="notmissing"><a href="#api::rgb_to_hsl" data-orig-id="api::rgb_to_hsl" class="wiki-link">api::rgb_to_hsl</a></li><li class="notmissing"><a href="#api::hsl_to_rgb" data-orig-id="api::hsl_to_rgb" class="wiki-link">api::hsl_to_rgb</a></li><li class="notmissing"><a href="#api::get_color_values" data-orig-id="api::get_color_values" class="wiki-link">api::get_color_values</a></li><li class="notmissing"><a href="#api::auto_adjust_color" data-orig-id="api::auto_adjust_color" class="wiki-link">api::auto_adjust_color</a></li><li class="notmissing"><a href="#api::auto_mix_colors" data-orig-id="api::auto_mix_colors" class="wiki-link">api::auto_mix_colors</a></li><li class="notmissing"><a href="#api::color_difference" data-orig-id="api::color_difference" class="wiki-link">api::color_difference</a></li><li class="notmissing"><a href="#api::preferences::widget" data-orig-id="api::preferences::widget" class="wiki-link">api::preferences::widget</a></li><li class="notmissing"><a href="#api::preferences::get_value" data-orig-id="api::preferences::get_value" class="wiki-link">api::preferences::get_value</a></li></ul></li><li class="notmissing"><a href="#ctextwidget" class="wiki-link">Ctext Widget</a><ul><li class="notmissing"><a href="#differencesfromtheoriginalctextwidget" class="wiki-link">Differences from the original Ctext widget</a></li><li class="notmissing"><a href="#options" class="wiki-link">Options</a></li><li class="notmissing"><a href="#commandapi" class="wiki-link">Command API</a><ul><li class="notmissing"><a href="#delete" class="wiki-link">delete</a></li><li class="notmissing"><a href="#diffreset" class="wiki-link">diff reset</a></li><li class="notmissing"><a href="#diffranges" class="wiki-link">diff ranges</a></li><li class="notmissing"><a href="#diffsub" class="wiki-link">diff sub</a></li><li class="notmissing"><a href="#diffadd" class="wiki-link">diff add</a></li><li class="notmissing"><a href="#fastdelete" class="wiki-link">fastdelete</a></li><li class="notmissing"><a href="#fastinsert" class="wiki-link">fastinsert</a></li><li class="notmissing"><a href="#fastreplace" class="wiki-link">fastreplace</a></li><li class="notmissing"><a href="#highlight2" class="wiki-link">highlight</a></li><li class="notmissing"><a href="#insert" class="wiki-link">insert</a></li><li class="notmissing"><a href="#inbacktickinbacktickrange" class="wiki-link">inBackTick / inBackTickRange</a></li><li class="notmissing"><a href="#inblockcommentinblockcommentrange" class="wiki-link">inBlockComment / inBlockCommentRange</a></li><li class="notmissing"><a href="#incommentincommentrange" class="wiki-link">inComment / inCommentRange</a></li><li class="notmissing"><a href="#incommentstringincommentstringrange" class="wiki-link">inCommentString / inCommentStringRange</a></li><li class="notmissing"><a href="#indoublequoteindoublequoterange" class="wiki-link">inDoubleQuote / inDoubleQuoteRange</a></li><li class="notmissing"><a href="#inlinecommentinlinecommentrange" class="wiki-link">inLineComment / inLineCommentRange</a></li><li class="notmissing"><a href="#insinglequoteinsinglequoterange" class="wiki-link">inSingleQuote / inSingleQuoteRange</a></li><li class="notmissing"><a href="#instringinstringrange" class="wiki-link">inString / inStringRange</a></li><li class="notmissing"><a href="#isescaped" class="wiki-link">isEscaped</a></li><li class="notmissing"><a href="#editundoable" class="wiki-link">edit undoable</a></li><li class="notmissing"><a href="#editredoable" class="wiki-link">edit redoable</a></li><li class="notmissing"><a href="#editcursorhist" class="wiki-link">edit cursorhist</a></li><li class="notmissing"><a href="#guttercreate" class="wiki-link">gutter create</a></li><li class="notmissing"><a href="#gutterdestroy" class="wiki-link">gutter destroy</a></li><li class="notmissing"><a href="#gutterhide" class="wiki-link">gutter hide</a></li><li class="notmissing"><a href="#gutterset" class="wiki-link">gutter set</a></li><li class="notmissing"><a href="#gutterdelete" class="wiki-link">gutter delete</a></li><li class="notmissing"><a href="#gutterget" class="wiki-link">gutter get</a></li><li class="notmissing"><a href="#gutterclear" class="wiki-link">gutter clear</a></li><li class="notmissing"><a href="#guttercget" class="wiki-link">gutter cget</a></li><li class="notmissing"><a href="#gutterconfigure" class="wiki-link">gutter configure</a></li><li class="notmissing"><a href="#gutternames" class="wiki-link">gutter names</a></li><li class="notmissing"><a href="#replace" class="wiki-link">replace</a></li></ul></li></ul></li><li class="notmissing"><a href="#packages" class="wiki-link">Packages</a><ul><li class="notmissing"><a href="#tclx" class="wiki-link">Tclx</a></li><li class="notmissing"><a href="#tablelist" class="wiki-link">Tablelist</a></li><li class="notmissing"><a href="#tooltip" class="wiki-link">tooltip</a></li><li class="notmissing"><a href="#msgcat" class="wiki-link">msgcat</a></li><li class="notmissing"><a href="#tokenentry" class="wiki-link">tokenentry</a></li><li class="notmissing"><a href="#tabbar" class="wiki-link">tabbar</a></li><li class="notmissing"><a href="#fontchooser" class="wiki-link">fontchooser</a></li></ul></li></ul>



<h1 id="plugindevelopment">Plugin Development</h1>

<p>This document is written for anyone who is interested in writing plugins for TKE.</p>

<p>TKE contains a plugin framework that allows external Tcl/Tk code to be included and executed in a TKE application. Plugins can be attached to the GUI via various menus, text bindings, the command launcher, and events. This document aims to document the plugin framework, how it works, and, most importantly, how to create new plugins using TKE’s plugin API.</p>

<h2 id="pluginframework">Plugin Framework</h2>

<h3 id="startingup">Starting up</h3>

<p>When TKE is started, one of the startup tasks is to read the file contents contained in the TKE plugin directory. This directory contains all of the TKE plugin bundles.</p>

<p>The plugin directory exists in the TKE installation directory under the “plugins” directory. Only<br/>
bundles in this directory that are properly structured (as described later on in this chapter) are considered for plugin access.</p>

<p>Each plugin bundle is a directory that should contain at least the following files:</p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">File</th>
	<th style="text-align:left;">Required</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">header.tkedat</td>
	<td style="text-align:left;">Yes</td>
	<td style="text-align:left;">Contains plugin information that describes the plugin and is used by the plugin installer.</td>
</tr>
<tr>
	<td style="text-align:left;">main.tcl</td>
	<td style="text-align:left;">Yes</td>
	<td style="text-align:left;">The main Tcl file that is sourced by the plugin installer. This file must contain a call to the api::register procedure. In addition, this file should either contain the plugin namespace and action procedures or source one or more other files in the plugin bundle that contain the action code.</td>
</tr>
<tr>
	<td style="text-align:left;">README.md</td>
	<td style="text-align:left;">No</td>
	<td style="text-align:left;">Optional file that should contain usage information about the plugin. This file is displayed as a read-only file in an editing buffer when the user selects an installed plugin with the “Plugin / Show Installed Plugins…” menu option.</td>
</tr>
</tbody>
</table>

<p>After both files are found and the header file is properly parsed, the header contents are stored in a Tcl array. If a plugin bundle does not parse correctly, it is ignored and not made available for usage.</p>

<p>Once this process has completed, the TKE plugin configuration file is read. This file is located at ~/.tke/plugins.tkedat. If this file does not exist, TKE continues without error and its default values take effect. If this file is found, the contents of this file are stored in a Tcl array within TKE. Information stored in this file include which plugins the user has previously selected to use and whether the user has granted the plugin trust (note: trusted plugins are allowed to view and modify the file system and execute system commands) when the plugin was installed.</p>

<p>If a plugin was previously selected by a previous TKE session, the plugin file is included into a separate Tcl interpreter via the Tcl &#8220;source&#8221; command. If there were any Tcl syntax errors in a given plugin file that are detectable with this source execution, the plugin is marked to be in error. If no syntax errors are found in the file, the plugin registers itself with the plugin framework at this time.</p>

<p>The plugin registration is performed with the api::register procedure. This procedure call associates the plugin with its stored header information. All of the plugin action types associated with the plugin are stored for later retrieval by the plugin framework.</p>

<p>Once all of the selected plugins have been registered, TKE continues on, building the GUI interface and performing other startup actions.</p>

<h3 id="pluginmanagement">Plugin management</h3>

<p>At any time after initial startup time, the user may install/uninstall plugins via the Plugins menu or the command launcher. If a plugin is installed, the associated plugin file is sourced. If there are any errors in a newly sourced plugin, the plugin will remain in the uninstalled state. If the plugin is uninstalled, its associated namespace is deleted from memory and any hooks into the UI are removed.</p>

<p>Once a plugin is installed or uninstalled, the status of all of the plugins is immediately saved to the plugin configuration file (if no plugin configuration file exists in the current directory, it is created).</p>

<h3 id="interpretercreation">Interpreter Creation</h3>

<p>Two types of plugin interpreters are available. The first interpreter is a “safe” interpreter that restricts a plugin’s ability to view and modify the file system and eliminates the ability to execute subprocesses (i.e., exec and network calls). It essentially provides a clean “sandboxed” environment for the plugin to run in. By default, all plugins are run in this mode of operation. If the plugin requires extended functionality, it can mark its <em>trust_required</em> header option to a value of “yes”. If a plugin has this attribute set, when the plugin is installed it will notify the user that the plugin requires extended functionality. The user can then decide whether to grant the plugin trust or reject the request. If trust is granted, the plugin will be installed in an interpreter that will have the full Tcl command library available to do what the plugin requires. If trust is rejected, the plugin will not be installed.</p>

<p>It is preferable that all plugins are written with the intention of running in sandboxed mode, if at all possible.</p>

<h3 id="safeuntrustedinterpreterdescription">Safe (Untrusted) Interpreter Description</h3>

<p>Safe interpreters all their plugins to view and modify files within three directories:</p>

<ul>
<li>~/.tke/plugins/_plugin_name_</li>
<li><em>installation_directory</em>/plugins/_plugin_name_</li>
<li><em>installation_directory</em>/plugins/images</li>
</ul>

<p>Where <em>installation_directory</em> is the pathname to the directory where TKE is installed and <em>plugin_name</em> is the name of the plugin. The filenames of these directories are managed in such a way that the “~/.tke/plugins” and “_installation_directory_/plugins” pathnames are hidden encoded is such a way that they cannot be discerned by the plugin. Specifying any of these directories or files/subdirectories within these directories in any Tcl/Tk command that uses filenames will decode the full pathname within the TKE master interpreter and handle their usage in that interpreter.</p>

<p>The following table lists the differences in standard Tcl commands within a safe plugin interpreter to their standard counterparts.</p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Command</th>
	<th style="text-align:left;">Difference Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">cd</td>
	<td style="text-align:left;">This command is unavailable.</td>
</tr>
<tr>
	<td style="text-align:left;">encoding</td>
	<td style="text-align:left;">You may get the system encoding value, but you may not set the system encoding value. All other encoding subcommands are allowed.</td>
</tr>
<tr>
	<td style="text-align:left;">exec</td>
	<td style="text-align:left;">This command is unavailable.</td>
</tr>
<tr>
	<td style="text-align:left;">exit</td>
	<td style="text-align:left;">This command is unavailable.</td>
</tr>
<tr>
	<td style="text-align:left;">fconfigure</td>
	<td style="text-align:left;">This command is unavailable.</td>
</tr>
<tr>
	<td style="text-align:left;">file atime<br>file attributes<br>file exists<br>file executable<br>file isdirectory<br>file isfile<br>file mtime<br>file owned<br>file readable<br>file size<br>file type<br>file writable</td>
	<td style="text-align:left;">The name argument passed must be a file/directory that exists under one of the sandboxed directories.</td>
</tr>
<tr>
	<td style="text-align:left;">file delete</td>
	<td style="text-align:left;">Only names passed to the delete command that exist under one of the sandboxed directories will be deleted.</td>
</tr>
<tr>
	<td style="text-align:left;">file dirname</td>
	<td style="text-align:left;">If the resulting directory of this call is a directory under one of the sandboxed directories (or the a sandboxed directory itself), the name of the directory will be returned in encoded form.</td>
</tr>
<tr>
	<td style="text-align:left;">file mkdir</td>
	<td style="text-align:left;">Only names that exist under one of the sandboxed directories will be created.</td>
</tr>
<tr>
	<td style="text-align:left;">file join<br>file extension<br>file rootname<br>file tail<br>file separator<br>file split</td>
	<td style="text-align:left;">These can be called with any pathname since they neither operate on a file system directory/file nor require a valid directory/file for their operation to perform.</td>
</tr>
<tr>
	<td style="text-align:left;">file channels<br>file copy<br>file link<br>file lstat<br>file nativename<br>file normalize<br>file pathtype<br>file readlink<br>file rename<br>file stat<br>file system<br>file volumes</td>
	<td style="text-align:left;">These commands are not available.</td>
</tr>
<tr>
	<td style="text-align:left;">glob</td>
	<td style="text-align:left;">Only names that exist under one of the sandboxed directories (specified with the -directory or -path options) will be checked.</td>
</tr>
<tr>
	<td style="text-align:left;">load</td>
	<td style="text-align:left;">The requested file, a shared object file, is dynamically loaded into the safe interpreter if it is found. The filename exist in one of the sandboxed directories. Additionally, the shared object file must contain a safe entry point; see the manual page for the load command for more details.</td>
</tr>
<tr>
	<td style="text-align:left;">open</td>
	<td style="text-align:left;">You may only open files that exist under one of the three sandboxed directories.</td>
</tr>
<tr>
	<td style="text-align:left;">pwd</td>
	<td style="text-align:left;">This command is unavailable.</td>
</tr>
<tr>
	<td style="text-align:left;">socket</td>
	<td style="text-align:left;">This command is unavailable.</td>
</tr>
<tr>
	<td style="text-align:left;">source</td>
	<td style="text-align:left;">The given filename must exist under one of the sandboxed directories. Additionally, the name of the source file must not be longer than 14 characters, cannot contain more than one period (.) and must end in either .tcl or be named tclIndex.</td>
</tr>
<tr>
	<td style="text-align:left;">unload</td>
	<td style="text-align:left;">This command is unavailable.</td>
</tr>
</tbody>
</table>

<h3 id="pluginguielementcreation">Plugin GUI Element Creation</h3>

<p><strong>Menus</strong></p>

<p>When a menu is about to be displayed to the user (i.e., when the user clicks on a menu entry that creates a menu window to be displayed), the menu is first recursively cleared of all current elements. After everything has been deleted from the menu, the menu is repopulated with the TKE core menu elements (if there are any). Once these elements have been added to the menu, the plugin framework searches for any menu plugin action types in the selected plugin list. When it finds a plugin action type that needs to be added to this menu, the element is added to the menu, creating any cascading menus that are needed to store the menu element (menus can contain a submenu hierarchy so that menu items can be intelligently grouped). Once all of the missing cascading menus have been created (if needed), the menu action command is added to the last menu and it&#8217;s &#8220;-command&#8221; option is setup to call the plugin&#8217;s &#8220;do&#8221; procedure. The &#8220;do&#8221; procedure for a plugin action type performs the main action of the plugin action type (which can basically be anything). Once the command has been added to the window, the current plugin’s associated &#8220;handle_state&#8221; procedure is called. The purpose of the &#8220;handle_state&#8221; procedure is to determine whether the menu item should be enabled (by returning a value of 1) or disabled (by returning a value of 0).</p>

<p>This process is repeated for each menu plugin action type. Once all of the menu items have been added to the menu window, the window is displayed to the user. If the user selects a menu item that corresponds to a plugin action, the &#8220;do&#8221; procedure for that action is invoked, allowing the plugin to do something meaningful. If the menu item is associated with a table GUI element, the Tk reference to the table is given to the &#8220;do&#8221; procedure along with the row within the table that the user right-clicked in. If the menu item is associated with a text GUI element, the Tk reference to the text widget is given to the &#8220;do&#8221; procedure.</p>

<p><strong>Text Bindings</strong></p>

<p>When a new file is opened in the editor, the editor UI is created and TKE core bindings are added to the text widget that contains the file text. After TKE core bindings have been applied, the plugin framework is invoked to find any text binding actions used within plugins. If a plugin has text bindings to add, the plugin framework creates a binding tag that is unique for the plugin and inserts the new tag into the tag binding list for the text widget in one of two places (depending on what has been specified in the action registration). If the action specifies the “pretext” location, the binding is added prior to any TKE core bindtags. It is important to note that any changes to the text widget will not be visible to the commands that are bound at this point. If the action specifies the “posttext” location, the binding is added immediately after the text bind command is executed. Any commands run at this point will be able to see the changes to the text widget (if any exist).</p>

<p>Take a look at the text_binding example plugin in the plugin installation directory for an example of how text bindings can be used.</p>

<p><strong>Tk Windows</strong></p>

<p>The creation and manipulation of Tk windows (widgets) by a plugin is actually handled within the master. When the plugin interpreter needs to create a Tk widget, the widget is specified just as though the widget was being created in the plugin interpreter. For example, to create a top-level window with a single button in the window, the plugin would perform the following:</p>

<pre><code>toplevel .mywin  
ttk::button .mywin.b -text “Click Me” -command { foo::click_me }  
pack .mywin.b
</code></pre>

<p>In this example, a single button will be created in a new toplevel window with the text “Click Me”. If the button is clicked, the procedure foo::click_me (which would exist in the plugin interpreter) would be executed. Since all Tk commands are run in the master, a restricted set of the Tk command set is provided. However, all widgets will be themed and configured to match the look and feel of the rest of the Tk window (and they will change to match the UI theme if the user changes the UI theme). The following table lists the available Tk commands and any usage differences between the plugin Tk command set and the standard Tk command set.</p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Command</th>
	<th style="text-align:left;">Difference Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">canvas<br>listbox<br>menu<br>text<br>toplevel<br>ttk::button<br>ttk::checkbutton<br>ttk::combobox<br>ttk::entry<br>ttk::frame<br>ttk::label<br>ttk::labelframe<br>ttk::menubutton<br>ttk::notebook<br>ttk::panedwindow<br>ttk::progressbar<br>ttk::radiobutton<br>ttk::scale<br>ttk::scrollbar<br>ttk::separator<br>ttk::spinbox<br>ttk::treeview</td>
	<td style="text-align:left;">None. All commands are executed in the plugin interpreter and any variables referenced are variables which exist in the plugin interpreter. Any Tk widgets that are created on behalf of the plugin are destroyable by that plugin. Any other widgets that are passed to the plugin may not be destroyed by the plugin.</td>
</tr>
<tr>
	<td style="text-align:left;">clipboard<br>event<br>focus<br>font<br>grid<br>pack<br>place<br>tk_messageBox</td>
	<td style="text-align:left;">None. All commands are executed in the plugin interpreter and any variables referenced are variables which exist in the plugin interpreter. Any Tk widgets that are created on behalf of the plugin are destroyable by that plugin. Any other widgets that are passed to the plugin may not be destroyed by the plugin.</td>
</tr>
<tr>
	<td style="text-align:left;">destroy</td>
	<td style="text-align:left;">Any Tk widgets created by the plugin are destroyed; however, any plugins not created by the plugin are not destroyable. An error will be returned instead.</td>
</tr>
<tr>
	<td style="text-align:left;">bind</td>
	<td style="text-align:left;">All commands specified are executed in the plugin interpreter.</td>
</tr>
<tr>
	<td style="text-align:left;">winfo atom<br>winfo atomname<br>winfo cells<br>winfo children<br>winfo class<br>winfo colormapfull<br>winfo depth<br>winfo exists<br>winfo fpixels<br>winfo geometry<br>winfo height<br>winfo id<br>winfo ismapped<br>winfo manager<br>winfo name<br>winfo pixels<br>winfo pointerx<br>winfo pointerxy<br>winfo pointery<br>winfo reqheight<br>winfo reqwidth<br>winfo rgb<br>winfo rootx<br>winfo rooty<br>winfo screen<br>winfo screencells<br>winfo screendepth<br>winfo screenheight<br>winfo screenmmheight<br>winfo screenmmwidth<br>winfo screenvisual<br>winfo screenwidth<br>winfo viewable<br>winfo visual<br>winfo visualsavailable<br>winfo vrootheight<br>winfo vrootwidth<br>winfo vrootx<br>winfo vrooty<br>winfo width<br>winfo x<br>winfo y</td>
	<td style="text-align:left;">Only Tk widgets created by the plugin may be interrogated via the winfo command.</td>
</tr>
<tr>
	<td style="text-align:left;">winfo containing<br>winfo parent<br>winfo pathname<br>winfo toplevel</td>
	<td style="text-align:left;">If the result from executing this command is the name of a window which was created by the plugin, a valid result will be returned; otherwise, an error will be returned.</td>
</tr>
<tr>
	<td style="text-align:left;">wm</td>
	<td style="text-align:left;">If the passed window was created by the plugin, the wm command may be executed; otherwise, an error will be returned.</td>
</tr>
<tr>
	<td style="text-align:left;">image</td>
	<td style="text-align:left;">If the -file or -maskfile options are specified, the image command will allow these files to be read if the file exists in a directory/subdirectory of one of the trusted directories. If a file is specified with options outside of an trusted directory, an error will be returned. Only images created by the plugin will be deletable by the plugin. If the plugin is uninstalled, the images created by the plugin will be automatically destroyed.</td>
</tr>
<tr>
	<td style="text-align:left;">tk::TextSetCursor<br>tk::TextUpDownLine</td>
	<td style="text-align:left;"></td>
</tr>
</tbody>
</table>

<h3 id="creatinglaunchercommands">Creating Launcher Commands</h3>

<p>TKE has a powerful launcher capability that allows the user to interact with the GUI via keyboard commands. This functionality is also available to plugins via the plugin launcher registration procedure. This procedure is called once for each plugin command that is available. To register a launcher command, call the following procedure from within one of the &#8220;do&#8221; style procedures.</p>

<p><code>api::register_launcher description command</code></p>

<p>The <em>description</em> argument is a short description of the launcher command. This string is displayed in the launcher results. The <em>command</em> argument is the Tcl command to execute when the user selects the launcher entry. The contents of this command can be anything.</p>

<p>Here is a brief example of how to use this command:</p>

<pre><code>namespace eval foobar {  
  ...  
  proc launcher_command {} {  
      puts &quot;FOOBAR&quot;  
  }
  proc do {} {  
      api::register_launcher &quot;Print FOOBAR” foobar::launcher_command  
  }
  ...  
}
</code></pre>

<p>The above code will create a launcher that will print the string &#8220;FOOBAR&#8221; to standard output when invoked in the command launcher.</p>

<p>To unregister a previously registered command launcher command, call the following:</p>

<p><code>api::unregister_launcher description</code></p>

<p>The value of <em>description</em> must match the string passed to the api::register_launcher command to properly unregister the launcher command.</p>

<h2 id="pluginbundlestructure">Plugin Bundle Structure</h2>

<p>As stated previously, all plugin bundles must reside in the TKE installation&#8217;s &#8220;plugins&#8221; directory, must contain the header.tkedat and main.tcl files (with the required elements). Optionally, the directory can also contain a README.md (Markdown formatted) file which should contain any plugin usage information for the user. These elements are described in detail in this section.</p>

<h4 id="header.tkedat">header.tkedat</h4>

<p>Every plugin bundle must contain a valid header.tkedat file which is a specially formatted in a tkedat format. The header file can contain comments (ignored by the parser) by specifying the “#” character at the beginning of a line. Any other lines must be specified as follows:</p>

<p><strong>Name</strong></p>

<p><code>name {value}</code></p>

<p>The value of <em>value</em> must be the name of the plugin. This name should match the name of the bundle directory and it must match the name used in the plugin::register procedure call (more about this later). The name of the plugin must be a valid variable name (i.e., no spaces, symbols, etc.).</p>

<p><strong>Author</strong></p>

<p><code>author {name}</code></p>

<p>The value of <em>name</em> should be the name of the user who originally created the plugin.</p>

<p><strong>Email</strong></p>

<p><code>email {email_address}</code></p>

<p>The value of <em>email_address</em> should be the e-mail address of the user who original created the plugin.</p>

<p><strong>Version</strong></p>

<p><code>version {version}</code></p>

<p>The value of <em>version</em> is a numbering system in the format of &#8220;major.minor&#8221;.</p>

<p><strong>Include</strong></p>

<p><code>include {value}</code></p>

<p>The value of <em>value</em> is either &#8220;yes&#8221; or &#8220;no&#8221;. This line specifies whether this plugin should be included in the list of available plugins that user&#8217;s can install. Typically this value should be set to the value &#8220;yes&#8221; which will allow the plugin to be used by users; however, setting this value to &#8220;no&#8221; allows a plugin which is incomplete or currently not working to be temporarily disabled.</p>

<p><strong>Trust Required</strong></p>

<p><code>trust_required {value}</code></p>

<p>The value of <em>value</em> is either “yes” or “no”. If the value is set to “no” (the default value if this option is not specified in the header file), the plugin will not ask the user to grant it trust and the plugin will be run in “safe” or “untrusted” mode (see the “Safe Interpreter Description” section for details). If the value is set to “yes”, the user will be prompted to grant the plugin trust to operate. If trust is granted, the plugin will be installed and the plugin will be given the full Tcl command set to use. If trust is rejected, the plugin will not be installed.</p>

<p><strong>Description</strong></p>

<p><code>description {paragraph}</code></p>

<p>The value of paragraph should be a paragraph (multi-lined and formatted) which describes what this plugin does.</p>

<p>The following is an example of what a plugin header might look like:</p>

<pre><code>name           {p4_filelog}  
author         {John Smith}  
email          {jsmith@bubba.com}  
version        {1.0}  
include        {yes}  
trust_required {no}  
description    {Adds a function to the sidebar menu popup for  
files that, when selected, displays the entire  
Perforce filelog history for that file in a  
new editor tab.}
</code></pre>

<h4 id="registration">Registration</h4>

<p>Each plugin needs to register itself with the plugin architecture by calling the api::register procedure (from the main.tcl bundle file) which has the following call structure:</p>

<p><code>api::register name action_type_list</code></p>

<p>The value of <em>name</em> must match the plugin name in the plugin header. As such, the name must be a valid variable name.</p>

<p>The <em>action_type_list</em> is a Tcl list that contains all of the plugin action types used by this plugin. Each plugin action type is a Tcl list that contains information about the plugin action item. Every plugin must contain at least one plugin action type. The contents that make up a plugin action type list depend on the type of plugin action type, though the first element of the list is always a string which names the action type. Appendix A describes each of the plugin action types.</p>

<p>As an example of what a call to the api::register procedure looks like, consider the following example. This example shows what a fairly complex plugin can do.</p>

<pre><code>api::register word_count {  
  {menu command &quot;Display word count&quot;  
      word_count::menu_do  
      word_count::menu_handle_state}  
}
</code></pre>

<p>This plugin&#8217;s purpose is going to display the number of words the exist in the current text widget in the information bar. The menu command will be available in the “Plugins” menu. The menu element is a command type where the word_count::menu_do will be run when the command is selected. The word_count::menu_handle_state call be executed to set the menu state to disabled if no text widget currently is displayed or it will be enabled if there is a current text widget displayed.</p>

<h4 id="pluginactionnamespaceandprocedures">Plugin Action Namespace and Procedures</h4>

<p>The third required group of elements within a plugin file is the plugin namespace and namespace procedures that are called out in the action type list within the plugin. Every plugin must contain a namespace that matches the name of the plugin in the header. Within this namespace are all of the variables and procedures used for the plugin. It is important that no global variables get created within the plugin to avoid naming collisions.</p>

<p>The makeup and usage of the namespace procedures are fully described in Appendix A.</p>

<h4 id="otherelements">Other Elements</h4>

<p>In addition to the required three elements of a plugin file, the user may include any other procedures, variables, packages, etc. that are needed for the plugin within the file. It is important to note that all plugin variables and procedures reside within the plugin namespace.</p>

<h2 id="creatinganewplugintemplate">Creating a New Plugin Template</h2>

<p>Creating a new plugin file template is a straightforward process. First, you must open a new terminal and set the TKE development environment variable to a value of 1 as follows:</p>

<p><code>setenv TKE_DEVEL 1</code></p>

<p>After this command has been entered, run TKE from that same shell. When the application is ready, go to the &#8220;Plugins / Create&#8230;&#8221; menu command (the &#8220;Create&#8230;&#8221; command will be missing from the Plugins menu if TKE is started without the TKE_DEVEL environment variable set).</p>

<p>This will display an entry field at the bottom of the window, prompting you to enter the name of the plugin being created. This name must be a legal variable name (i.e., no whitespace, symbols, etc.) Once a name has been provided and the RETURN key pressed, a new plugin bundle will be created (in the TKE installation&#8217;s &#8220;plugins&#8221; directory) which is named the same as the entered name. Within the bundle, TKE will create a partially filled out template for both the header.tkedat and main.tcl, and these files will displayed within two editor tabs so that the developer can start coding the new plugin behavior.</p>

<p>Supposing that we entered a plugin name of &#8220;foobar&#8221;, the resulting directory (bundle) “foobar” would be created. The following files will exist in the directory:</p>

<p>header.tkedat</p>

<pre><code>name           {foobar}  
author         {}  
email          {}  
version        {1.0}  
include        {yes}  
trust_required {no}  
description    {}
</code></pre>

<p>main.tcl</p>

<pre><code>namespace eval foobar {  
}

api::register foobar {  
}
</code></pre>

<p>It is advisable for you to also create a file called README.md in the directory as well which should primarily contain plugin usage information. A user can display the contents of this file within TKE in a read-only buffer by using the Plugins / Show Installed… menu option and selecting one of the installed plugins from the resulting window.</p>

<p>You may, optionally, place any other files that are needed by your plugin within the plugin bundle, including, but not limited to, other Tcl source files, packages, data files, and images.</p>

<p>You cannot use any content that requires a compilation on the installation machine.</p>

<h1 id="syntaxhandling">Syntax Handling</h1>

<p>TKE comes equipped with syntax highlighting support for several popular languages. However, adding support for other languages is supported through the application’s syntax description files. All syntax files exist in the installation directory under the data/syntax directory and have a special “.snippet” extension. The base name of the file is the name of the language being supported (ex., the language file to support C++ is called “C++.syntax”).</p>

<h2 id="fileformat">File Format</h2>

<p>The format of the syntax file is essentially a Tcl list containing key-value pairs. As such, all values need to be surrounded by curly brackets (i.e, {..}). Tcl command calls are not allowed in the file (i.e., no evaluations or substitutions are performed).</p>

<p>The following subsections describe the individual components of this file along with examples.</p>

<h4 id="filepatterns">filepatterns</h4>

<p>The filepatterns value is a list of file extension patterns that are used to automatically identify the type of file to associate the syntax rules to. Whenever a file is opened in the editor, the file’s extension is compared against all of the syntax extensions. A match causes the associated language syntax highlighting rules to be used. If a syntax cannot be found, the default “&lt;None&gt;” syntax is used (essentially no syntax highlighting is applied to the file). The format of this list should look as follows:</p>

<p><code>filepatterns {extension …}</code></p>

<p>Each extension value must contain a PERIOD (.) followed by a legal filesystem extension (ex., “.cc” “.tcl” “.php”, etc.) Zero or more extension values are allowed in the extension list.</p>

<h4 id="vimsyntax">vimsyntax</h4>

<p>The vimsyntax value is a list of one or more names that match the corresponding *.vim syntax file (this can be found in the /usr/share/vim/vim_version_/syntax directory of your system, minus the .vim extension) that can also be used for syntax highlighting. This value is compared to any “syntax=name” Vim modeline information to determine which syntax highlighting language to use for the given file.</p>

<p><code>vimsyntax {name …}</code></p>

<h4 id="reference">reference</h4>

<p>The reference value is a list of one or more name/URL pairings where each URL specifies the location of documentation pertaining to the given language. The associated name is displayed in the <code>Help/Language Documentation</code> submenu. If the name contains spaces, the full name should be encapsulated in curly braces. Typically, one of the reference items should be a language reference link. However, other URLs can also be specified such as links to supporting documentation.</p>

<pre><code>reference {  
 {name url}+  
}
</code></pre>

<p>If a URL contains the syntax <code>{query}</code> within it, TKE will create a new URL by replacing this portion of the URL string with text that is either selected within the editing buffer or using the keyword that is beneath the insertion cursor. This allows user’s to use the Vim <code>K</code> command to perform language-specific documentation search. If no URLs are provided with this string embedded, the Vim <code>K</code> command will not be available for that syntax.</p>

<h4 id="embedded">embedded</h4>

<p>The embedded value is used to describe one or more language syntaxes that are either embedded in the language syntax between starting/ending syntax (ex., PHP within HTML) or are mixed in with the current language syntax (ex., C within C++). The value is made up of a list of embedded language descriptions where each language description contains either one or three elements as follows:</p>

<pre><code>embedded {  
  {language ?start_expression end_expression?}+  
}
</code></pre>

<p>The specified language must be an existing language syntax that is provided natively with TKE or is provided via a plugin. The start_expression and end_expression values are regular expressions that describe the syntax for the start and end of the language syntax (if the language is embedded in the parent language as a block). If the embedded language is intermixed in syntax with the parent language (as is the case with C/C++), then no start_expression and end_expression values should be specified for the language description. For examples of embedded language description, see the HTML.syntax and C++.syntax files in the data/syntax installation directory.</p>

<h4 id="matchcharsallowed">matchcharsallowed</h4>

<p>Specifies a list of characters that will be automatically, smartly inserted into or deleted from the editing buffer when its counterpart is inserted/deleted.</p>

<p><code>matchcharsallowed { ?value …? }</code></p>

<p>The following is the list of legal values:</p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Value</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">curly</td>
	<td style="text-align:left;">Left curly bracket ({) insertion/deletion will cause the right curly bracket (}) to be added/removed.</td>
</tr>
<tr>
	<td style="text-align:left;">square</td>
	<td style="text-align:left;">Left square bracket ([) insertion/deletion will cause the right square bracket (]) to be added/removed.</td>
</tr>
<tr>
	<td style="text-align:left;">paren</td>
	<td style="text-align:left;">Left parenthesis (() insertion/deletion will cause the right parenthesis ()) to be added/removed.</td>
</tr>
<tr>
	<td style="text-align:left;">angled</td>
	<td style="text-align:left;">Left angled bracket (&lt;) insertion/deletion will cause the right angled bracket (&gt;) to be added/removed.</td>
</tr>
<tr>
	<td style="text-align:left;">double</td>
	<td style="text-align:left;">Double quote (“) insertion/deletion will cause another double quote to be added/removed.</td>
</tr>
<tr>
	<td style="text-align:left;">single</td>
	<td style="text-align:left;">Single quote (‘) insertion/deletion will cause another single quote to be added/removed.</td>
</tr>
<tr>
	<td style="text-align:left;">btick</td>
	<td style="text-align:left;">Backtick (`) insertion/deletion will cause another backtick to be added/removed.</td>
</tr>
</tbody>
</table>

<h4 id="escapes">escapes</h4>

<p>The escapes value is used to indicate to the syntax highlighter whether or not the escape character (\) should be treated as a C escape character (i.e., the character immediately following the escape character should not be considered its normal value) or as just another character in the syntax. A value of 1 is the default (consider the escape as in C).</p>

<p><code>escapes {0|1}</code></p>

<h4 id="tabsallowed">tabsallowed</h4>

<p>The tabsallowed value is used to determine whether any TAB characters entered in the editor should be inserted as a TAB or should have the TAB substituted as space characters. It is recommended that unless the file type requires TAB characters in the syntax (ex., Makefiles) that this value should be set to false (0). This value should be either 0 (false) or 1 (true) and should be specified as follows:</p>

<p><code>tabsallowed {0|1}</code></p>

<h4 id="linewrap">linewrap</h4>

<p>The line wrap value is used to specify if the editing buffer for the language should enable (1) or disable (0) line wrapping by default. For example, syntaxes that support writing should potentially enable line wrapping by default; however, programming languages should not.</p>

<p><code>linewrap {0|1}</code></p>

<h4 id="casesensitive">casesensitive</h4>

<p>The casesensitive value specifies if the language is case sensitive (1) or not (0). If the language is not case sensitive, TKE will perform any keyword/expression matching using a case insensitive method. This value should be either 0 or 1 and should be specified as follows:</p>

<p><code>casesensitive {0|1}</code></p>

<h4 id="delimiters">delimiters</h4>

<p>The delimiters value allows a syntax specification to provide a custom regular expression that is used for determining word boundaries. This value is optional as a default delimiter expression will be used if this value is not specified. The default expression is as follows:</p>

<p><code>[^\s\(\{\[\}\]\)\.\t\n\r;:=\”'\|,&lt;&gt;]+</code></p>

<p>The following specifies the syntax for this element:</p>

<p><code>delimiters {regular_expression}</code></p>

<h4 id="indent">indent</h4>

<p>The indent value is a list of language syntax elements that should be used to cause a level of indentation to be automatically added when a newline character is inserted after a syntax match occurs. Each element in the list should be surrounded by curly brackets (ex., {…}) with whitespace added between elements. Any curly brackets used within an element should be escaped with the BACKSPACE (\) character (ex., \{).</p>

<p>Any Tcl regular expressions can be specified for an indent element.</p>

<p>The following specifies the syntax for this element:</p>

<p><code>indent {{indentation_expression} *}</code></p>

<h4 id="unindent">unindent</h4>

<p>The unindent value is a list of language syntax elements that should be used to cause a level of indentation to be automatically removed when a matching syntax is found. Each element in the list should be surrounded by curly brackets (ex., {…}) with whitespace added between elements. Any curly brackets used within an element should be escaped with the BACKSPACE (\) character (ex. \}}).</p>

<p>Any Tcl regular expressions can be specified for an unindent element.</p>

<p>The following specifies the syntax for this element:</p>

<p><code>unindent {{unindentation_expression} *}</code></p>

<h4 id="reindent">reindent</h4>

<p>The reindent value is a list of language syntax elements that may cause both an unindent followed by an indent such as the case of C/C++ switch..case syntax. Each element of the list consists of a starting regexp element that starts the sequence of indentations. Each element in the list after it are potential reindent syntax where the first occurrence of the reindent element will not be unindented but all occurrences of one of the reindent elements afterwards (but in the same statement block as the the first occurrence) will be unindented.</p>

<p>This feature allows for proper automatic indentation in the syntax like C/C++ switch and C++ classes (code following “public”, “private” and “protected” lines will be indented) as the following example code shows:</p>

<pre><code>switch( a ) {  
  case 0 :  
… // This code will be auto-indented properly  
break;  
  case 1 :  // ‘case’ will be unindented automatically  
… // This line will be indented  
break;  
}
</code></pre>

<p>See the C++.syntax file in the &lt;TKE&gt;/data/syntax directory for an example of what this code would look like to handle a switch/class case using reindent.</p>

<p>The following specifies the syntax for this element:</p>

<p><code>reindent {{start_expression expression …} *}</code></p>

<h4 id="icomment">icomment</h4>

<p>The icomment value is a list of one or two elements that represent the character string to insert a comment when the user selects the “Text / Comment” menu item. If the list contains one character sequence, the sequence is assumed to be used as a line comment (i.e., it is inserted before each line of selected text at the beginning of the line). If the list contains two character sequences, the sequences are treated as the beginning and end of a block comment (i.e., the first character sequence will be inserted before a block of selected text while the second sequence will be inserted after a block of selected text). Note that the “Text / Uncomment” menu item will not use these values for removing comment characters, instead it uses a combination of the “lcomments” and “bcomments” regular expressions for comment parsing.</p>

<h4 id="lcomments">lcomments</h4>

<p>The lcomments value is a list of language syntax elements that indicate a line comment. Whenever a match in the file occurs, the syntax and all other syntax after it until the newline character is found is syntax highlighted as a comment. Each element in the list should be surrounded by curly brackets (ex., {…}) with whitespace characters added between elements. Any curly brackets used within an element should be escaped with the BACKSPACE (\) character (ex., \{{).</p>

<p>Any Tcl regular expressions can be specified for an lcomments element.</p>

<p>The following specifies the syntax for this element:</p>

<p><code>lcomments {{element} *}</code></p>

<h4 id="bcomments">bcomments</h4>

<p>The bcomments value is a list of language syntax element pairs that indicate the starting syntax and ending syntax elements to define a block comment. All text between these syntax elements are highlighted as comments. Each pair in the list should be surrounded by curly brackets (ex., {…}) as well as each element in the pair. All elements must contain whitespace between them and any curly brackets used within an element should be escaped with the BACKSPACE () character (ex., \{{).</p>

<p>Any Tcl regular expressions can be specified for elements in each bcomments pair.</p>

<p>The following specified the syntax for this element:</p>

<p><code>bcomments {{{start_element} {end_element}} *}</code></p>

<h4 id="strings">strings</h4>

<p>The strings value is a list of language syntax elements that indicate the start and end of a string. All text found between two occurrences of an element will be highlighted as a string. Each element in the list should be surrounded by curly brackets (ex., {…}) with whitespace characters added between elements.</p>

<p>Any Tcl regular expressions can be specified for an strings element.</p>

<p>The following specifies the syntax for this element:</p>

<p><code>strings {{element} *}</code></p>

<h4 id="keywords">keywords</h4>

<p>The keywords value is a list of syntax keywords supported by the language. Each keyword must be a literal value (no regular expressions can be specified) and must be parseable as a word. All elements in the list must be separated by whitespace.</p>

<p>The following specifies the syntax for this element:</p>

<p><code>keywords {{keyword} *}</code></p>

<h4 id="symbols">symbols</h4>

<p>The symbols value is a list of syntax keywords and/or regular expressions that represent special markers in the code. The name of the symbol is the first word following this keyword/expression. The user can find all symbols within the language and jump to them in the source code by specifying the ‘@‘ symbol in the command launcher and typing in the name of the symbol to search for.</p>

<p>For example, to make all Tcl procedures a symbol, a value of “proc” would be specified in the symbol keyword list. The list of symbols would then be the name of all procedures in the source code.</p>

<p>Whitespace must be used to separate all symbol values in the list.</p>

<p>The following specifies the syntax for this element:</p>

<pre><code>symbols {  
  {HighlightKeywords {symbol_keyword *}} *  
  {HighlightClassForRegexp {regular_expression} {processing_procedure}} *  
}
</code></pre>

<p>The value of <em>symbol_keyword</em> must be a literal value. The value of <em>regular_expression</em> must be a valid Tcl regular expression. You can have any number of HighlightClass and/or HighlightClassForRegexp lists in the symbols list.</p>

<p>The value of <em>processing_procedure</em> is used in the same way as those specified in the advanced section of the syntax file. See the advanced section for details on the makeup of this procedure. If a processing procedure is not necessary, simply pass the empty Tcl list (<code>{}</code>) in its place.</p>

<h4 id="numbers">numbers</h4>

<p>The numbers value is a list of regular expressions that represent all valid numbers in the syntax. Any text matching one of these regular expressions will be highlighted with the number syntax color. Whitespace must be used to separate all number expressions in the list.</p>

<p>The following specifies the syntax for this element:</p>

<pre><code>numbers {  
  {HighlightClassForRegexp {regular_expression} {processing_procedure}} *  
}
</code></pre>

<h4 id="punctuation">punctuation</h4>

<p>The punctuation value is a list of regular expressions that represent all valid punctuation in the syntax. Any text matching one of these regular expressions will be highlighted with the punctuation syntax color. Whitespace must be used to separate all regular expressions in the list.</p>

<p>The following specifies the syntax for this element:</p>

<pre><code>punctuation {  
  {HighlightClassForRegexp {regular_expression} {processing_procedure}} *  
}
</code></pre>

<h4 id="precompile">precompile</h4>

<p>The precompile value is a list of regular expressions that represent all valid precompiler syntax in the language (if the language supports it). Any text matching one of these regular expressions will be highlighted with the precompile syntax color. Whitespace must be used to separate all regular expressions in the list.</p>

<p>The following specifies the syntax for this element:</p>

<pre><code>precompile {  
  {HighlightClassForRegexp {regular_expression} {processing_procedure}} *  
  {HighlightClassStartWithChar {character} {processing_procedure}} *  
}
</code></pre>

<p>The <em>regular_expression</em> value must be a valid Tcl expression. The character value must be a single keyboard character. The HighlightClassStartWithChar is a special case regular expression that finds a non-whitespace list of characters that starts with the given character and highlights it. From a performance perspective, it is faster to use this call than a regular expression if your situation can take advantage of it.</p>

<h4 id="miscellaneous1miscellaneous2miscellaneous3">miscellaneous1, miscellaneous2, miscellaneous3</h4>

<p>The miscellaneous values are a list of literal keyword values or regular expressions that either don’t fit in with any of the categories above or an additional color is desired. Each miscellaneous group is associated with its own color. Any values and/or regular expressions that match these values will be highlighted with the corresponding color. Whitespace is required between all values in this list.</p>

<p>The following specifies the syntax for this element:</p>

<pre><code>miscellaneous {  
  {HighlightKeywords {{keyword} *}}  
  {HighlightClassForRegexp {regular_expression} {processing_procedure}} *  
  {HighlightClassStartsWithChar {character} {processing_procedure}} *  
}
</code></pre>

<h4 id="highlight">highlight</h4>

<p>The highlight section allows text to be syntax highlighted by colorizing the background color instead of the foreground color. The foreground color of this text will be the same as the background color of the editing window.</p>

<p>The following specifies the syntax for this element:</p>

<pre><code>highlighter {  
  {HighlightClassForRegexp {regular_expression} {processing_procedure}} *  
  {HighlightClassStartWithChar {character} {processing_procedure}} *  
}
</code></pre>

<h4 id="meta">meta</h4>

<p>The meta section allows text to be syntax highlighted with a color that matches the warning width and line numbers. Any text matched with this type has the special ability to be shown or hidden by the user based on the setting of the View menu option. An example of where this is used is in marking up Markdown characters used for formatting purposes. Since the formatted text is viewable with Markdown, the formatting characters can be hidden to help make the document even easier to read.</p>

<p>The following specifies the syntax for this element:</p>

<pre><code>meta {  
  {HighlightClassForRegexp {regular_expression} {processing_procedure}} *  
  {HighlightClassStartWithChar {character} {processing_procedure}} *  
}
</code></pre>

<h4 id="advanced">advanced</h4>

<p>The advanced section allows for more complex language parsing scenarios (beyond what can be handled with a regular expression only) and allows the user to change the font rendering (i.e., bold, italics, underline, overstrike, superscript, subscript, and font size) and handle mouse clicks.</p>

<p>The advanced section is comprised of two or three parts: highlight classes, regular expressions and processing procedures.</p>

<h5 id="highlightclasses">Highlight Classes</h5>

<p>The first part is a list of highlight classes that are user-defined. A highlight class is defined using the following syntax:</p>

<p><code>HighlightClass class_name syntax_key {render_options}</code></p>

<p>where <em>class_name</em> is a user-defined name that will be rendered with the color of the <em>syntax_key</em> and the options associated with <em>render_options</em>. The value of <em>syntax_key</em> can be any of the highlight classes for a syntax file (i.e., strings, keywords, symbols, numbers, punctuation, precompile, miscellaneous1, miscellaneous2, miscellaneous3). The list of <em>render_options</em> is a space-separated list of any of the following values:</p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Value(s)</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">bold</td>
	<td style="text-align:left;">Any text tagged with the associated <em>class_name</em> will be emboldened.</td>
</tr>
<tr>
	<td style="text-align:left;">italics</td>
	<td style="text-align:left;">Any text tagged with the associated <em>class_name</em> will be italicized.</td>
</tr>
<tr>
	<td style="text-align:left;">underline</td>
	<td style="text-align:left;">Any text tagged with the associated <em>class_name</em> will be underlined.</td>
</tr>
<tr>
	<td style="text-align:left;">h1, h2, h3, h4, h5, h6</td>
	<td style="text-align:left;">Any text tagged with the associated <em>class_name</em> will have its font rendered the the specified font size where a value of h1 is the largest font while h6 is a font size one point size greater than the normal font size used in the editor.</td>
</tr>
<tr>
	<td style="text-align:left;">overstrike</td>
	<td style="text-align:left;">Any text tagged with the associated <em>class_name</em> will be overstriken.</td>
</tr>
<tr>
	<td style="text-align:left;">superscript</td>
	<td style="text-align:left;">Any text tagged with the associated <em>class_name</em> will be written in superscript.</td>
</tr>
<tr>
	<td style="text-align:left;">subscript</td>
	<td style="text-align:left;">Any text tagged with the associated <em>class_name</em> will be written in subscript.</td>
</tr>
<tr>
	<td style="text-align:left;">click</td>
	<td style="text-align:left;">Any text tagged with the associated <em>class_name</em> will be clickable. Any left-clicks associated with the text will call a specified Tcl procedure.</td>
</tr>
</tbody>
</table>

<h5 id="regularexpressions">Regular Expressions</h5>

<p>The second section in the advanced section is a list of highlight calls, associating values/regular expressions with Tcl procedure calls that will be executed whenever text is found that matches the value/regular expression. The highlight calls are defined using the following syntax:</p>

<pre><code>HighlightRegexp             {regular_expression} processing_procedure  
HighlightClassStartWithChar {character}          processing_procedure
</code></pre>

<h5 id="processingprocedures">Processing Procedures</h5>

<p>For user-created syntax files, the location of the processing procedures will either be within the main.tcl plugin file or within the syntax file itself. The purposes of the Tcl procedure is to take the matching contents of the text widget and return a list containing a list of tags, their starting positions in the text widget, their ending positions in the text widget, and any Tcl procedures to call (if the tag is clickable) along with an optional new starting position in the text widget to begin parsing (default is to start at the character just after the input matching text.</p>

<p>The following is a representation of this Tcl procedure:</p>

<pre><code>proc foobar {txt start_pos end_pos ins} {  
  return [list [list [list tag new_start new_end cmd]] “”]  
}
</code></pre>

<p>where the value of tag is one of the user-defined class names within the syntax advanced section, the value of <em>new_start</em> and <em>new_end</em> is a legal index value for a Tcl text widget, and the value of cmd is a Tcl procedure along with any parameters to pass when it is called. The last element of the list is a legal Tcl text widget index value to begin parsing in the main syntax parser. If this value is the empty string, the parser will resume parsing at the <em>end_pos</em> character passed to this function.</p>

<p>The parameters of the procedure include <em>txt</em> which is the name of the text widget, <em>start_pos</em> and <em>end_pos</em> which indicate the range of text that matched the HighlightRegexp or HighlightClassStartWithChar, and <em>ins</em> indicates if the procedure callback was due to text being inserted (1) or not (0).</p>

<p>The body of the function should perform some sort of advanced parsing of the given text that ultimately produces the return list. Care should be taken in the body of this function to produce as efficient of code as possible as this procedure could be called often by the syntax parser.</p>

<p>For an example of how to write your own advanced parsing code, refer to the <em>markdown_color</em> plugin located in the installation directory (<em>installation_directory</em>/plugins/_markdown_color_).</p>

<p>In addition to writing the processing procedures outside of the syntax file, you can also embed the processing procedures directly in the syntax file itself using the following syntax:</p>

<pre><code>HighlightProc name {  
 # Body of procedure  
 # Four variables are automatically available:  
 #   - $txt = refers to the text widget containing the matched text  
 #   - $startpos = starting position of the matched text  
 #   - $endpos = ending position of the matched text  
 #   - $insert = Set to 1 if we are syntax highlighting due to inserting text; otherwise, it will be set to 0.  
} HighlightEndProc
</code></pre>

<p>All text between <code>HighlightProc</code> and <code>HighlightEndProc</code> will be highlighted by TKE as Tcl syntax. The body of the function works the same as the processing procedure that was previously described.</p>

<h4 id="formatting">formatting</h4>

<p>Specifies one or more supported syntax formatting by associating a TKE formatting type with language syntax that should be inserted before and/or after selected text (or line) within the editing buffer. The information specified in this section is used by TKE’s <code>Edit/Formatting</code> menu.</p>

<p>This section must be specified as follows:</p>

<pre><code>formatting {  
 type {(word|line) start_syntax ?end_syntax?}+  
}
</code></pre>

<p>The valid values for <code>type</code> are as follows:</p>

<ul>
<li>bold</li>
<li>italics</li>
<li>underline</li>
<li>strikethrough</li>
<li>highlight</li>
<li>superscript</li>
<li>subscript</li>
<li>code</li>
<li>header1, header2, header3, header4, header5, header6</li>
<li>ordered</li>
<li>unordered</li>
<li>checkbox</li>
</ul>

<p>A value of <code>word</code> should be used if the <code>start_syntax</code> and, if specified, <code>end_syntax</code> should be placed around the selected text. A value of <code>line</code> should be used if the <code>start_syntax</code> should be placed at the beginning of a selected line and, if specified, the <code>end_syntax</code> be placed at the end of a selected line.</p>

<h2 id="example">Example</h2>

<p>The following example code is taken right from the Tcl syntax file (data/syntax/Tcl.syntax). It can give you an idea about how to create your own syntax file. Feel free to also take a look at any of the other language syntax files in the directory as example code. It is important to note that if a syntax highlight class is not needed, it does not not need to specified in the syntax file.</p>

<pre><code>filepatterns  
{*.tcl *.msg}

vimsyntax  
{tcl}

matchcharsallowed  
{curly square paren double}

tabsallowed  
{0}

casesensitive  
{1}

indent  
{\{}

unindent  
{\}}

icomment {{#}}

lcomments {{^[ \t]*#} {;#}}

strings {{&quot;}}

keywords  
{
  after append apply array auto_execok auto_import auto_load auto_mkindex  
  auto_mkindex_old auto_qualify auto_reset bgerror binary break catch cd chan clock  
  close concat continue dde dict else elseif encoding eof error eval exec exit expr  
  fblocked fconfigure fcopy file fileevent filename flush for foreach format gets glob global  
  history http if incr info interp join lappend lassign lindex linsert list llength load lrange  
  lrepeat lreplace levers lsearch lset lsort mathfunc mathop memory msgcat namespace  
  open package parray pid pkg::create pkg_mkIndex platform platform::shell puts pwd  
  read refchan regexp registry regsub rename return scan seek set socket source split  
  string subst switch tcl_endOfWord tcl_findLibrary tcl_startOfNextWord  
  tcl_startOfPreviousWord tcl_wordBreakAfter tcl_wordBreakBefore tcltest tell time tm  
  trace unknown unload unset update uplevel upvar variable vwait while bind bindtags  
}

symbols  
{
  HighlightClass proc syntax::get_prefixed_symbol  
}

numbers  
{
  HighlightClassForRegexp {\m([0-9]+|[0-9]+\.[0-9]*|0x[0-9a-fA-F]+} {}  
}

punctuation  
{
  HighlightClassForRegexp {[][\{\}]} {}  
}

miscellaneous1  
{
  HighlightClass {  
ctext button label text frame toplevel scrollbar checkbutton canvas  
listbox menu menubar menubutton radiobutton scale entry message  
tk_chooseDirectory tk_getSaveFile tk_getOpenFile tk_chooseColor tk_optionMenu  
ttk::button ttk::checkbutton ttk::combobox ttk::entry ttk::frame ttk::label  
ttk::labelframe ttk::menubutton ttk::notebook ttk::panedwindow  
ttk::progressbar ttk::radiobutton ttk::scale ttk::scrollbar ttk::separator  
ttk::sizegrip ttk::treeview  
  } {}  
}

miscellaneous2 {  
  HighlightClass {  
-text -command -yscrollcommand -xscrollcommand -background -foreground -fg  
-bg -highlightbackground -y -x -highlightcolor -relief -width -height -wrap  
-font -fill -side -outline -style -insertwidth  -textvariable -activebackground  
-activeforeground -insertbackground -anchor -orient -troughcolor -nonewline  
-expand -type -message -title -offset -in -after -yscroll -xscroll -forward  
-regexp -count -exact -padx -ipadx -filetypes -all -from -to -label -value  
-variable -regexp -backwards -forwards -bd -pady -ipady -state -row -column  
-cursor -highlightcolors -linemap -menu -tearoff -displayof -cursor -underline  
-tags -tag -weight -sticky -rowspan -columnspan  
  } {}  
}

miscellaneous3 {  
  HighlightClassForRegexp {\m(\.[a-zA-Z0-9\_\-]+)+} {}  
  HighlightClassWithOnlyCharStart \$ {}  
}
</code></pre>

<p>Essentially this file is specifying the following about the Tcl language:</p>

<ol>
<li>Any file that ends with .tcl or .msg should be parsed as a Tcl file.</li>
<li>If a Vim modeline is found with syntax=tcl, use this syntax highlighting information.</li>
<li>Auto-match curly brackets ( {} ), square brackets ( [] ), parenthesis ( () ) and double-quotes ( “” ).</li>
<li>Tab characters should not be used for indentation.</li>
<li>Use case sensitive matching for parsing purposes.</li>
<li>Whenever an open curly bracket is found, increase the indentation level, and whenever a closing curly bracket is found, decrease the indentation level.</li>
<li>Insert line comments with the HASH (#) character.</li>
<li>All comments start with the HASH (#) character.</li>
<li>All strings start and end with the QUOTE (“) character.</li>
<li>Apply keyword coloring to the list of keywords (ex., “after”, “bindtags”, “uplevel”, etc.)</li>
<li>Whenever a “proc” keyword is found, use the name of the proc as a searchable symbol in the file.</li>
<li>Highlight any integer values as numbers.</li>
<li>Highlight the ], [, {, } characters as punctuation</li>
<li>There are no precompiler syntax to be colored.</li>
<li>Highlight Tk keywords in a different color than Tcl keywords.</li>
<li>Highlight Tcl/Tk option values in a different color than normal Tcl keywords.</li>
<li>Highlight Tk window pathnames in the miscellaneous3 color.</li>
<li>Highlight variables in the miscellaneous3 color.</li>
</ol>

<h1 id="pluginactiontypes">Plugin Action Types</h1>

<h2 id="menu">menu</h2>

<h4 id="description">Description</h4>

<p>The menu plugin type allows the user to add a new menu command to the Plugins menu in the main application menubar. All menu plugins can optionally append any number of “.submenu” items to the menubar menu representing a cascading menu hierarchy within the menu that the command will be placed in. This allows the user to organize plugin menu items into groups, making the menu easier to find commands and easier to read/understand.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<pre><code>{menu command hierarchy do_procname handle_state_procname}  
{menu {checkbutton variable} hierarchy do_procname handle_state_procname}  
{menu {radiobutton variable value} hierarchy do_procname handle_state_procname}  
{menu separator hierarchy}
</code></pre>

<p>The “menu command” type creates a menu command that, when clicked, runs the procedure called <em>do_procname</em>. The <em>hierarchy</em> value specifies the menu hierarchy (optional) and string text in the menu (joined with periods). The hierarchy will be created if it does not exist.</p>

<p>The “menu checkbutton” type creates a menu command has an on/off state associated with it. When the menu item is clicked, the state of the menu item is inverted and the <em>do_procname</em> procedure is called. The <em>variable</em> argument is the name of a variable containing the current on/off value associated with the menu item. The <em>hierarchy</em> value specifies the menu hierarchy (optional) and string text in the menu (joined with periods). The hierarchy will be created if it does not exist.</p>

<p>The “menu radiobutton” type creates a menu command that has an on/off state such that in a group of multiple menu items that share the same variable, only one is on at at time. When the menu item is clicked, the state of the menu item is set to on and the <em>do_procname</em> procedure is called. The <em>variable</em> argument is the name of a variable containing the menu item that is currently on. The <em>value</em> value specifies a unique identifier for this menu within the group. When the value of variable is set to value, this menu option will have the on state. The <em>hierarchy</em> value specifies the menu hierarchy (optional) and string text in the menu (joined with periods). The hierarchy will be created if it does not exist.</p>

<p>The “menu separator” type creates a horizontal separator in the menu which is useful for organizing menu options. The <em>hierarchy</em> value, in this case, only refers to the menu hierarchy to add the separator to (menu separators don’t have text associated with them).</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The “do” Procedure</strong></p>

<p>The &#8220;do&#8221; procedure contains the code that will be executed when the user invokes the menu item in the menubar.</p>

<p>Example:</p>

<pre><code>proc foobar_menubar_do {} {  
 puts &quot;Foobar menu item has been clicked!&quot;  
}
</code></pre>

<p><strong> The “handle_state” Procedure</strong></p>

<p>The &#8220;handle_state&#8221; procedure is called when the Plugin menu is created (when the &#8220;Plugins&#8221; menubar item is clicked). This procedure is responsible for determining the state of the menu item to normal (1) or disabled (0) as deemed appropriate by the plugin creator.</p>

<p>Example:</p>

<pre><code>proc foobar_menubar_handle_state {} {  
 return $some_test_condition  
}
</code></pre>

<h2 id="tab_popup">tab_popup</h2>

<h4 id="description">Description</h4>

<p>The tab_popup plugin type allows the user to add a new menu command to the popup menu in an editor tab. All tab_popup plugins can optionally append any number of “.submenu” items to the menubar menu representing a cascading menu hierarchy within the menu that the command will be placed in. This allows the user to organize plugin menu items into groups, making the menu easier to find commands and easier to read/understand.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<pre><code>{tab_popup command hierarchy do_procname handle_state_procname}  
{tab_popup {checkbutton variable} hierarchy do_procname handle_state_procname}  
{tab_popup {radiobutton variable value} hierarchy do_procname \  
    handle_state_procname}  
{tab_popup separator hierarchy}
</code></pre>

<p>The “tab_popup command” type creates a menu command that, when clicked, runs the procedure called <em>do_procname</em>. The <em>hierarchy</em> value specifies the menu hierarchy (optional) and string text in the menu (joined with periods). The hierarchy will be created if it does not exist.</p>

<p>The “tab_popup checkbutton” type creates a menu command has an on/off state associated with it. When the menu item is clicked, the state of the menu item is inverted and the <em>do_procname</em> procedure is called. The <em>variable</em> argument is the name of a variable containing the current on/off value associated with the menu item. The <em>hierarchy</em> value specifies the menu hierarchy (optional) and string text in the menu (joined with periods). The hierarchy will be created if it does not exist.</p>

<p>The “tab_popup radiobutton” type creates a menu command that has an on/off state such that in a group of multiple menu items that share the same variable, only one is on at at time. When the menu item is clicked, the state of the menu item is set to on and the <em>do_procname</em> procedure is called. The <em>variable</em> argument is the name of a variable containing the menu item that is currently on. The <em>value</em> value specifies a unique identifier for this menu within the group. When the value of variable is set to value, this menu option will have the on state. The <em>hierarchy</em> value specifies the menu hierarchy (optional) and string text in the menu (joined with periods). The hierarchy will be created if it does not exist.</p>

<p>The “tab_popup separator” type creates a horizontal separator in the menu which is useful for organizing menu options. The <em>hierarchy</em> value, in this case, only refers to the menu hierarchy to add the separator to (menu separators don’t have text associated with them).</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The &#8220;do&#8221; Procedure</strong></p>

<p>The &#8220;do&#8221; procedure contains the code that will be executed when the user invokes the menu item in the menubar.</p>

<p>Example:</p>

<pre><code>proc foobar_tab_popup_do {} {  
 puts &quot;Foobar tab popup item has been clicked!&quot;  
}
</code></pre>

<p><strong>The &#8220;handle_state&#8221; Procedure</strong></p>

<p>The &#8220;handle_state&#8221; procedure is called when the popup menu is created (when a right click occurs within a tab). This procedure is responsible for determining the state of the menu item of normal (1) or disabled (0) as deemed appropriate by the plugin creator.</p>

<p>Example:</p>

<pre><code>proc foobar_menubar_handle_state {} {  
  return $some_test_condition  
}
</code></pre>

<h2 id="root_popup">root_popup</h2>

<h4 id="description">Description</h4>

<p>The root_popup plugin type allows the user to add a new menu command to the popup menu in the sidebar when a root directory (i.e., a directory that doesn’t have a parent directory in the sidebar pane) is right-clicked. All root_popup plugins can optionally append any number of “_.submenu_” items to the menubar menu representing a cascading menu hierarchy within the menu that the command will be placed in. This allows the user to organize plugin menu items into groups, making the menu easier to find commands and easier to read/understand.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<pre><code>{root_popup command hierarchy do_procname handle_state_procname}  
{root_popup {checkbutton variable} hierarchy do_procname handle_state_procname}  
{root_popup {radiobutton variable value} hierarchy do_procname handle_state_procname}  
{root_popup separator hierarchy}
</code></pre>

<p>The “root_popup command” type creates a menu command that, when clicked, runs the procedure called <em>do_procname</em>. The <em>hierarchy</em> value specifies the menu hierarchy (optional) and string text in the menu (joined with periods). The hierarchy will be created if it does not exist.</p>

<p>The “root_popup checkbutton” type creates a menu command has an on/off state associated with it. When the menu item is clicked, the state of the menu item is inverted and the <em>do_procname</em> procedure is called. The <em>variable</em> argument is the name of a variable containing the current on/off value associated with the menu item. The <em>hierarchy</em> value specifies the menu hierarchy (optional) and string text in the menu (joined with periods). The hierarchy will be created if it does not exist.</p>

<p>The “root_popup radiobutton” type creates a menu command that has an on/off state such that in a group of multiple menu items that share the same variable, only one is on at at time. When the menu item is clicked, the state of the menu item is set to on and the <em>do_procname</em> procedure is called. The <em>variable</em> argument is the name of a variable containing the menu item that is currently on. The <em>value</em> value specifies a unique identifier for this menu within the group. When the value of variable is set to value, this menu option will have the on state. The <em>hierarchy</em> value specifies the menu hierarchy (optional) and string text in the menu (joined with periods). The hierarchy will be created if it does not exist.</p>

<p>The “root_popup separator” type creates a horizontal separator in the menu which is useful for organizing menu options. The <em>hierarchy</em> value, in this case, only refers to the menu hierarchy to add the separator to (menu separators don’t have text associated with them).</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The &#8220;do&#8221; Procedure</strong></p>

<p>The &#8220;do&#8221; procedure contains the code that will be executed when the user invokes the menu item in the menubar.</p>

<p>Example:</p>

<pre><code>proc foobar_root_popup_do {} {  
 puts &quot;Foobar root popup item has been clicked!&quot;  
}
</code></pre>

<p><strong>The &#8220;handle_state&#8221; Procedure</strong></p>

<p>The &#8220;handle_state&#8221; procedure is called when the popup menu is created (when a right click occurs within a tab). This procedure is responsible for determining the state of the menu item of normal (1) or disabled (0) as deemed appropriate by the plugin creator.</p>

<p>Example:</p>

<pre><code>proc foobar_root_popup_handle_state {} {  
 return $some_test_condition  
}
</code></pre>

<h2 id="dir_popup">dir_popup</h2>

<h4 id="description">Description</h4>

<p>The dir_popup plugin type allows the user to add a new menu command to the popup menu in the sidebar when any non-root directory is right-clicked. All root_popup plugins can optionally append any number of “_.submenu_” items to the menubar menu representing a cascading menu hierarchy within the menu that the command will be placed in. This allows the user to organize plugin menu items into groups, making the menu easier to find commands and easier to read/understand.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<pre><code>{dir_popup command hierarchy do_procname handle_state_procname}  
{dir_popup {checkbutton variable} hierarchy do_procname handle_state_procname}  
{dir_popup {radiobutton variable value} hierarchy do_procname handle_state_procname}  
{dir_popup separator hierarchy}
</code></pre>

<p>The “dir_popup command” type creates a menu command that, when clicked, runs the procedure called <em>do_procname</em>. The <em>hierarchy</em> value specifies the menu hierarchy (optional) and string text in the menu (joined with periods). The hierarchy will be created if it does not exist.</p>

<p>The “dir_popup checkbutton” type creates a menu command has an on/off state associated with it. When the menu item is clicked, the state of the menu item is inverted and the <em>do_procname</em> procedure is called. The <em>variable</em> argument is the name of a variable containing the current on/off value associated with the menu item. The <em>hierarchy</em> value specifies the menu hierarchy (optional) and string text in the menu (joined with periods). The hierarchy will be created if it does not exist.</p>

<p>The “dir_popup radiobutton” type creates a menu command that has an on/off state such that in a group of multiple menu items that share the same variable, only one is on at at time. When the menu item is clicked, the state of the menu item is set to on and the <em>do_procname</em> procedure is called. The <em>variable</em> argument is the name of a variable containing the menu item that is currently on. The <em>value</em> value specifies a unique identifier for this menu within the group. When the value of variable is set to value, this menu option will have the on state. The <em>hierarchy</em> value specifies the menu hierarchy (optional) and string text in the menu (joined with periods). The hierarchy will be created if it does not exist.</p>

<p>The “dir_popup separator” type creates a horizontal separator in the menu which is useful for organizing menu options. The <em>hierarchy</em> value, in this case, only refers to the menu hierarchy to add the separator to (menu separators don’t have text associated with them).</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The &#8220;do&#8221; Procedure</strong></p>

<p>The &#8220;do&#8221; procedure contains the code that will be executed when the user invokes the menu item in the menubar.</p>

<p>Example:</p>

<pre><code>proc foobar_dir_popup_do {} {  
 puts &quot;Foobar directory popup item has been clicked!&quot;  
}
</code></pre>

<p><strong>The &#8220;handle_state&#8221; Procedure</strong></p>

<p>The &#8220;handle_state&#8221; procedure is called when the popup menu is created (when a right click occurs within a tab). This procedure is responsible for determining the state of the menu item of normal (1) or disabled (0) as deemed appropriate by the plugin creator.</p>

<p>Example:</p>

<pre><code>proc foobar_dir_popup_handle_state {} {  
 return $some_test_condition  
}
</code></pre>

<h2 id="file_popup">file_popup</h2>

<h4 id="description">Description</h4>

<p>The file_popup plugin type allows the user to add a new menu command to the popup menu in the sidebar when any file is right-clicked. All file_popup plugins can optionally append any number of “_.submenu_” items to the menubar menu representing a cascading menu hierarchy within the menu that the command will be placed in. This allows the user to organize plugin menu items into groups, making the menu easier to find commands and easier to read/understand.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<pre><code>{file_popup command hierarchy do_procname handle_state_procname}  
{file_popup {checkbutton variable} hierarchy do_procname handle_state_procname}  
{file_popup {radiobutton variable value} hierarchy do_procname handle_state_procname}  
{file_popup separator hierarchy}
</code></pre>

<p>The “file_popup command” type creates a menu command that, when clicked, runs the procedure called <em>do_procname</em>. The <em>hierarchy</em> value specifies the menu hierarchy (optional) and string text in the menu (joined with periods). The hierarchy will be created if it does not exist.</p>

<p>The “file_popup checkbutton” type creates a menu command has an on/off state associated with it. When the menu item is clicked, the state of the menu item is inverted and the <em>do_procname</em> procedure is called. The <em>variable</em> argument is the name of a variable containing the current on/off value associated with the menu item. The <em>hierarchy</em> value specifies the menu hierarchy (optional) and string text in the menu (joined with periods). The hierarchy will be created if it does not exist.</p>

<p>The “file_popup radiobutton” type creates a menu command that has an on/off state such that in a group of multiple menu items that share the same variable, only one is on at at time. When the menu item is clicked, the state of the menu item is set to on and the <em>do_procname</em> procedure is called. The <em>variable</em> argument is the name of a variable containing the menu item that is currently on. The <em>value</em> value specifies a unique identifier for this menu within the group. When the value of variable is set to value, this menu option will have the on state. The <em>hierarchy</em> value specifies the menu hierarchy (optional) and string text in the menu (joined with periods). The hierarchy will be created if it does not exist.</p>

<p>The “file_popup separator” type creates a horizontal separator in the menu which is useful for organizing menu options. The <em>hierarchy</em> value, in this case, only refers to the menu hierarchy to add the separator to (menu separators don’t have text associated with them).</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The &#8220;do&#8221; Procedure</strong></p>

<p>The &#8220;do&#8221; procedure contains the code that will be executed when the user invokes the menu item in the menubar.</p>

<p>Example:</p>

<pre><code>proc foobar_file_popup_do {} {  
 puts &quot;Foobar file popup item has been clicked!&quot;  
}
</code></pre>

<p><strong>The &#8220;handle_state&#8221; Procedure</strong></p>

<p>The &#8220;handle_state&#8221; procedure is called when the popup menu is created (when a right click occurs within a tab). This procedure is responsible for determining the state of the menu item as normal (1) or disabled (0) as deemed appropriate by the plugin creator.</p>

<p>Example:</p>

<pre><code>proc foobar_file_popup_handle_state {} {  
 return $some_test_condition  
}
</code></pre>

<h2 id="text_binding">text_binding</h2>

<h4 id="description">Description</h4>

<p>The text_binding plugin action creates a unique bindtag to all of the text and Ctext pathnames in the entire UI based on the location and name suffix specified and calls a plugin provided procedure with the name of that binding. The procedure can then add whatever bindings are required on the given bindtag name. This allows a plugin to handle various keyboard, focus, configuration, mapping and mouse events that occur in any editor.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{text_binding location bindtag_suffix bind_type do_procedure}</code></p>

<p>The value of <em>location</em> is either the value “pretext” or “posttext”. If a value of “pretext” is specified, any bindings on the text widget will be called prior to the text/cursor being applied to the text widget. If a value of “posttext” is specified, any bindings on the text widget will be called after the text/cursor has been applied to the widget.</p>

<p>The value of <em>bindtag_suffix</em> is any unique name for the plugin (i.e., if the plugin specifies more than one text_binding action, each action must have a different value specified for <em>bindtag_suffix</em>).</p>

<p>The value of <em>bind_type</em> is either “all” or “only”. A value of all means that the text binding will be added to all text widgets in the window. A value of “only” means that the text binding will only be added to the text widgets that have a tag list containing the value of <em>bindtag_suffix</em> (see api::file::add_buffer or api::file::add_file procedure for details about the -tag option. Using a value of “only” can only be used if the same plugin adds a file/buffer of its own.</p>

<p>The value of <em>do_procedure</em> is the name of the procedure that is called when a text widget is adding bindtags and bindings to itself and the given bindtag name has not been previously created.</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The “do” Procedure</strong></p>

<p>The “do” procedure is called when the associated text bindtag is being initially created. The name of the associated bindtag created and applied by the plugin framework is passed to the procedure. The return value of the procedure is ignored. This procedure should only add various text bindings to associate functionality with different events that will occur on the text widgets.</p>

<p>The following example allows any changes to the cursor to invoke the procedure called “update_line”.</p>

<pre><code>namespace eval current_line {  
 proc do_cline {btag} {  
          bind $btag &lt;&lt;Modified&gt;&gt;    “after idle [list current_line::update_line %W]”  
          bind $btag &lt;ButtonPress-1&gt; “after idle [list current_line::update_line %W]”  
          bind $btag &lt;B1-Motion&gt;     “after idle [list current_line::update_line %W]”  
          bind $btag &lt;KeyPress&gt;      “after idle [list current_line::update_line %W]”  
 }
 proc update_line {txt} {  
          …
 }  
}

api::register current_line {  
 {text_binding pretext cline all current_line::do_cline}  
}
</code></pre>

<h2 id="on_start">on_start</h2>

<h4 id="description">Description</h4>

<p>The on_start plugin action is called when the application starts. More precisely, the following actions will take place prior to running procedures associated with this action type.</p>

<ul>
<li>Preferences are loaded</li>
<li>Plugins are loaded</li>
<li>Snippet contents are loaded</li>
<li>Clipboard history is loaded</li>
<li>Syntax highlighting information is loaded</li>
<li>User interface components are built (but not yet displayed to the user)</li>
</ul>

<p>At this point, any on_start action procedures are run. The following events occur after this occurs.</p>

<ul>
<li>Command-line files are added to the interface</li>
<li>Last session information is restored to the interface</li>
</ul>

<p>The action type allows plugins to initialize or make user interface modifications.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{on_start do_procname}</code></p>

<p>The value of <em>do_procname</em> is the name of the procedure to run when Tcl is started.</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The “do” Procedure</strong></p>

<p>The “do” procedure contains the code that will be executed when the application starts. It is passed no options and has no return value. You can perform any type of initialization within this procedure.</p>

<h2 id="on_open">on_open</h2>

<h4 id="description">Description</h4>

<p>The on_open plugin action is called after a new tab has been created and after the file associated with the tab has been read and added to the editor in the editor pane.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{on_open do_procname}</code></p>

<p>The <em>do_procname</em> is the name of the procedure that is called for this action type.</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The “do” Procedure</strong></p>

<p>The “do” procedure is called when the file has been added to the editor. The procedure takes a single argument, the file index of the added file. You can use this file index to get various pieces of information about the added file using the api::file::get_info API procedure. The return value is ignored.</p>

<p>The following example will display the full pathname of a file that was just added to the editor.</p>

<pre><code>proc foobar_do {file_index} {  
 set fname [api::file::get_info $file_index fname]  
 puts “File $fname was just opened”  
}
</code></pre>

<h2 id="on_focusin">on_focusin</h2>

<h4 id="description">Description</h4>

<p>The on_focusin action type is called whenever a text widget receives input focus (i.e., the text widget’s tab was selected, the file was viewed by clicking the filename in the sidebar, etc.)</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{on_focusin do_procname}</code></p>

<p>The <em>do_procname</em> procedure is called whenever focus is given to a text widget.</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The “do” Procedure</strong></p>

<p>The “do” procedure is called whenever focus is given to a text widget. It is passed a single argument, the file index of the file that was given focus. This value can be used to get information about the file. The return value is ignored.</p>

<p>The following example displays the read-only status of the currently selected file.</p>

<pre><code>proc focus_do {file_index} {  
  if {[api::file::get_info $file_index readonly]} {  
          puts “Selected file is readonly”  
  } else {  
          puts “Selected file is read/write”  
  }
}
</code></pre>

<h2 id="on_close">on_close</h2>

<h4 id="description">Description</h4>

<p>The on_update plugin type allows the user to add an action to take whenever the contents of an editor is automatically updated by the application. This event is triggered when a file that is loaded into the editor is updated outside of the editor and focus is given back to the editor. If the file content within the editor is not in the modified state, TKE will automatically load the new file content and trigger this event. If the file content is in the modified state, a popup window will be presented to the user, letting them know that the file content has changed and asking them if they would like to accept the update or ignore it. If the user accepts the update request, the file content will be updated and this event will be triggered.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{on_update do_procname}</code></p>

<p>The value of <em>do_procname</em> is the name of the procedure that will be called after the file content has been updated in the editor.</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The “do” Procedure</strong></p>

<p>The “do” procedure is called after a file is updated in the UI. It is passed a single argument, the file index of the file being closed. This argument value can be used to get information about the associated file. The return value is ignored.</p>

<p>The following example displays the name of the file that was updated.</p>

<pre><code>proc foobar_do {file_index} {  
 set fname [api::file::get_info $file_index fname]  
 puts “File $fname has been updated”  
}
</code></pre>

<h2 id="on_quit">on_quit</h2>

<h4 id="description">Description</h4>

<p>The on_quit plugin type allows the user to add an action to take just before the tkdv session is quit. This can be used to perform file cleanup or other types of cleanup.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{on_quit do_procname}</code></p>

<p>The value of <em>do_procname</em> is the name of the procedure that will be called prior to the application quitting.</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The &#8220;do&#8221; Procedure</strong></p>

<p>The &#8220;do&#8221; procedure contains the code that will be executed when the tkdv session is quit.</p>

<p>Example:</p>

<pre><code>proc foobar_on_quit_do {} {  
 file delete -force foobar.txt  
}
</code></pre>

<h2 id="on_reload">on_reload</h2>

<h4 id="description">Description</h4>

<p>The on_reload plugin type allows the user to store/restore internal data when the user performs a plugin reload operation. In the event that a plugin is reloaded, any internal data structures/state will be lost when the plugin is reloaded (re-sourced). The plugin may choose to store any internal data/state to non-corruptible memory within the plugin architecture just prior to the plugin being resourced and then restore that memory back into the plugin after it has been re-sourced.<br/>
Tcl Registration</p>

<p><code>{on_reload store_procname restore_procname}</code><br/>
The value of <em>store_procname</em> is the name of a procedure which will be called just prior to the reload operation taking place. The value of <em>restore_procname</em> is the name of a procedure which will be called after the reload operation has occurred.</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The &#8220;store&#8221; Procedure</strong></p>

<p>The &#8220;store&#8221; procedure contains code that saves any necessary internal data/state to non-corruptible memory. It is called just prior to the plugin being re-sourced by the plugin architecture. The TKE API contains a procedure that can be called to safely store a variable along with its value such that the variable name and value can be restored properly.</p>

<p>Example:</p>

<pre><code>proc foobar_on_reload_store {index} {  
  variable some_data  
  # Save the value of some_data to non-corruptible memory  
  api::plugin::save_variable $index &quot;some_data&quot; $some_data  
  # Save the geometry of a plugin window if it exists  
  if {[winfo exists .mywindow]} {  
     api::plugin::save_variable $index &quot;mywindow_geometry&quot; [winfo geometry .mywindow]  
     destroy .mywindow  
  }
}
</code></pre>

<p>In this example, we have a local namespace variable called &#8220;some_data&#8221; that contains some information that we want to preserve during a plugin reload. The example uses a user-available procedure within the plugin architecture called “api::plugin::save_variable” which takes three arguments: the unique identifier for the plugin (which is the value of the parameter called “index&#8220;), the string name of the value that we want to save, and the value to save. Note that the value must be given in a &#8221;pass by value&quot; format. The example also saves the geometry of a plugin window if it currently exists.</p>

<p><strong>The &#8220;restore&#8221; Procedure</strong></p>

<p>The &#8220;restore&#8221; procedure contains code that restores any previously saved information from the &#8220;store&#8221; procedure from non-corruptible memory back to the plugin memory. It is called immediately after the plugin has been re-sourced.</p>

<p>Example:</p>

<pre><code>proc foobar_on_reload_restore {index} {  
  variable some_data  
  # Retrieve the value of some_data and save it to the  
  # internal variable  
  set some_data [api::plugin::load_variable $index &quot;some_data&quot;]  
  # Get the plugin window dimensions if it previously existed  
   set geometry [api::plugin::load_variable $index “mywindow_geometry”]  
   if {$geometry ne &quot;&quot;} {  
      create_mywindow  
      wm geometry .mywindow $geometry  
   }
}
</code></pre>

<p>In this example, we restore the value of some_data by calling the plugin architecture&#8217;s built-in “api::plugin::load_variable” procedure which takes two parameters (the unique index value for the plugin and the name of the variable that was previously stored) and returns the stored value (the procedure also removes the stored data from its internal memory). If the index/name combination was not previously stored, a value of empty string is returned. The example also checks to see if the mywindow geometry was saved. It it was it means that the window previously existed, so the restore will recreate the window (with an internal procedure called &#8220;create_mywindow&#8221; in this case) and the sets the geometry of the window to the saved value.</p>

<h2 id="on_save">on_save</h2>

<h4 id="description">Description</h4>

<p>The on_save action calls a procedure when a file is saved in the editor pane. Specifically, the action is called after the file is given a save name (the “fname” attribute of the file will be set) but before the file is actually written to the save file.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{on_save do_procname}</code></p>

<p>The <em>do_procname</em> value is a procedure that is called when this event occurs.</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The “do” Procedure</strong></p>

<p>The “do” procedure is called when this event occurs. It is passed a single parameter value, the file index of the file being save. This value can be used in calls to the api::file::get_info to get information about the saved file. The return value is ignored.</p>

<p>The following example displays the name of the file being saved.</p>

<pre><code>proc foobar_do {file_index} {  
  set fname [api::file::get_info $file_index fname]  
  puts “File $fname is being saved”  
}
</code></pre>

<h2 id="on_uninstall">on_uninstall</h2>

<h4 id="description">Description</h4>

<p>The on_uninstall action calls a procedure when the associated plugin is uninstalled by the user. Because uninstalling does not cause the application to quit (i.e., the UI remains in view), this plugin action allows the plugin writer to cleanup the UI that might have been affected by this plugin.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{on_uninstall do_procname}</code></p>

<p>The <em>do_procname</em> value is a procedure that is called when this event occurs.</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The “do” Procedure</strong></p>

<p>The “do” procedure is called when this event occurs. No arguments are passed and the return value is ignored by the calling code. The body of this procedure should only be used to clean up any UI changes that this plugin may have previously made.</p>

<p>The following example removes a text tag called “foobar” that was previously added.</p>

<pre><code>proc foobar_do {} {  
  variable txt  
  $txt tag delete foobar  
}
</code></pre>

<h2 id="on_rename">on_rename</h2>

<h4 id="description">Description</h4>

<p>The on_rename action calls a procedure when a file or directory is renamed within the sidebar. Specifically, this procedure will be called just prior to the rename being performed to allow the plugin to take any necessary actions on the given file/directory.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{on_rename do_procname}</code></p>

<p>The <em>do_procname</em> value is a procedure that is called when this event occurs.</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The “do” Procedure</strong></p>

<p>The “do” procedure is called when this event occurs. Two arguments are passed. The first parameter is the full original pathname. The second parameter is the full new pathname. The return value is ignored.</p>

<p>The following example displays the original and new filenames.</p>

<pre><code>proc foobar_do {old_name new_name} {  
  puts “File $old_name has been renamed to $new_name”  
}
</code></pre>

<h2 id="on_duplicate">on_duplicate</h2>

<h4 id="description">Description</h4>

<p>The on_duplicate action calls a procedure immediately after a file or directory is duplicated within the sidebar.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{on_duplicate do_procname}</code></p>

<p>The <em>do_procname</em> value is a procedure that is called when this event occurs.</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The “do” Procedure</strong></p>

<p>The “do” procedure is called when this event occurs. Two arguments are passed. The first parameter is the full original pathname. The second parameter is the full pathname of the duplicated file. The return value is ignored.</p>

<p>The following example displays the new filename.</p>

<pre><code>proc foobar_do {orig_name new_name} {  
  puts “File $orig_name has been duplicated ($new_name)”  
}
</code></pre>

<h2 id="on_delete">on_delete</h2>

<h4 id="description">Description</h4>

<p>The on_delete action calls a procedure just before a file is deleted from the file system within the sidebar.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{on_delete do_procname}</code></p>

<p>The <em>do_procname</em> value is a procedure that is called when this event occurs.</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The “do” Procedure</strong></p>

<p>The “do” procedure is called when this event occurs. One parameter is passed — the full pathname of the file being deleted. The return value is ignored.</p>

<p>The following example displays the deleted filename.</p>

<pre><code>proc foobar_do {name} {  
  puts “File $name is deleted”  
}
</code></pre>

<h2 id="on_trash">on_trash</h2>

<h4 id="description">Description</h4>

<p>The on_trash action calls a procedure that is called prior to moving a file/folder to the trash.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{on_trash do_procname}</code></p>

<p>The <em>do_procname</em> value is a procedure that is called when this event occurs.</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The “do” Procedure</strong></p>

<p>The “do” procedure is called when this event occurs. One parameter is passed — the full pathname of the file being moved to the trash. The return value is ignored.</p>

<p>The following example displays the trashed filename.</p>

<pre><code>proc foobar_do {name} {  
  puts “File $name is being moved to the trash”  
}
</code></pre>

<h2 id="syntax">syntax</h2>

<h4 id="description">Description</h4>

<p>The syntax action specifies the name of a .syntax file that will be added to the list of available syntax highlighters in the UI.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{syntax filename}</code></p>

<p>The syntax filename must be located in the same directory as the main.tcl plugin file and it must contain the .syntax extension. The base name of the syntax file will be the name displayed in the UI. For a description of the contents of this file, please refer to the syntax file chapter of this document.</p>

<h2 id="vcs">vcs</h2>

<h4 id="description">Description</h4>

<p>The vcs action allows a plugin to provide the functionality required to create a new version control system handler for the TKE difference view. When a vcs action is created, the action’s name will appear in the version control list within a difference view, and that version control system will be checked to see if it manages an opened file when a difference view is requested.</p>

<p>This action allows a plugin to extend the supported version control systems available.</p>

<p>If your plugin contains the vcs action, you will need to request permission from the user to run your plugin as vcs plugin actions will be given filenames and will be required to run shell commands to perform necessary action.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{vcs name handles versions get_file_cmd get_diff_cmd find_version get_version_log}</code></p>

<p>The <em>name</em> option specifies the Version Control system name that will be displayed in the difference viewer version control list. The name does not need to match the version control system; however, it is preferred that the name does match to avoid user confusion.</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The “handles” Procedure</strong></p>

<p>The “handles” procedure is given the full pathname of a file and must return a boolean value of true if the version control system is managing this file; otherwise, it must return a value of false. This procedure should be written in a performance optimized manner as it will be called after the user requests to view a file’s difference view and before the file difference is viewed.</p>

<p>The following example is from the vcs_example plugin which represents how a Mercurial plugin would operate.</p>

<pre><code>proc handles {fname} {  
  return [expr {![catch hg status $fname]}]  
}
</code></pre>

<p><strong>The “versions” Procedure</strong></p>

<p>The “versions” procedure will return a Tcl list containing the version identifiers that are associated with the filename that is passed to the procedure.</p>

<pre><code>proc versions {fname} {  
   set versions [list]  
   if {![catch { exec hg log $fname } rc]} {  
       foreach line [split $rc \n] {  
           if {[regexp {changeset:\s+(\d+):} $line -&gt; version]} {  
               lappend versions $version  
           }
       }  
   }
   return $versions  
}
</code></pre>

<p><strong>The “get_file_cmd” Procedure</strong></p>

<p>Given the specified filename and version identifier, returns the command to execute which will return the full contents of the given version of the given filename.</p>

<pre><code>proc get_file_cmd {fname version} {  
  return “|hg cat -r $version $fname”  
}
</code></pre>

<p><strong>The “get_diff_cmd” Procedure</strong></p>

<p>Given the specified filename and two versions, return the difference command that will output a unified difference between the two versions of the given file. The value of the v2 parameter can be a value of “Current” which should be interpreted as the version of the file that is currently being edited.</p>

<pre><code>proc get_diff_cmd {fname v1 v2} {  
  if {$v2 eq “Current”} {  
     return “hg diff -r $v1 $fname”  
  } else {  
     return “hg diff -r $v1 -r $v2 $fname”  
  }
}
</code></pre>

<p><strong>The “find_version” Procedure</strong></p>

<p>The “find_version” procedure will return the file version that contained the last change to the specified line number which is no later than the given version number. Keep in mind that the value of the v2 input parameter may be a value of “Current” which should be interpreted to be the version of the file that is currently being edited. If the change could not be found, return an empty string.</p>

<pre><code>proc find_version {fname v2 linenum} {  
  if {$v2 eq “Current”} {  
     if {![catch { exec hg annotate $fname } rc]} {  
        if {[regexp {^\s*(\d+):} [lindex [split $rc \n] [expr $linenum-1]] -&gt; version]} {  
           return $version  
        }
     }  
  } else {  
     if {![catch { exec hg annotate -r $v2 $fname } rc]} {  
        if {[regexp {^\s*(\d+):} [lindex [split $rc \n] [expr $linenum-1]] -&gt; version]} {  
           return $version  
        }
     }  
  }
  return “”  
}
</code></pre>

<p><strong>The “get_version_log” Procedure</strong></p>

<p>The “get_version_log” procedure returns the change descriptions for the specified version of the specified filename. If no change description could be found, return the empty string.</p>

<pre><code>proc get_version_log {fname version} {  
  if {![catch { exec hg log -r $version $fname } rc]} {  
     return $rc  
  }
  return “”  
}
</code></pre>

<h2 id="on_pref_load">on_pref_load</h2>

<h4 id="description">Description</h4>

<p>The on_pref_load action is called shortly after the plugin is loaded/reloaded. The purpose of this action is to get a name/value list of preferences that are needed by the plugin. Preference values are stored in the same manner as TKE’s internal preferences, allowing the user to set options that are remembered between application invocations. These items are also changed within the TKE preference window within the Plugins category.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{on_pref_load do_procedure}</code></p>

<p>The <em>do_procedure</em> is a Tcl procedure that will be called when TKE needs to get the preference values from the plugin.</p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The “do” Procedure</strong></p>

<p>The “do” procedure must return a valid Tcl list which contains pairs of name and default value values (thus it must contain an even number of elements). The following example creates two preference values and specifies that their default values should be 0 and “red”:</p>

<pre><code>proc do_pref_load {} {  
  return {  
     Enable 0  
     Color  “red”  
  }
}
</code></pre>

<h2 id="do_pref_ui">do_pref_ui</h2>

<h4 id="description">Description</h4>

<p>The “do_pref_ui” action is called when the preferences window needs to build the preference panel for the plugin. The procedure called by this action is responsible for generating the plugin’s preference UI which is primarily performed using the api::preferences::widget and container widgets such as ttk::frame, ttk::labelframe, ttk::panedwindow and ttk::notebook.</p>

<h4 id="tclregistration">Tcl Registration</h4>

<p><code>{do_pref_ui do_procedure}</code></p>

<h4 id="tclprocedures">Tcl Procedures</h4>

<p><strong>The “do” Procedure</strong></p>

<p>This procedure is responsible for creating and arranging the various GUI widgets that control the layout of the plugin’s preferences panel. The following is a representation of what the body of the procedure might look like:</p>

<pre><code>proc do_pref_ui {w} {  
  api::preferences::widget checkbutton $w &quot;Enable&quot; &quot;Enables this plugin”  
  api::preferences::widget spacer $w  
  pack [ttk::labelframe $w.lf -text &quot;Color&quot;] -fill x  
  api::preferences::widget radiobutton $w.lf &quot;Color&quot; &quot;red&quot; -value “red”  
  api::preferences::widget radiobutton $w.lf &quot;Color&quot; &quot;white&quot; -value “white”  
  api::preferences::widget radiobutton $w.lf &quot;Color&quot; &quot;blue&quot; -value “blue”  
}
</code></pre>

<p>This plugin creates a check button which allows the “Enable” preference item to be set. It also adds three radio buttons which allow the user to select one of three colors to set the “Color” preference item. The three radio buttons are placed into a ttk::labelframe container widget. Between the check button and the radio buttons is vertical space. This code will result in a preference panel that will look something like the following:</p>

<figure>
<img src="data:image/png;base64,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" alt="" />
</figure>

<p>If the do_pref_ui procedure creates any widgets outside of those provided for in the api::preferences::widget API procedure, it is the responsibility of the do_pref_ui procedure to handle packing. All widgets created with the api::preferences::widget API procedure will pack themselves in the order they are created, using either pack (default) or grid (using the -grid 1 option to api::preferences::widget). See the api::preferences::widget description for a full explanation of the available widgets that can be created with that procedure.</p>

<h1 id="pluginapi">Plugin API</h1>

<h2 id="api::tke_development">api::tke_development</h2>

<p>Specifies if the application is being run in development mode or normal user mode. This can be useful if your plugin is meant to be used for TKE development purposes only.</p>

<p><strong>Call structure</strong></p>

<p><code>api::tke_development</code></p>

<p><strong>Return value</strong></p>

<p>Returns a value of 1 if the application is being run in development mode; otherwise, returns a value of 0.</p>

<h2 id="api::get_plugin_directory">api::get_plugin_directory</h2>

<p>Returns the full pathname of the TKE installation directory.</p>

<p><strong>Call structure</strong></p>

<p><code>api::get_plugin_directory</code></p>

<p><strong>Return value</strong></p>

<p>Returns the full pathname of the TKE plugin installation directory for the calling plugin.</p>

<h2 id="api::get_images_directory">api::get_images_directory</h2>

<p>Returns the full pathname to the directory which contains all of the plugin images used by TKE in the installation directory.</p>

<p><strong>Call structure</strong></p>

<p><code>api::get_images_directory</code></p>

<p><strong>Return value</strong></p>

<p>Returns the full pathname to the directory which contains all of the plugin images used by TKE in the installation directory.</p>

<h2 id="api::get_home_directory">api::get_home_directory</h2>

<p>This procedure returns the full pathname to the plugin-specific home directory. If the directory does not currently exist, it will be automatically created when this procedure is called. The plugin-specific home directory exists in the user’s TKE home directory under ~/.tke/plugins/name_of_plugin. This directory will be unique for each plugin so you may store any plugin-specific files in this directory.</p>

<p><strong>Call structure</strong></p>

<p><code>api::get_home_directory</code></p>

<p><strong>Return value</strong></p>

<p>Returns the full pathname to the plugin-specific home directory.</p>

<h2 id="api::normalize_filename">api::normalize_filename</h2>

<p>Takes a NFS-attached host where the file resides along with the pathname on that host where the file resides and returns the normalized filename to access the file on the current host.</p>

<p><strong>Call structure</strong></p>

<p><code>api::normalize_filename host filename</code></p>

<p><strong>Return value</strong></p>

<p>Returns the normalized pathname of the given file relative to the current host machine.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">host</td>
	<td style="text-align:left;">Name of host server where the file actually resides.</td>
</tr>
<tr>
	<td style="text-align:left;">filename</td>
	<td style="text-align:left;">Name of file on the host server.</td>
</tr>
</tbody>
</table>

<h2 id="api::register_launcher">api::register_launcher</h2>

<p>Registers a plugin command with the TKE command launcher. Once a command is registered, the user can invoke the command from the command launcher by entering a portion of the description string that is passed via this command.</p>

<p><strong>Call structure</strong></p>

<p><code>api::register_launcher description command</code></p>

<p><strong>Return value</strong></p>

<p>None</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">description</td>
	<td style="text-align:left;">String that is displayed in the command launcher matched results. This is also the string that is used to match against.</td>
</tr>
<tr>
	<td style="text-align:left;">command</td>
	<td style="text-align:left;">Command to run when this entry is executed via the command launcher.</td>
</tr>
</tbody>
</table>

<h2 id="api::unregister_launcher">api::unregister_launcher</h2>

<p>Unregisters a previously registered command from the command launcher.</p>

<p><strong>Call structure</strong></p>

<p><code>api::unregister_launcher description</code></p>

<p><strong>Return value</strong></p>

<p>None</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">description</td>
	<td style="text-align:left;">The initial description string that was passed to the api::register_launcher command.</td>
</tr>
</tbody>
</table>

<h2 id="api::invoke_menu">api::invoke_menu</h2>

<p>Invokes the functionality associated with a menu item. This allows plugins to perform “workflows”. The menu hierarchy is defined by taking the names of all menus in the hierarchy (case is important) and joining them with the “/“ character. Therefore, to invoke the File -&gt; Format Text -&gt; All command, you would pass the following:</p>

<p><code>api::invoke_menu “File/Format Text/All”</code></p>

<p><strong>Call structure</strong></p>

<p><code>api::invoke_menu menu_hierarchy_path</code></p>

<p><strong>Return value</strong></p>

<p>None. Returns an error if the given menu hierarchy string cannot be found.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">menu_hierarchy_path</td>
	<td style="text-align:left;">String representing the hierarchical menu path to the menu command to execute. Each portion of the menu path must match the menu exactly and all menu portions must be joined by the “/“ character.</td>
</tr>
</tbody>
</table>

<h2 id="api::log">api::log</h2>

<p>Displays a logging message to standard output. This is useful for debugging plugin issues.</p>

<p><strong>Call structure</strong></p>

<p><code>api::log message</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">message</td>
	<td style="text-align:left;">Message to display to standard output.</td>
</tr>
</tbody>
</table>

<h2 id="api::show_info">api::show_info</h2>

<p>Takes a user message and a delay time and displays the message in the bottom status bar which will automatically clear from the status bar after the specified period of time has elapsed. This is useful for communicating status information to the user, but should not be used to indicate error information (the api::show_error procedure should be used for this purpose).</p>

<p><strong>Call structure</strong></p>

<p><code>api::show_info message ?clear_delay?</code></p>

<p><strong>Return value</strong></p>

<p>None</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">message</td>
	<td style="text-align:left;">Message to display to user. It is important that no newline characters are present in this message and that the message is no more than 100 or so characters in length.</td>
</tr>
<tr>
	<td style="text-align:left;">clear_delay</td>
	<td style="text-align:left;">Optional value. Allows for the message to be cleared in “clear_delay” milliseconds. By default, this value is set to 3000 milliseconds (i.e., 3 seconds).</td>
</tr>
</tbody>
</table>

<h2 id="api::show_error">api::show_error</h2>

<p>Takes a user message and optional detail information and displays the message in a popover window. This window is the standard error window used by TKE internal code and, therefore, is the recommended way to display error information to the user.</p>

<p><strong>Call Structure</strong></p>

<p><code>api::show_error message ?detail?</code></p>

<p><strong>Return value</strong></p>

<p>None</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">message</td>
	<td style="text-align:left;">Short error message.</td>
</tr>
<tr>
	<td style="text-align:left;">detail</td>
	<td style="text-align:left;">Optional. Detailed error description.</td>
</tr>
</tbody>
</table>

<h2 id="api::get_user_input">api::get_user_input</h2>

<p>Displays a prompt message and an entry field, placing the cursor into the entry field for immediate text entry. Once a value has been input, the value will be assigned to the variable passed to this procedure. Allows the plugin to get user input.</p>

<p><strong>Call structure</strong></p>

<p><code>api::get_user_input message variable ?allow_vars?</code></p>

<p><strong>Return value</strong></p>

<p>Returns a value of 1 if the user hit the RETURN key in the text entry field to indicate that a value was obtained by the user and stored in the provided variable. Returns a value of 0 if the user hit the ESCAPE key or clicked on the close button to indicate that the value of variable was not set and should not be used. </p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">message</td>
	<td style="text-align:left;">Message to prompt user for input (should be short and not contain any newline characters).</td>
</tr>
<tr>
	<td style="text-align:left;">variable</td>
	<td style="text-align:left;">Name of variable to store the user-supplied response in. If a value of 1 is returned, the contents in the variable is valid; otherwise, a return value 0 indicates the contents in the variable is not valid.</td>
</tr>
<tr>
	<td style="text-align:left;">allow_vars</td>
	<td style="text-align:left;">Optional. If set to 1, any environment variables specified in the user string will have value substitution performed and the resulting string will be stored in the variable parameter. If set to 0, no substitutions will be performed. By default, substitution is performed.</td>
</tr>
</tbody>
</table>

<p><strong>Example</strong></p>

<pre><code>set filename “”  
if {[api::get_user_input “Filename:” filename 1]} {  
  puts “File $filename was given”  
} else {  
  puts “No filename specified”  
}
</code></pre>

<h2 id="api::reset_txt_focus">api::reset_txt_focus</h2>

<p>Causes the keyboard focus to be set back to the last editing buffer that received focus. If the textwidget parameter is specified, TKE will give the provided text widget</p>

<p><strong>Call structure</strong></p>

<p><code>api::reset_text_focus ?textwidget?</code></p>

<p><strong>Return value</strong></p>

<p>None. </p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">textwidget</td>
	<td style="text-align:left;">Optional parameter that, if specified, causes the specified text widget to receive the keyboard focus. If this option is not specified, the procedure will set the keyboard focus to the editing buffer that last received keyboard focus.</td>
</tr>
</tbody>
</table>

<h2 id="api::file::current_file_index">api::file::current_file_index</h2>

<p>Returns a unique index to the currently displayed file in the editor. This index can be used for getting information about the file.</p>

<p><strong>Call structure</strong></p>

<p><code>api::file::current_file_index</code></p>

<p><strong>Return value</strong></p>

<p>Returns a unique index to the currently displayed file in the editor panel.</p>

<h2 id="api::file::get_info">api::file::get_info</h2>

<p>Returns information about the file specified by the given index based on the attribute that this passed.</p>

<p><strong>Call structure</strong></p>

<p><code>api::file::get_info file_index attribute</code></p>

<p><strong>Return value</strong></p>

<p>Returns the attribute value for the given file. If an invalid <em>file_index</em> is specified or an invalid attribute is specified, an error will be thrown.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">file_index</td>
	<td style="text-align:left;">Unique identifier for a file as returned by the get_current_index procedure.</td>
</tr>
<tr>
	<td style="text-align:left;">attribute</td>
	<td style="text-align:left;">Specifies the type of information to return. See the attribute table below for the list of valid values.</td>
</tr>
</tbody>
</table>

<p><strong>Attributes</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Attribute</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">fname</td>
	<td style="text-align:left;">Normalized file name.</td>
</tr>
<tr>
	<td style="text-align:left;">mtime</td>
	<td style="text-align:left;">Last modification timestamp.</td>
</tr>
<tr>
	<td style="text-align:left;">lock</td>
	<td style="text-align:left;">Specifies the current lock status of the file.</td>
</tr>
<tr>
	<td style="text-align:left;">readonly</td>
	<td style="text-align:left;">Specifies if the file is readonly.</td>
</tr>
<tr>
	<td style="text-align:left;">modified</td>
	<td style="text-align:left;">Specifies if the file has been modified since the last save.</td>
</tr>
<tr>
	<td style="text-align:left;">sb_index</td>
	<td style="text-align:left;">Specifies the index of the file in the sidebar.</td>
</tr>
<tr>
	<td style="text-align:left;">txt</td>
	<td style="text-align:left;">Returns the pathname of the text widget associated with the file_index.</td>
</tr>
<tr>
	<td style="text-align:left;">current</td>
	<td style="text-align:left;">Returns a boolean value of true if the file is the current one being edited.</td>
</tr>
<tr>
	<td style="text-align:left;">vimmode</td>
	<td style="text-align:left;">Returns a boolean value of true if the editor is in “Vim mode” (i.e., any Vim mode that is not insert/edit mode).</td>
</tr>
<tr>
	<td style="text-align:left;">lang</td>
	<td style="text-align:left;">Returns the name of the syntax language associated with the given file.</td>
</tr>
</tbody>
</table>

<h2 id="api::file::add_buffer">api::file::add_buffer</h2>

<p>Adds a new tab to the editor which is a blank editing buffer (no file is associated with the contents of the editing buffer).</p>

<p><strong>Call structure</strong></p>

<p><code>api::file::add_buffer name save_command ?options?</code></p>

<p><strong>Return value</strong></p>

<p>Returns the pathname of the created ctext widget.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">name</td>
	<td style="text-align:left;">Title of editor tab.</td>
</tr>
<tr>
	<td style="text-align:left;">save_command</td>
	<td style="text-align:left;">Command to run when the user attempts to save the contents of the buffer. If the save command returns a value of 1, TKE will prompt the user for a filename and the contents will be saved to the specified file. From that point on, the editing buffer will transition to a normal file and the save command will no longer be invoked on future saves. If the save command returns a value of 1, the save_command will continue to be used for future saves.</td>
</tr>
<tr>
	<td style="text-align:left;">options</td>
	<td style="text-align:left;">Optional arguments passed to the newly added tab. See the list of valid options in the table below.</td>
</tr>
</tbody>
</table>

<p><strong>Options</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Option</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">-lock <em>boolean</em></td>
	<td style="text-align:left;">Initial value of the lock setting of the buffer (the user does have permission to unlock the file).</td>
</tr>
<tr>
	<td style="text-align:left;">-readonly <em>boolean</em></td>
	<td style="text-align:left;">Specifies if the buffer will be editable by the user.</td>
</tr>
<tr>
	<td style="text-align:left;">-gutters <em>gutter_list</em></td>
	<td style="text-align:left;">Creates one or more gutters in the editor (one character wide vertical strip to the left of the line number gutter which allows additional information/functionality to be provided for each line in the editor). See the gutter_list description below for additional details about the structure of this option.</td>
</tr>
<tr>
	<td style="text-align:left;">-other <em>boolean</em></td>
	<td style="text-align:left;">Specifies if the buffer should be added to pane that does not currently have the focus.</td>
</tr>
<tr>
	<td style="text-align:left;">-tags <em>tags</em></td>
	<td style="text-align:left;">Specifies a list of text bindings that can only be associated with this tab.</td>
</tr>
<tr>
	<td style="text-align:left;">-lang <em>language</em></td>
	<td style="text-align:left;">Specifies the initial syntax highlighting language to use for highlighting the buffer.</td>
</tr>
<tr>
	<td style="text-align:left;">-background <em>boolean</em></td>
	<td style="text-align:left;">If true, causes the added buffer tab to be created but not made the current editing buffer; otherwise, if false, the tab will be made the current tab.</td>
</tr>
</tbody>
</table>

<h2 id="api::file::add_file">api::file::add_file</h2>

<p>Adds a new tab to the editor. If a filename is specified, the contents of the file are added to the editor. If no filename is specified, the new tab file will be blanked and named “Untitled”.</p>

<p><strong>Call structure</strong></p>

<p><code>api::file::add_file ?filename? ?options?</code></p>

<p><strong>Return value</strong></p>

<p>Returns the pathname of the created ctext widget.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">filename</td>
	<td style="text-align:left;">Optional. If specified, opens the given file in the added tab.</td>
</tr>
<tr>
	<td style="text-align:left;">options</td>
	<td style="text-align:left;">Optional arguments passed to the newly created tab. See the table below for a list of valid values.</td>
</tr>
</tbody>
</table>

<p><strong>Options</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Option</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">-savecommand <em>command</em></td>
	<td style="text-align:left;">Specifies the name of a command to execute after the file is saved.</td>
</tr>
<tr>
	<td style="text-align:left;">-lock <em>boolean</em></td>
	<td style="text-align:left;">If set to 0, the file will begin in the unlocked state (i.e., file is editable); otherwise, the file will begin in the locked state.</td>
</tr>
<tr>
	<td style="text-align:left;">-readonly <em>boolean</em></td>
	<td style="text-align:left;">If set to 1, the file will be considered readonly (file will be indefinitely locked); otherwise, the file will be editable.</td>
</tr>
<tr>
	<td style="text-align:left;">-sidebar <em>boolean</em></td>
	<td style="text-align:left;">If set to 1 (default), the file’s directory contents will be included in the sidebar; otherwise, the file’s directory components will not be added to the sidebar.</td>
</tr>
<tr>
	<td style="text-align:left;">-diff <em>boolean</em></td>
	<td style="text-align:left;">If set to 0 (default), the file will be added as an editable file; however, if set to 1, the file will be inserted as a difference viewer, allowing the user to view file differences visually within the editor.</td>
</tr>
<tr>
	<td style="text-align:left;">-gutters gutter_list</td>
	<td style="text-align:left;">Creates one or more gutters in the editor (one character wide vertical strip to the left of the line number gutter which allows additional information/functionality to be provided for each line in the editor). See the gutter_list description below for additional details about the structure of this option.</td>
</tr>
<tr>
	<td style="text-align:left;">-other <em>boolean</em></td>
	<td style="text-align:left;">If set to 0 (default), the file will be added to the current pane; however, if set to 1, the file will be added to the other pane (the other pane will be created if it currently does not exist).</td>
</tr>
<tr>
	<td style="text-align:left;">-tags <em>tags</em></td>
	<td style="text-align:left;">Specifies a list of text bindings that can only be associated with this tab.</td>
</tr>
<tr>
	<td style="text-align:left;">-name <em>filename</em></td>
	<td style="text-align:left;">If this option is specified when the filename is not specified, it will add a new tab to the editor whose name matches the given name. If the user saves the file, the contents will be saved to disk with the given file name. The given filename does not need to exist prior to calling this procedure.</td>
</tr>
</tbody>
</table>

<h2 id="api::sidebar::get_selected_indices">api::sidebar::get_selected_indices</h2>

<p>Returns the index of the currently selected files/directories in the sidebar. This value is useful for future calls to the api::sidebar::get_info procedure.</p>

<p><strong>Call structure</strong></p>

<p><code>api::sidebar::get_selected_indices</code></p>

<p><strong>Return value</strong></p>

<p>A list of integer values specifying the indices of the currently selected files/directories in the sidebar. An empty list will be returned if no file/directory is currently selected.</p>

<p><strong>Parameters</strong></p>

<p>None.</p>

<h2 id="api::sidebar::get_info">api::sidebar::get_info</h2>

<p>Returns information for the sidebar file/directory at the given index.</p>

<p><strong>Call structure</strong></p>

<p><code>api::sidebar::get_info sb_index attribute</code></p>

<p><strong>Return value</strong></p>

<p>Returns the value associated with the given index/attribute. If the specified index is not a valid<br/>
index value for the sidebar, an empty string will be returned.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">sb_index</td>
	<td style="text-align:left;">Index of file/directory in the sidebar. Calling api::sidebar::get_current_index will provide the currently selected element in the sidebar.</td>
</tr>
<tr>
	<td style="text-align:left;">attribute</td>
	<td style="text-align:left;">Specifies the type of information to obtain for the given index. See the list of valid values in the table below.</td>
</tr>
</tbody>
</table>

<p><strong>Attributes</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Attribute</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">fname</td>
	<td style="text-align:left;">Normalized filename.</td>
</tr>
<tr>
	<td style="text-align:left;">file_index</td>
	<td style="text-align:left;">The file index of the file. This value can be used in the api::file::get_info API call to get other information about the file.</td>
</tr>
</tbody>
</table>

<h2 id="api::plugin::save_variable">api::plugin::save_variable</h2>

<p>Saves the value of the given variable name to non-corruptible memory so that it can be later retrieved when the plugin is reloaded.</p>

<p><strong>Call structure</strong></p>

<p><code>api::plugin::save_variable index name value</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">index</td>
	<td style="text-align:left;">Unique index provided by the plugin framework (passed to the writeplugin action command).</td>
</tr>
<tr>
	<td style="text-align:left;">name</td>
	<td style="text-align:left;">Name of a variable to save.</td>
</tr>
<tr>
	<td style="text-align:left;">value</td>
	<td style="text-align:left;">Value of a variable to save.</td>
</tr>
</tbody>
</table>

<h2 id="api::plugin::load_variable">api::plugin::load_variable</h2>

<p>Retrieves the value of the named variable from non-corruptible memory (from a previous save_variable call).</p>

<p><strong>Call structure</strong></p>

<p><code>api::plugin::load_variable index name</code></p>

<p><strong>Return value</strong></p>

<p>Returns the saved value of the given variable. If the given variable name does not exist, an empty string will be returned.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">index</td>
	<td style="text-align:left;">Unique index provided by the plugin framework (passed to the readplugin action command).</td>
</tr>
<tr>
	<td style="text-align:left;">name</td>
	<td style="text-align:left;">Name of a variable to retrieve the value for.</td>
</tr>
</tbody>
</table>

<h2 id="api::utils::open_file">api::utils::open_file</h2>

<p>Opens a file in the default external web browser.</p>

<p><strong>Call structure</strong></p>

<p><code>api::utils::open_file filename ?in_background?</code></p>

<p><strong>Return value</strong></p>

<p>Returns a boolean value of true if the file was successfully opened; otherwise, returns false.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">filename</td>
	<td style="text-align:left;">Name of file to display in an external web browser.</td>
</tr>
<tr>
	<td style="text-align:left;">in_background</td>
	<td style="text-align:left;">Optional. If set to a boolean value of true, keeps the focus within TKE (i.e., opening web browser in the background). If set to a bool value of false, changes the focus to the web browser window.</td>
</tr>
</tbody>
</table>

<h2 id="api::get_default_foreground">api::get_default_foreground</h2>

<p>Returns the color associated with the foreground color of a standard UI element (i.e., a button).</p>

<p><strong>Call structure</strong></p>

<p><code>api::get_default_foreground</code></p>

<p><strong>Return value</strong></p>

<p>Returns an RGB color value.</p>

<p><strong>Parameters</strong></p>

<p>None.</p>

<h2 id="api::get_default_background">api::get_default_background</h2>

<p>Returns the color associated with the background color of a standard UI element (i.e., a button).</p>

<p><strong>Call structure</strong></p>

<p><code>api::get_default_background</code></p>

<p><strong>Return value</strong></p>

<p>Returns an RGB color value.</p>

<p><strong>Parameters</strong></p>

<p>None.</p>

<h2 id="api::color_to_rgb">api::color_to_rgb</h2>

<p>Returns a list containing three values, the R, G and B integer values of the specified color.</p>

<p><strong>Call structure</strong></p>

<p><code>api::color_to_rgb color</code></p>

<p><strong>Return value</strong></p>

<p>Returns the R, G and B color values of the input color.</p>

<p><strong>Parameters</strong></p>

<p>Either an RGB color value (i.e., #RRGGBB or #RGB) or a valid color name as specified in the TK colors list.</p>

<h2 id="api::get_complementary_mono_color">api::get_complementary_mono_color</h2>

<p>Assuming that the specified RGB color is a background color, determines whether a black or white foreground color would show up best.</p>

<p><strong>Call structure</strong></p>

<p><code>api::get_complementary_mono_color color</code></p>

<p><strong>Return value</strong></p>

<p>Returns a color value of either “white” or “black”.</p>

<p><strong>Parameters</strong></p>

<p>The value of color should be a valid RGB color.</p>

<h2 id="api::rgb_to_hsv">api::rgb_to_hsv</h2>

<p>Converts the given RGB color into an HSV value.</p>

<p><strong>Call structure</strong></p>

<p><code>api::rgb_to_hsv R G B</code></p>

<p><strong>Return value</strong></p>

<p>Returns a list containing the H, S and V values of the given RGB color.</p>

<p><strong>Parameters</strong></p>

<p>The R, G and B values must be a value between 0 and 255, inclusive.</p>

<h2 id="api::hsv_to_rgb">api::hsv_to_rgb</h2>

<p>Converts the given HSV color into an RGB value.</p>

<p><strong>Call structure</strong></p>

<p><code>api::hsv_to_rgb H S V</code></p>

<p><strong>Return value</strong></p>

<p>Returns a list containing the R, G and B values of the given HSV color.</p>

<p><strong>Parameters</strong></p>

<p>The H, S and V values must be an integer value.</p>

<h2 id="api::rgb_to_hsl">api::rgb_to_hsl</h2>

<p>Converts the given RGB color to an equivalent HSL color value.</p>

<p><strong>Call structure</strong></p>

<p><code>api::rgb_to_hsl R G B</code></p>

<p><strong>Return value</strong></p>

<p>Returns a list containing the H, S and L values of the given RGB color value.</p>

<p><strong>Parameters</strong></p>

<p>The R, G and B colors must be an integer value between 0 and 255, inclusive.</p>

<h2 id="api::hsl_to_rgb">api::hsl_to_rgb</h2>

<p>Converts the given HSL color to an equivalent RGB color value.</p>

<p><strong>Call structure</strong></p>

<p><code>api::hsl_to_rgb H S L</code></p>

<p><strong>Return value</strong></p>

<p>Returns a list containing the R, G and B values of the given HSL color value.</p>

<p><strong>Parameters</strong></p>

<p>The H, S and L color values must be integer values.</p>

<h2 id="api::get_color_values">api::get_color_values</h2>

<p>Returns a number of different versions of the given RGB color value.</p>

<p><strong>Call structure</strong></p>

<p><code>api::get_color_values color</code></p>

<p><strong>Return value</strong></p>

<p>Returns a list of five elements described as follows:</p>

<ol>
<li>The V value from the HSV value.</li>
<li>The R value from the RGB value.</li>
<li>The G value from the RGB value.</li>
<li>The B value from the RGB value.</li>
<li>The RGB value expressed as #RRGGBB form.</li>
</ol>

<p><strong>Parameters</strong></p>

<p>The color can be any legal RGB value accepted by TK.</p>

<h2 id="api::auto_adjust_color">api::auto_adjust_color</h2>

<p>Automatically adjusts the given RGB color by a value equal to diff such that if the color is a darker color, the value will be lightened or if a color is a lighter color, the value will be darkened.</p>

<p><strong>Call structure</strong></p>

<p><code>api::auto_adjust_color color diff ?mode?</code></p>

<p><strong>Return value</strong></p>

<p>Returns an RGB color value in the #RRGGBB format.</p>

<p><strong>Parameters</strong></p>

<p>The color value is any legal RGB color value. The diff value is an integer value that describes the value difference to create from the color value. The mode value can be either “auto” (default) or “manual”. The auto mode will automatically discern the darkness of the color value and lighten or darken the color by the given value of diff. The manual mode will change the color value by the amount specified by diff (a negative value will darken the value while a positive value will lighten the value).</p>

<h2 id="api::auto_mix_colors">api::auto_mix_colors</h2>

<p>Adjusts the hue of the given RGB color by the value of the specified difference.</p>

<p><strong>Call structure</strong></p>

<p><code>api::auto_mix_colors color type diff</code></p>

<p><strong>Return value</strong></p>

<p>Returns an RGB color value in the #RRGGBB format.</p>

<p><strong>Parameters</strong></p>

<p>The color value is any legal TK RGB color. The value of type can be either “r”, “g” or “b” which will adjust the RGB color value by the given diff amount.</p>

<h2 id="api::color_difference">api::color_difference</h2>

<p>Returns the RGB color value which is exactly between two specified RGB colors.</p>

<p><strong>Call structure</strong></p>

<p><code>api::color_difference color1 color2</code></p>

<p><strong>Return value</strong></p>

<p>Returns an RGB color value in the #RRGGBB format.</p>

<p><strong>Parameters</strong></p>

<p>Both color1 and color2 must be valid RGB TK values.</p>

<h2 id="api::preferences::widget">api::preferences::widget</h2>

<p>Creates a preferences widget which controls the display and manipulation of one plugin preference value. The created widget is automatically added for searching within the preferences window and it is packed into the plugin’s preference panel using either pack (default) or grid (using the -grid 1 option). Several types of widgets are supported:</p>

<ul>
<li>checkbutton</li>
<li>radiobutton</li>
<li>menubutton</li>
<li>spinbox</li>
<li>tokenentry</li>
<li>entry</li>
<li>text</li>
</ul>

<p>There is also a spacer widget for creating additional vertical division between components for improving readability within the panel.</p>

<p><strong>Call Structure</strong></p>

<p><code>api::preferences::widget type parentwin prefname message options</code></p>

<p><strong>Return Value</strong></p>

<p>Returns the pathname of the main widget which allows you to customize the widget details, if desired.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">type</td>
	<td style="text-align:left;">Specifies the type of widget to create and pack. See the table below for the list of legal values.</td>
</tr>
<tr>
	<td style="text-align:left;">parentwin</td>
	<td style="text-align:left;">Pathname of parent window to pack the widget into.</td>
</tr>
<tr>
	<td style="text-align:left;">prefname</td>
	<td style="text-align:left;">Name of preference value that is controlled by this widget. Note: This field is not valid for the spacer type.</td>
</tr>
<tr>
	<td style="text-align:left;">message</td>
	<td style="text-align:left;">Message to display in the widget.</td>
</tr>
</tbody>
</table>

<p><strong>Widget Types</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Widget</th>
	<th style="text-align:left;">Usage</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">checkbutton</td>
	<td style="text-align:left;">Useful for preference items that have a boolean (on or off) value.</td>
</tr>
<tr>
	<td style="text-align:left;">radiobutton</td>
	<td style="text-align:left;">Useful for preference items that have a relatively small number of enumerated values.</td>
</tr>
<tr>
	<td style="text-align:left;">menubutton</td>
	<td style="text-align:left;">Useful for preference items that have a relatively large number of enumerated values.</td>
</tr>
<tr>
	<td style="text-align:left;">spinbox</td>
	<td style="text-align:left;">Useful for preference items that have an integer value within a specified range.</td>
</tr>
<tr>
	<td style="text-align:left;">entry</td>
	<td style="text-align:left;">Useful for preference items that have a single string value that can be input in a single line.</td>
</tr>
<tr>
	<td style="text-align:left;">token</td>
	<td style="text-align:left;">Useful for preference items that have one or more string values that are not enumerated.</td>
</tr>
<tr>
	<td style="text-align:left;">text</td>
	<td style="text-align:left;">Useful for preference items that have a single string value that may require newlines.</td>
</tr>
<tr>
	<td style="text-align:left;">spacer</td>
	<td style="text-align:left;">Only used for inserting vertical whitespace in the preference panel. This widget does not represent a preference value.</td>
</tr>
</tbody>
</table>

<p><strong>Options</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Option</th>
	<th style="text-align:left;">Default Value</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">-value <em>value</em></td>
	<td style="text-align:left;">none</td>
	<td style="text-align:left;">Only valid for the radiobutton type. This value will be assigned to the preference item if the radiobutton is selected.</td>
</tr>
<tr>
	<td style="text-align:left;">-values <em>value_list</em></td>
	<td style="text-align:left;">none</td>
	<td style="text-align:left;">Only valid for the menubutton type. The list of values will be displayed in the dropdown menu when the menubutton is clicked. The selected value will be assigned to the preference item.</td>
</tr>
<tr>
	<td style="text-align:left;">-watermark <em>string</em></td>
	<td style="text-align:left;">none</td>
	<td style="text-align:left;">Only valid for the entry and token types. This string will be displayed in the entry field when no other text is entered.</td>
</tr>
<tr>
	<td style="text-align:left;">-from <em>number</em></td>
	<td style="text-align:left;">none</td>
	<td style="text-align:left;">Only valid for the spinbox type. Specifies the lowest legal value that the spinbox can be set to.</td>
</tr>
<tr>
	<td style="text-align:left;">-to <em>number</em></td>
	<td style="text-align:left;">none</td>
	<td style="text-align:left;">Only valid for the spinbox type. Specifies the highest legal value that the spinbox can be set to.</td>
</tr>
<tr>
	<td style="text-align:left;">-increment <em>number</em></td>
	<td style="text-align:left;">1</td>
	<td style="text-align:left;">Only valid for the spinbox type. Specifies the amount that will be added/subtracted from the current value when the up/down arrow is clicked in the spinbox.</td>
</tr>
<tr>
	<td style="text-align:left;">-grid <em>number</em></td>
	<td style="text-align:left;">0</td>
	<td style="text-align:left;">If set to 0, the widget will be packed using the Tk pack manager. If set to 1, the widget will be packed using the Tk grid manager.</td>
</tr>
<tr>
	<td style="text-align:left;">-ending <em>string</em></td>
	<td style="text-align:left;">none</td>
	<td style="text-align:left;">Only valid for spinbox types. If specified, this string will be displayed on the right side of the spinbox value.</td>
</tr>
</tbody>
</table>

<p><strong>Message Display</strong></p>

<p>The following table describes how the message parameter will be displayed in relation to its widget.</p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Widget</th>
	<th style="text-align:left;">Message Layout</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">checkbutton</td>
	<td style="text-align:left;">Message is displayed to the left of the check box.</td>
</tr>
<tr>
	<td style="text-align:left;">radiobutton</td>
	<td style="text-align:left;">Message is displayed to the left of the radio button.</td>
</tr>
<tr>
	<td style="text-align:left;">menubutton</td>
	<td style="text-align:left;">Message is displayed to the left of the menu button.</td>
</tr>
<tr>
	<td style="text-align:left;">spinbox</td>
	<td style="text-align:left;">Message is displayed to the left of the spin box.</td>
</tr>
<tr>
	<td style="text-align:left;">entry</td>
	<td style="text-align:left;">Message is displayed just above the entry field.</td>
</tr>
<tr>
	<td style="text-align:left;">token</td>
	<td style="text-align:left;">Message is displayed just above the entry field.</td>
</tr>
<tr>
	<td style="text-align:left;">text</td>
	<td style="text-align:left;">Message is displayed just above the text field.</td>
</tr>
</tbody>
</table>

<h2 id="api::preferences::get_value">api::preferences::get_value</h2>

<p>Returns the current value of the input plugin preference.</p>

<p><strong>Call structure</strong></p>

<p><code>api::preferences::get_value prefname</code></p>

<p><strong>Return value</strong></p>

<p>Returns the current value of the associated preference item.</p>

<p><strong>Parameters</strong></p>

<p>The <em>prefname</em> specifies the preference item name to lookup. This must be one of the names returned from the on_pref_load plugin action. If the value of <em>prefname</em> was not found, returns an error.</p>

<h1 id="ctextwidget">Ctext Widget</h1>

<p>The Ctext widget that is supplied with TKE is a custom version that is originally based on the original 4.0 version of ctext. Due to the significant number of changes to the usage API, it makes sense to document the widget in this document for purposes of plugin development.</p>

<p>The Ctext widget is essentially a wrapper around the Tk text widget. All text widget commands and options are valid for the Ctext widget. The documentation for these options and commands are not provided in this document (read the Tk text documentation for more details). Instead, all Ctext-specific options and commands will be documented in this appendix. Any deviations of Tk text options, commands and bindings will also be documented in this appendix.</p>

<h2 id="differencesfromtheoriginalctextwidget">Differences from the original Ctext widget</h2>

<p>Like the original Ctext widget, the main purpose of the new Ctext widget is to allow text to be edited such that syntax highlighting is actively performed while the user enters information in the editor. It also provides line numbering support.</p>

<p>In addition to these functions, the new Ctext widget provides several new functions:</p>

<ul>
<li>Gutter support

<ul>
<li>In addition to line numbers, the Ctext widget provides a set of APIs to add additional programmable gutter information such that each line can be tagged with a symbol and/or colors in the gutter area to convey additional information about the line. Each symbol displayed can receive on_leave, on_enter and on_click events and execute a command when the user causes any of the events to occur.</li>
<li>Each gutter operates independently of other gutters in the same Ctext widget.</li>
<li>Gutter tagging stays on the assigned line even if the line changes to a new location due to text being inserted or deleted from the Ctext widget.</li>
</ul></li>
<li>Difference mode

<ul>
<li>Displays a new version of the gutter which shows two sets of line numbers per line.</li>
<li>Enables the ‘diff’ command API (more on this command in the command section of this appendix) to allow the developer to mark lines as changed which are displayed visually to the user.</li>
<li>Change lines can respond to developer supplied on_enter, on_leave, and on_click events.</li>
</ul></li>
<li>Enhanced syntax highlighting capabilities

<ul>
<li>Though the original Ctext widget provides several syntax highlighting API procedures, languages like HTML, XML and Markdown require more complex syntax highlighting requirements which require more than a single regular expression to properly support.</li>
<li>The new Ctext widget provides the ability to handle more complex syntax by specifying a callback procedure that is called when a certain kind of syntax is detected via a regular expression.</li>
<li>The return value from the callback procedure can cause the syntax parser current index to be set to a value less than or greater than the index returned from the original regular expression check.</li>
<li>In addition to highlighting text, the new Ctext widget can allow text to be clickable, underlined, italicized, emboldened, overstriken, superscripted, subscripted, and sized to six different sizes. If the gutter is displayed, any line height changes are automatically reflected in the gutter such that all line numbers and symbols in the gutter correlate to the lines in the editing area.</li>
</ul></li>
<li>Customized undo/redo support

<ul>
<li>Due to limitations in the Tk text widget support for the undo/redo buffer, the Ctext widget provides its own undo/redo function that provides an enhanced API for querying information about the undo/redo stack, provides support for cursor memory and re-positioning, and provides all of this while remaining extremely efficient in terms of memory and performance.</li>
</ul></li>
<li>Enhanced &lt;<Modified>&gt; event support

<ul>
<li>The %d variable contains a list of information about what caused the widget to go modified, including:

<ul>
<li>operation: ‘insert’ or ‘delete’ (replace operations cause two modify events, one for the delete and one for the insert)</li>
<li>starting cursor position</li>
<li>number of characters inserted or deleted</li>
<li>number of lines inserted or deleted</li>
<li>an optional, user-specified list of information such that any insert, delete and replace commands can pass specialized information to the callback procedure handling the modified event.</li>
</ul></li>
<li>Note: Because TKE specifies the modify callback procedure, this is not a feature that is useful for TKE development but rather for any other project that wishes to use the version of Ctext provided with TKE.</li>
</ul></li>
<li>Optimized

<ul>
<li>The new Ctext widget syntax highlighter and linemap code has been modified to optimize performance while editing to make the widget feel snappier and more usable.</li>
<li>Many improvements have been also made to improve the correctness of highlighting and bracket matching.</li>
<li>Includes support for the replace command such that undo/redo will behave as expected as well as provides the proper syntax highlighting support.</li>
</ul></li>
<li>New version number

<ul>
<li>The new Ctext widget provided with TKE is set to version 5.0. The original version set its version number to 4.0. This allows development environments to use both widgets, if necessary (although 5.0 is a superset of 4.0 such that 4.0 should no longer be necessary to use).</li>
</ul></li>
</ul>

<h2 id="options">Options</h2>

<p>The following options are available in the Ctext widget.</p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Option</th>
	<th style="text-align:left;">Default Value</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">-highlightcolor <em>color</em></td>
	<td style="text-align:left;">yellow</td>
	<td style="text-align:left;">Specifies the color that will be drawn around the outside of the editor window when the window has keyboard input focus.</td>
</tr>
<tr>
	<td style="text-align:left;">-unhighlightcolor <em>color</em></td>
	<td style="text-align:left;">None</td>
	<td style="text-align:left;">Specifies the color that will be drawn around the outside of the editor window when the window does not have keyboard input focus.</td>
</tr>
<tr>
	<td style="text-align:left;">-linemap <em>boolean</em></td>
	<td style="text-align:left;">TRUE</td>
	<td style="text-align:left;">If true displays the line number information in the gutter; otherwise, hides the line number information.</td>
</tr>
<tr>
	<td style="text-align:left;">-linemapfg <em>color</em></td>
	<td style="text-align:left;">Same as the value of the -fg option.</td>
	<td style="text-align:left;">Specifies the color of the foreground in the line information in the gutter.</td>
</tr>
<tr>
	<td style="text-align:left;">-linemapbg <em>color</em></td>
	<td style="text-align:left;">Same as the value of the -bg option.</td>
	<td style="text-align:left;">Specifies the color of the background in the line information in the gutter.</td>
</tr>
<tr>
	<td style="text-align:left;">-linemap_mark_command <em>command</em></td>
	<td style="text-align:left;">None</td>
	<td style="text-align:left;">Specifies a command to execute when the user creates a marker in the gutter area. The command has the following information appended to this command: pathname of the ctext widget, a value of “marked” (if a marker was added to the gutter) or “unmarked” (if a marker was deleted from the gutter), and the tag name of the marker created.</td>
</tr>
<tr>
	<td style="text-align:left;">-linemap_markable <em>boolean</em></td>
	<td style="text-align:left;">TRUE</td>
	<td style="text-align:left;">If true, specifies that the linemap can be clicked on to create and remove markers. If -linemap is false when this option is true, the line numbers will not be displayed, but a one character area will be visible allowing the user to click on a line to create a visible marker.</td>
</tr>
<tr>
	<td style="text-align:left;">-linemap_select_fg <em>color</em></td>
	<td style="text-align:left;">black</td>
	<td style="text-align:left;">Specifies the foreground color of line numbers when they are marked with a marker.</td>
</tr>
<tr>
	<td style="text-align:left;">-linemap_select_bg <em>color</em></td>
	<td style="text-align:left;">yellow</td>
	<td style="text-align:left;">Specifies the background color of line numbers when they are marked with a marker.</td>
</tr>
<tr>
	<td style="text-align:left;">-linemap_cursor <em>cursor</em></td>
	<td style="text-align:left;">left_ptr</td>
	<td style="text-align:left;">Specifies the name of a Tk cursor to display when the mouse cursor is within the linemap gutter area.</td>
</tr>
<tr>
	<td style="text-align:left;">-linemap_relief <em>relief</em></td>
	<td style="text-align:left;">Same value as the -relief text option</td>
	<td style="text-align:left;">Specifies the relief to to use when displaying the linemap area.</td>
</tr>
<tr>
	<td style="text-align:left;">-linemap_minwidth <em>number</em></td>
	<td style="text-align:left;">1</td>
	<td style="text-align:left;">Specifies the minimum number of characters to show for line numbers. If the number of characters required to display the last line number of the current file exceeds this value, that value is used instead.</td>
</tr>
<tr>
	<td style="text-align:left;">-linemap_type (<strong>absolute</strong> or <strong>relative</strong>)</td>
	<td style="text-align:left;">absolute</td>
	<td style="text-align:left;">Specifies if line numbering should use absolute line numbering (i.e., the first line of the file is numbered 1 and subsequent line numbers increment from there) or relative line numbering (i.e., the line containing the insertion cursor is numbered 0 with lines above incrementing by 1 from 0 and lines below the current line incrementing by 1).</td>
</tr>
<tr>
	<td style="text-align:left;">-warnwidth <em>number</em></td>
	<td style="text-align:left;">None</td>
	<td style="text-align:left;">If set to a positive number, sets the width warning line just after the specified text column. If set to the empty string, the warning line will be removed from the display.</td>
</tr>
<tr>
	<td style="text-align:left;">-warnwidth_bg <em>color</em></td>
	<td style="text-align:left;">red</td>
	<td style="text-align:left;">Specifies the color of the width warning line (if it is displayed).</td>
</tr>
<tr>
	<td style="text-align:left;">-casesensitive <em>boolean</em></td>
	<td style="text-align:left;">1</td>
	<td style="text-align:left;">Specifies the case-sensitivity of the syntax highlight parser.</td>
</tr>
<tr>
	<td style="text-align:left;">-maxundo <em>number</em></td>
	<td style="text-align:left;">0</td>
	<td style="text-align:left;">Specifies the maximum number of undo operations stored in memory. If this value is set to 0, unlimited undo is supported (if the Tk text -undo option is set to a value of true).</td>
</tr>
<tr>
	<td style="text-align:left;">-diff_mode <em>boolean</em></td>
	<td style="text-align:left;">0</td>
	<td style="text-align:left;">If set to true, runs the Ctext editor in diff mode. In this mode, the gutter displays two sets of line numbers (one for each file in the diff). This option also enables the diff commands (documented in the Commands section of this appendix). If set to false, runs the editor in normal editing mode. Note that diff mode still allows syntax highlighting to occur. Additionally, if we are running in diff mode, the line number gutter will always be displayed regardless of the value of -linemap.</td>
</tr>
<tr>
	<td style="text-align:left;">-diffsubbg <em>color</em></td>
	<td style="text-align:left;">pink</td>
	<td style="text-align:left;">Specifies the background color of difference lines from the first file (i.e., lines that are not a part of the second file).</td>
</tr>
<tr>
	<td style="text-align:left;">-diffaddbg <em>color</em></td>
	<td style="text-align:left;">{light green}</td>
	<td style="text-align:left;">Specifies the background color of difference lines from the second file (i.e., lines that are not a part of the first file).</td>
</tr>
</tbody>
</table>

<h2 id="commandapi">Command API</h2>

<p>Like the widget options, only those commands which differ from the standard Tk text widget will be included in this chapter.</p>

<h3 id="delete">delete</h3>

<p>The delete command works almost exactly the same as the standard text delete command with one exception, it can accept an optional “-moddata” option. The moddata option allows the user to pass user-specific information to the callback procedure that handles the &lt;<Modified>&gt; virtual event.</p>

<p>In TKE, there is only one value that is used for -moddata, the value of “ignore”. Adding the “-moddata ignore” option will cause the deletion to not change the modified state of the text widget. This allows plugin code to delete data from the buffer without making it look like the user modified the contents of the buffer.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname delete ?-moddata value? index1 ?index2?</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<h3 id="diffreset">diff reset</h3>

<p>This command must be called prior to calling any of the other diff-related commands. If the difference information needs to be changed (i.e., one of the files in the difference is changed), this command must be called to remove all embedded difference information and reset the widget. </p>

<p><strong>Call structure</strong></p>

<p><code>pathname diff reset</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<p><strong>Parameters</strong></p>

<p>None.</p>

<p><strong>Example</strong></p>

<pre><code>proc apply_diff {txt} {  
  # Reset the widget for difference display  
  $txt diff reset  
  # Show that the second file had two lines added, starting  
  # at line 5  
  $txt diff add 5 2  
}
</code></pre>

<h3 id="diffranges">diff ranges</h3>

<p>Returns a list of text indices that specify the start and end ranges of text marked as different in the Ctext widget. The differences from the first file (sub), second file (add) or both can be returned. All indices are returned in index order.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname diff ranges type</code></p>

<p><strong>Return value</strong></p>

<p>A Tcl list containing an even number of text indices specifying the start and end of each difference range.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">type</td>
	<td style="text-align:left;">One of three values: <ul><li>sub = returns the ranges of all differences in the first file</li><li>add = returns the ranges of all differences in the second file</li><li>both = returns the ranges of all differences in both files</li></ul></td>
</tr>
</tbody>
</table>

<h3 id="diffsub">diff sub</h3>

<p>Adds a difference change for the first file (as it would be displayed in unified diff format). Before any calls can be made to this command, the diff reset command must be called.</p>

<p>When the editor operates in diff mode, it is important the the second file in the diff is displayed in the Ctext widget in its entirety. The ‘diff sub’ command contains an extra parameter when called which contains the text that exists in the first file but not in the second file. This text is inserted into the widget at the given line number and line numbers in the gutter are adjusted accordingly. All inserted text will be highlighted in the background color specified by the -diffsubbg option.</p>

<p><strong>Call Structure</strong></p>

<p><code>pathname diff sub startline linecount text</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">startline</td>
	<td style="text-align:left;">Starting line containing file difference information.</td>
</tr>
<tr>
	<td style="text-align:left;">linecount</td>
	<td style="text-align:left;">Specifies the number of lines that will be inserted into the widget.</td>
</tr>
<tr>
	<td style="text-align:left;">text</td>
	<td style="text-align:left;">String containing text that exists in the first file but not in the second file. If a unified diff file is parsed, this string would be all contiguous lines prefixed by a single ‘-‘ character in the output.</td>
</tr>
</tbody>
</table>

<h3 id="diffadd">diff add</h3>

<p>Like its other diff command ‘diff sub’, the ‘diff add’ command marks lines in the text widget as being different from the first file. All lines marked with this command are highlighted using the background color specified by the -diffaddbg option. After this command has been called, the line numbers in the linemap area will be automatically changed to match the difference information.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname diff add startline linecount</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">startline</td>
	<td style="text-align:left;">Starting line containing file difference information.</td>
</tr>
<tr>
	<td style="text-align:left;">linecount</td>
	<td style="text-align:left;">Specifies the number of lines that will be inserted into the widget.</td>
</tr>
</tbody>
</table>

<h3 id="fastdelete">fastdelete</h3>

<p>This command performs a standard deletion without repairing any syntax highlighting due to removing the text.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname fastdelete ?options? startpos endpos</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">options</td>
	<td style="text-align:left;"><ul><li>-moddata <i>data</i> = Value that will be passed to any &lt;&lt;Modified&gt;&gt; callback procedures via the %d bind variable.</li><li>-update <i>bool</i> = If set to 1 will cause the &lt;&lt;Modified&gt;&gt; and &lt;&lt;CursorChanged&gt;&gt; events to be triggered; otherwise, these events will not be generated.</li></ul></td>
</tr>
<tr>
	<td style="text-align:left;">startpos</td>
	<td style="text-align:left;">Starting text position of character range to delete.</td>
</tr>
<tr>
	<td style="text-align:left;">endpos</td>
	<td style="text-align:left;">Ending test position of character range to delete.</td>
</tr>
</tbody>
</table>

<h3 id="fastinsert">fastinsert</h3>

<p>This command performs a standard insertion without performing any syntax highlighting on the inserted text.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname fastinsert ?options? startpos text</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">options</td>
	<td style="text-align:left;"><ul><li>-moddata <i>data</i> = Value that will be passed to any &lt;&lt;Modified&gt;&gt; callback procedures via the %d bind variable.</li><li>-update <i>bool</i> = If set to 1 will cause the &lt;&lt;Modified&gt;&gt; and &lt;&lt;CursorChanged&gt;&gt; events to be triggered; otherwise, these events will not be generated.</li></ul></td>
</tr>
<tr>
	<td style="text-align:left;">startpos</td>
	<td style="text-align:left;">Starting text position to begin inserting the given text.</td>
</tr>
<tr>
	<td style="text-align:left;">text</td>
	<td style="text-align:left;">Text to insert.</td>
</tr>
</tbody>
</table>

<h3 id="fastreplace">fastreplace</h3>

<p>This command performs a standard text replacement without performing any syntax highlighting on the inserted text.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname fastreplace ?options? startpos endpos text</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">options</td>
	<td style="text-align:left;"><ul><li>-moddata <i>data</i> = Value that will be passed to any &lt;&lt;Modified&gt;&gt; callback procedures via the %d bind variable.</li><li>-update <i>bool</i> = If set to 1 will cause the &lt;&lt;Modified&gt;&gt; and &lt;&lt;CursorChanged&gt;&gt; events to be triggered; otherwise, these events will not be generated.</li></ul></td>
</tr>
<tr>
	<td style="text-align:left;">startpos</td>
	<td style="text-align:left;">Starting position of text range to delete and starting position to insert text.</td>
</tr>
<tr>
	<td style="text-align:left;">endpos</td>
	<td style="text-align:left;">Ending position of text range to delete.</td>
</tr>
<tr>
	<td style="text-align:left;">text</td>
	<td style="text-align:left;">Text to insert in replacement of the deleted text.</td>
</tr>
</tbody>
</table>

<h3 id="highlight">highlight</h3>

<p>Causes all text between the specified line positions to be re-evaluated for syntax highlighting. This is most often used after a number of fastdelete or fastinsert commands are called. This eliminates a lot of syntax highlighting calls which can improve the performance of the widget in certain situations.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname highlight ?options? startpos endpos</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">options</td>
	<td style="text-align:left;"><ul><li>-moddata <i>data</i> = Value that will be passed to any &lt;&lt;Modified&gt;&gt; callback procedures via the %d bind variable.</li><li>-insert <i>bool</i> = Set to a value of 1 if the highlight is being performed after inserting text; otherwise, set it to a value of 0.</li><li>-dotags <i>list</i> = Set to any string value to force comment/string parsing to be performed during the highlight process.</li></ul></td>
</tr>
<tr>
	<td style="text-align:left;">startpos</td>
	<td style="text-align:left;">Character position index to begin highlighting. The starting character position will be the beginning of the line of this character.</td>
</tr>
<tr>
	<td style="text-align:left;">endpos</td>
	<td style="text-align:left;">Character position index to end highlighting. The ending character position will be the end of the line containing this character.</td>
</tr>
</tbody>
</table>

<h3 id="insert">insert</h3>

<p>The insert command works almost exactly the same as the standard text insert command with one exception, it can accept an optional “-moddata” option. The moddata option allows the user to pass user-specific information to the callback procedure that handles the &lt;&lt;Modified&gt;&gt; virtual event.</p>

<p>In TKE, there is only one value that is used for -moddata, the value of “ignore”. Adding the “-moddata ignore” option will cause the insertion to not change the modified state of the text widget. This allows plugin code to initially insert data into the buffer without making it look like the user modified the contents of the buffer.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname insert ?-moddata value? index chars ?taglist chars taglist …?</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<h3 id="inbacktickinbacktickrange">inBackTick / inBackTickRange</h3>

<p>The inBackTick and inBackTickRange commands return a value of true if the specified index exists within a backtick (`) string. The latter will also return the range of the string in the given text widget.</p>

<p><strong>Call structure</strong></p>

<p><code>ctext::inBackTick pathname index</code><br/>
<code>ctext::inBackTickRange pathname index rangeref</code></p>

<p><strong>Return value</strong></p>

<p>Returns a value of true if the specified index exists within a backticked string; otherwise, returns a value of false.</p>

<p><strong>Parameters</strong></p>

<p>The <em>pathname</em> references the ctext widget to check. The <em>index</em> value refers to the ctext index to check. The <em>rangeref</em> parameter, will be populated with a list containing the starting and ending position of the string that surrounds the given index. This value will only be valid when the procedure returns a value of true.</p>

<h3 id="inblockcommentinblockcommentrange">inBlockComment / inBlockCommentRange</h3>

<p>The inBlockComment and inBlockCommentRange commands return a value of true if the specified index exists within a block comment. The latter will also return the range of the comment in the given text widget.</p>

<p><strong>Call structure</strong></p>

<p><code>ctext::inBlockComment pathname index</code><br/>
<code>ctext::inBlockCommentRange pathname index rangeref</code></p>

<p><strong>Return value</strong></p>

<p>Returns a value of true if the specified index exists within a block comment; otherwise, returns a value of false.</p>

<p><strong>Parameters</strong></p>

<p>The <em>pathname</em> references the ctext widget to check. The <em>index</em> value refers to the ctext index to check. The <em>rangeref</em> parameter, will be populated with a list containing the starting and ending position of the block comment that surrounds the given index. This value will only be valid when the procedure returns a value of true.</p>

<h3 id="incommentincommentrange">inComment / inCommentRange</h3>

<p>The inComment and inCommentRange commands return a value of true if the specified index exists within a line or block comment. The latter will also return the range of the comment in the given text widget.</p>

<p><strong>Call structure</strong></p>

<p><code>ctext::inComment pathname index</code><br/>
<code>ctext::inCommentRange pathname index rangeref</code></p>

<p><strong>Return value</strong></p>

<p>Returns a value of true if the specified index exists within a block or line comment; otherwise, returns a value of false.</p>

<p><strong>Parameters</strong></p>

<p>The <em>pathname</em> references the ctext widget to check. The <em>index</em> value refers to the ctext index to check. The <em>rangeref</em> parameter, will be populated with a list containing the starting and ending position of the comment that surrounds the given index. This value will only be valid when the procedure returns a value of true.</p>

<h3 id="incommentstringincommentstringrange">inCommentString / inCommentStringRange</h3>

<p>The inCommentString and inCommentStringRange commands return a value of true if the specified index exists within a comment or a string. The latter will also return the range of the comment/string in the given text widget.</p>

<p><strong>Call structure</strong></p>

<p><code>ctext::inCommentString pathname index</code><br/>
<code>ctext::inCommentStringRange pathname index rangeref</code></p>

<p><strong>Return value</strong></p>

<p>Returns a value of true if the specified index exists within a comment or string; otherwise, returns a value of false.</p>

<p><strong>Parameters</strong></p>

<p>The <em>pathname</em> references the ctext widget to check. The <em>index</em> value refers to the ctext index to check. The <em>rangeref</em> parameter, will be populated with a list containing the starting and ending position of the comment/string that surrounds the given index. This value will only be valid when the procedure returns a value of true.</p>

<h3 id="indoublequoteindoublequoterange">inDoubleQuote / inDoubleQuoteRange</h3>

<p>The inDoubleQuote and inDoubleQuoteRange commands return a value of true if the specified index exists within a double-quoted string. The latter will also return the range of the string in the given text widget.</p>

<p><strong>Call structure</strong></p>

<p><code>ctext::inDoubleQuote pathname index</code><br/>
<code>ctext::inDoubleQuoteRange pathname index rangeref</code></p>

<p><strong>Return value</strong></p>

<p>Returns a value of true if the specified index exists within a double-quoted string; otherwise, returns a value of false.</p>

<p><strong>Parameters</strong></p>

<p>The <em>pathname</em> references the ctext widget to check. The <em>index</em> value refers to the ctext index to check. The <em>rangeref</em> parameter, will be populated with a list containing the starting and ending position of the string that surrounds the given index. This value will only be valid when the procedure returns a value of true.</p>

<h3 id="inlinecommentinlinecommentrange">inLineComment / inLineCommentRange</h3>

<p>The inLineComment and inLineCommentRange commands return a value of true if the specified index exists within a line comment. The latter will also return the range of the comment in the given text widget.</p>

<p><strong>Call structure</strong></p>

<p><code>ctext::inLineComment pathname index</code><br/>
<code>ctext::inLineCommentRange pathname index rangeref</code></p>

<p><strong>Return value</strong></p>

<p>Returns a value of true if the specified index exists within a line comment; otherwise, returns a value of false.</p>

<p><strong>Parameters</strong></p>

<p>The <em>pathname</em> references the ctext widget to check. The <em>index</em> value refers to the ctext index to check. The <em>rangeref</em> parameter, will be populated with a list containing the starting and ending position of the comment that surrounds the given index. This value will only be valid when the procedure returns a value of true.</p>

<h3 id="insinglequoteinsinglequoterange">inSingleQuote / inSingleQuoteRange</h3>

<p>The inSingleQuote and inSingleQuoteRange commands return a value of true if the specified index exists within a line comment. The latter will also return the range of the comment in the given text widget.</p>

<p><strong>Call structure</strong></p>

<p><code>ctext::inSingleQuote pathname index</code><br/>
<code>ctext::inSingleQuoteRange pathname index rangeref</code></p>

<p><strong>Return value</strong></p>

<p>Returns a value of true if the specified index exists within a single-quoted string; otherwise, returns a value of false.</p>

<p><strong>Parameters</strong></p>

<p>The <em>pathname</em> references the ctext widget to check. The <em>index</em> value refers to the ctext index to check. The <em>rangeref</em> parameter, will be populated with a list containing the starting and ending position of the quote that surrounds the given index. This value will only be valid when the procedure returns a value of true.</p>

<h3 id="instringinstringrange">inString / inStringRange</h3>

<p>The inString command returns a value of true if the specified index exists within a single-, double- or backtick string. The latter will also return the range of the string in the given text widget.</p>

<p><strong>Call structure</strong></p>

<p><code>ctext::inString pathname index</code><br/>
<code>ctext::inStringRange pathname index rangeref</code></p>

<p><strong>Return value</strong></p>

<p>Returns a value of true if the specified index exists within a string; otherwise, returns a value of false.</p>

<p><strong>Parameters</strong></p>

<p>The <em>pathname</em> references the ctext widget to check. The <em>index</em> value refers to the ctext index to check. The <em>rangeref</em> parameter, will be populated with a list containing the starting and ending position of the string that surrounds the given index. This value will only be valid when the procedure returns a value of true.</p>

<h3 id="isescaped">isEscaped</h3>

<p>The isEscaped command returns a value of true if the specified character has an odd number of subsequent escape (\) characters preceding it on the same line. This procedure has been optimized for speed so it is recommended to use this if this information needs to be retrieved.</p>

<p><strong>Call structure</strong></p>

<p><code>ctext::isEscaped pathname index</code></p>

<p><strong>Return value</strong></p>

<p>Returns a value of true if the character at the given index is immediately preceded by an odd number of escape (\) characters; otherwise, returns a value of false.</p>

<p><strong>Parameters</strong></p>

<p>The <em>pathname</em> references the ctext widget to check. The <em>index</em> value refers to the ctext index to check.</p>

<h3 id="editundoable">edit undoable</h3>

<p>Returns a boolean value of true if the undo stack contains at least one set of changes. Returns a boolean value of false if the undo stack is empty.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname edit undoable</code></p>

<p><strong>Return value</strong></p>

<p>Returns false if the undo stack is empty; otherwise, returns true.</p>

<p><strong>Parameters</strong></p>

<p>None.</p>

<h3 id="editredoable">edit redoable</h3>

<p>Returns a boolean value of true if the redo stack contains at least one set of changes. Returns a boolean value of false if the redo stack is empty.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname edit redoable</code></p>

<p><strong>Return value</strong></p>

<p>Returns false if the redo stack is empty; otherwise, returns true.</p>

<p><strong>Parameters</strong></p>

<p>None.</p>

<h3 id="editcursorhist">edit cursorhist</h3>

<p>Returns a list of cursor indices from the undo stack such that the first index corresponds to the oldest cursor in the stack while the newest cursor position is at the end of the list.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname edit cursorhist</code></p>

<p><strong>Return value</strong></p>

<p>Returns a list of indices containing the history of stored cursor positions from oldest to newest. If the undo stack is empty, an empty list will be returned.</p>

<p><strong>Parameters</strong></p>

<p>None.</p>

<h3 id="guttercreate">gutter create</h3>

<p>A gutter is a single character column drawn in the linemap area of the widget. All gutters are added to the right of the line number column (if displayed). Each row in the gutter will correspond to the associated line in the editing area. Each gutter row can display a background color and/or a symbol (i.e., unicode character). If the user moves the mouse over a gutter row an on_enter or on_leave event can be bound to handle the event. Additionally, if the user left clicks on a gutter row, an on_click event can be bound to handle the event.</p>

<p>The ‘gutter create’ command must be called prior to calling any other gutter commands. Each gutter is given a developer-provided name. This name is used in all of the other gutter commands to refer to which gutter to operate on.</p>

<p>This command adds the gutter to the gutter area and, optionally, configures its setup/behavior.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname gutter create name ?symbol_name symbol_opt_list ...?</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">name</td>
	<td style="text-align:left;">Developer-supplied name of the gutter to create. All other gutter commands require this name.</td>
</tr>
<tr>
	<td style="text-align:left;">symbol_name</td>
	<td style="text-align:left;">Name of a symbol that will exist in the gutter.</td>
</tr>
<tr>
	<td style="text-align:left;">symbol_opt_list</td>
	<td style="text-align:left;">List containing an even number of option/value pairs that will be associated with the symbol called symbol_name. The possible values contained in this list are represented in the Gutter Symbol Options table.</td>
</tr>
</tbody>
</table>

<p><strong>Gutter Symbol Options</strong></p>

<p>The following options are used in the ‘gutter create’, ‘gutter cget’ and ‘gutter configure’ commands.</p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Option</th>
	<th style="text-align:left;">Value(s)</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">-symbol</td>
	<td style="text-align:left;">Unicode character</td>
	<td style="text-align:left;">Specifies the character to draw in all gutter rows associated with the given symbol name.</td>
</tr>
<tr>
	<td style="text-align:left;">-bg</td>
	<td style="text-align:left;">color</td>
	<td style="text-align:left;">Specifies background color to use for all rows tagged with the associated symbol name.</td>
</tr>
<tr>
	<td style="text-align:left;">-fg</td>
	<td style="text-align:left;">color</td>
	<td style="text-align:left;">Specifies foreground color to use for all rows tagged with the associated symbol name.</td>
</tr>
<tr>
	<td style="text-align:left;">-onenter</td>
	<td style="text-align:left;">command</td>
	<td style="text-align:left;">Command to execute whenever the user mouse cursor enters a row represented by the associated symbol name. The pathname of the widget is appended to the command when executed.</td>
</tr>
<tr>
	<td style="text-align:left;">-onleave</td>
	<td style="text-align:left;">command</td>
	<td style="text-align:left;">Command to execute whenever the user mouse cursor leaves a row represented by the associated symbol name. The pathname of the widget is appended to the command when executed.</td>
</tr>
<tr>
	<td style="text-align:left;">-onclick</td>
	<td style="text-align:left;">command</td>
	<td style="text-align:left;">Command to execute whenever the user left clicks on a row represented by the associated symbol name. The pathname of the widget and the line number of the clicked symbol is appended to the command when executed.</td>
</tr>
<tr>
	<td style="text-align:left;">-onshiftclick</td>
	<td style="text-align:left;">command</td>
	<td style="text-align:left;">Command to execute whenever the user holds the Shift key while left clicking on a row represented by the associated symbol name. The pathname of the widget and the line number of the clicked symbol is appended to the command when executed.</td>
</tr>
<tr>
	<td style="text-align:left;">-oncontrolclick</td>
	<td style="text-align:left;">command</td>
	<td style="text-align:left;">Command to execute whenever the user holds the Control key while left clicking on a row represented by the associated symbol name. The pathname of the widget and the line number of the clicked symbol is appended to the command when executed.</td>
</tr>
</tbody>
</table>

<h3 id="gutterdestroy">gutter destroy</h3>

<p>Removes a previously created gutter from the gutter and destroys all memory associated with the gutter. If the specified gutter name does not refer to a created gutter, nothing is done.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname gutter destroy name</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">name</td>
	<td style="text-align:left;">Name of gutter to destroy.</td>
</tr>
</tbody>
</table>

<h3 id="gutterhide">gutter hide</h3>

<p>Sets the hide state of the named gutter. If set to a value of 1, the associated gutter will not be displayed; however, all state information associated with the named gutter will remain. If set to a value of 0, the gutter will be redisplayed with the current gutter information.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname gutter hide name ?value?</code></p>

<p><strong>Return value</strong></p>

<p>If the <em>value</em> parameter is not specified, returns the current hide state of the named buffer as a boolean value.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">name</td>
	<td style="text-align:left;">Name of gutter to change hide state.</td>
</tr>
<tr>
	<td style="text-align:left;">value</td>
	<td style="text-align:left;">Optional value. If specified, sets the hide state of the named gutter and immediately applies the effect to the gutter. If not specified, returns the current hide state value of the named gutter.</td>
</tr>
</tbody>
</table>

<h3 id="gutterset">gutter set</h3>

<p>Tags one or more rows in the gutter with one or more gutter symbols. If a gutter row in one of the lists already is tagged with a different symbol, that symbol is replaced with the new symbol.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname gutter set name ?symbol_name rows ...?</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">name</td>
	<td style="text-align:left;">Name of gutter to modify.</td>
</tr>
<tr>
	<td style="text-align:left;">symbol_name</td>
	<td style="text-align:left;">Name of symbol to associate the given list of rows with. The value of symbol_name must be created prior to the ‘gutter set’ call in either the ‘gutter create’ or ‘gutter configure’ commands.</td>
</tr>
<tr>
	<td style="text-align:left;">rows</td>
	<td style="text-align:left;">A list containing one or more integer values ranging from 1 to the maximum number of lines in the widget.</td>
</tr>
</tbody>
</table>

<h3 id="gutterdelete">gutter delete</h3>

<p>Removes one or more symbol names from the gutter.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname gutter delete name symbol_name_list</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">name</td>
	<td style="text-align:left;">Name of gutter to modify.</td>
</tr>
<tr>
	<td style="text-align:left;">symbol_name_list</td>
	<td style="text-align:left;">List of symbol names to delete from the specified gutter.</td>
</tr>
</tbody>
</table>

<h3 id="gutterget">gutter get</h3>

<p>Returns a list of information about the specified gutter, depending on the call structure. In the first call structure where only the name of the gutter is specified, the command returns a list of all symbol names stored in the gutter. If both the name of the gutter and the name of a symbol is specified, returns a list of rows that are tagged with the given symbol.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname gutter get name ?symbol_name?</code></p>

<p><strong>Return value</strong></p>

<p>If <em>symbol_name</em> is not specified, returns a list of all symbol names in the first case; otherwise, returns a list of rows tagged with the given symbol in the second case.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">name</td>
	<td style="text-align:left;">Name of gutter to query.</td>
</tr>
<tr>
	<td style="text-align:left;">symbol_name</td>
	<td style="text-align:left;">Name of gutter symbol to query.</td>
</tr>
</tbody>
</table>

<h3 id="gutterclear">gutter clear</h3>

<p>Clears all rows in the specified row range of all tagged symbols.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname gutter clear name first ?last?</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">name</td>
	<td style="text-align:left;">Name of gutter to modify.</td>
</tr>
<tr>
	<td style="text-align:left;">first</td>
	<td style="text-align:left;">First row in range to clear.</td>
</tr>
<tr>
	<td style="text-align:left;">last</td>
	<td style="text-align:left;">Last row in range to clear (inclusive). If last is not specified, only the row specified with first is affected.</td>
</tr>
</tbody>
</table>

<h3 id="guttercget">gutter cget</h3>

<p>Retrieves the gutter option value associated with the given gutter value.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname gutter cget name symbol_name option</code></p>

<p><strong>Return value</strong></p>

<p>Returns the value associated with the given gutter name / symbol name / gutter option.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">name</td>
	<td style="text-align:left;">Name of gutter to query.</td>
</tr>
<tr>
	<td style="text-align:left;">symbol_name</td>
	<td style="text-align:left;">Name of gutter symbol name to query.</td>
</tr>
<tr>
	<td style="text-align:left;">option</td>
	<td style="text-align:left;">Name of gutter option to query the value of.</td>
</tr>
</tbody>
</table>

<h3 id="gutterconfigure">gutter configure</h3>

<p>Either allows gutter options to be set to different values or retrieves a list of all option/value pairs associated with the given gutter/symbol name.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname gutter configure name symbol_name ?option? ?value option value ...?</code></p>

<p><strong>Return value</strong></p>

<p>If the first call is made, returns a list of all symbol names and associated gutter symbol options assigned to the given gutter.</p>

<p><strong>Parameters</strong></p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Parameter</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">name</td>
	<td style="text-align:left;">Name of gutter to modify/query.</td>
</tr>
<tr>
	<td style="text-align:left;">symbol_name</td>
	<td style="text-align:left;">Name of gutter symbol to modify/query.</td>
</tr>
<tr>
	<td style="text-align:left;">option</td>
	<td style="text-align:left;">Name of gutter symbol option to modify.</td>
</tr>
<tr>
	<td style="text-align:left;">value</td>
	<td style="text-align:left;">Value to assign to the associated symbol option.</td>
</tr>
</tbody>
</table>

<h3 id="gutternames">gutter names</h3>

<p>Returns a list of names for all of the stored gutters.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname gutter names</code></p>

<p><strong>Return value</strong></p>

<p>Returns a list of stored gutter names.</p>

<p><strong>Parameters</strong></p>

<p>None.</p>

<h3 id="replace">replace</h3>

<p>The replace command works almost exactly the same as the standard text replace command with one exception, it can accept an optional “-moddata” option. The moddata option allows the user to pass user-specific information to the callback procedure that handles the &lt;&lt;Modified&gt;&gt; virtual event.</p>

<p>In TKE, there is only one value that is used for -moddata, the value of “ignore”. Adding the “-moddata ignore” option will cause the replacement to not change the modified state of the text widget. This allows plugin code to modify data in the buffer without making it look like the user modified the contents of the buffer.</p>

<p><strong>Call structure</strong></p>

<p><code>pathname replace ?-moddata value? index1 index2 chars ?taglist chars taglist …?</code></p>

<p><strong>Return value</strong></p>

<p>None.</p>

<h1 id="packages">Packages</h1>

<p>The following is a list of of available packages to the plugin code that is already included in TKE.</p>

<h2 id="tclx">Tclx</h2>

<p>Documentation for the tclx package can be found at <a href="http://www.tcl.tk/man/tclx8.2/TclX.n.html">http://www.tcl.tk/man/tclx8.2/TclX.n.html</a></p>

<h2 id="tablelist">Tablelist</h2>

<p>Documentation for the tablelist package can be found at <a href="http://www.nemethi.de/tablelist/index.html">http://www.nemethi.de/tablelist/index.html</a>. TKE currently uses version 5.14.</p>

<h2 id="tooltip">tooltip</h2>

<p>Documentation for the tooltip package can be found at <a href="http://docs.activestate.com/activetcl/8.5/tklib/tooltip/tooltip.html">http://docs.activestate.com/activetcl/8.5/tklib/tooltip/tooltip.html</a></p>

<h2 id="msgcat">msgcat</h2>

<p>Documentation for the msgcat package can be found at <a href="http://www.tcl.tk/man/tcl8.5/TclCmd/msgcat.htm">http://www.tcl.tk/man/tcl8.5/TclCmd/msgcat.htm</a></p>

<h2 id="tokenentry">tokenentry</h2>

<p>Documentation for the tokenentry package can be found at <a href="http://ptwidgets.sourceforge.net/page3/files/tokenentry.html">http://ptwidgets.sourceforge.net/page3/files/tokenentry.html</a></p>

<h2 id="tabbar">tabbar</h2>

<p>Documentation for the tabbar package can be found at <a href="http://ptwidgets.sourceforge.net/page3/files/tabbar.html">http://ptwidgets.sourceforge.net/page3/files/tabbar.html</a></p>

<h2 id="fontchooser">fontchooser</h2>

<p>The fontchooser packet provides a UI for selecting a font. If the window is canceled, an empty string is returned; otherwise, the font value of the selected font is returned. The returned font will be in the option/value Tcl font form. This package provides a single user command:</p>

<p><code>fontchooser ?option value …?</code></p>

<p>The available options are specified as follows:</p>

<table>
<colgroup>
<col style="text-align:left;"/>
<col style="text-align:left;"/>
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Option</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><strong>-parent</strong> <em>window</em></td>
	<td style="text-align:left;">Makes window the logical parent of the fontchooser dialog. The file dialog is displayed on top of its parent window.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>-initialfont</strong> <em>font</em></td>
	<td style="text-align:left;">Specifies the initial font to display in the window. The value of font can be any legal Tcl font description.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>-title</strong> <em>titleString</em></td>
	<td style="text-align:left;">Specifies a string to display as the title of the dialog box. If this option is not specified, no title is displayed.</td>
</tr>
</tbody>
</table>

<!-- ##END MARKED WRAPPER## -->
    </div>



<script>(function(factory){if(typeof define==="function"&&define.amd){define("bidi_helpers",[],factory)}else{window.bidi_helpers=factory()}})(function(){var module={};module.Dir={RTL:-1,UNKNOWN:0,LTR:1};module.Format={LRE:"\u202A",RLE:"\u202B",PDF:"\u202C",LRM:"\u200E",RLM:"\u200F"};module.ltrChars_="A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02B8\u0300-\u0590\u0800-\u1FFF\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF";module.rtlChars_="\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC";module.ltrDirCheckRe_=new RegExp("^[^"+module.rtlChars_+"]*["+module.ltrChars_+"]");module.ltrCharReg_=new RegExp("["+module.ltrChars_+"]");module.hasAnyLtr=function(text){return module.ltrCharReg_.test(text)};module.rtlDirCheckRe_=new RegExp("^[^"+module.ltrChars_+"]*["+module.rtlChars_+"]");module.rtlRe=module.rtlDirCheckRe_;module.isRtlText=function(text){return module.rtlDirCheckRe_.test(text)};module.isLtrText=function(text){return module.ltrDirCheckRe_.test(text)};module.isRequiredLtrRe_=/^http:\/\/.*/;module.hasNumeralsRe_=/\d/;module.estimateDirection=function(text,detectionThreshold){var rtlCount=0;var totalCount=0;var hasWeaklyLtr=false;var tokens=text.split(/\s+/);for(var i=0;i<tokens.length;i++){var token=tokens[i];if(module.isRtlText(token)){rtlCount++;totalCount++}else{if(module.isRequiredLtrRe_.test(token)){hasWeaklyLtr=true}else{if(module.hasAnyLtr(token)){totalCount++}else{if(module.hasNumeralsRe_.test(token)){hasWeaklyLtr=true}}}}}return totalCount==0?(hasWeaklyLtr?module.Dir.LTR:module.Dir.UNKNOWN):(rtlCount/totalCount>detectionThreshold?module.Dir.RTL:module.Dir.LTR)};return module});(function(factory){if(typeof define==="function"&&define.amd){define("bidiweb",["bidi_helpers"],factory)}else{window.bidiweb=factory(bidi_helpers)}})(function(bidi_helpers){var module={};var IProcessor={makeRtl:function(element){},makeLtr:function(element){}};var css_processor=function(classes){return{makeRtl:function(element){element.classList.add(classes.rtl)},makeLtr:function(element){element.classList.add(classes.ltr)}}};var style_processor=function(falign){return{makeRtl:function(element){element.style.direction="rtl";if(falign){element.style.textAlign="right"}},makeLtr:function(element){element.style.direction="ltr";if(falign){element.style.textAlign="left"}}}};module.processors={css:css_processor,style:style_processor};var nodeListMock=function(node){var list=[node];list.item=function(i){return list[i]};return list};module.process=function(query,processor){var elements;if(query instanceof NodeList){elements=query}else{if(query instanceof Node){elements=nodeListMock(query)}else{elements=document.querySelectorAll(query)}}module.process_elements(elements,processor);return elements};module.process_elements=function(elements,processor){for(var index=0;index<elements.length;index++){var element=elements.item(index);var text=element.textContent||element.value||element.placeholder||"";var dir=bidi_helpers.estimateDirection(text,0.4);if(dir==bidi_helpers.Dir.RTL){processor.makeRtl(element)}else{if(dir==bidi_helpers.Dir.LTR){processor.makeLtr(element)}}}};module.process_css=function(query,classes){var proc=module.processors.css(classes);return module.process(query,proc)};module.process_style=function(query,falign){var proc=module.processors.style(falign);return module.process(query,proc)};module.style=function(query){return module.process_style(query,true)};module.css=function(query){return module.process_css(query,{rtl:"rtl",ltr:"ltr"})};module.htmlToElement=function(html){var container=document.createElement("div");container.innerHTML=html;return container};module.html_css=function(html){var container=module.htmlToElement(html);var nodes=container.querySelectorAll("*");module.css(nodes);return container.innerHTML};module.html_style=function(html){var container=module.htmlToElement(html);var nodes=container.querySelectorAll("*");module.style(nodes);return container.innerHTML};return module});</script>

</body>
</html>