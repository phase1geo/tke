<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TKE: api::file Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="tke_logo_128.gif"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TKE
   &#160;<span id="projectnumber">3.5</span>
   </div>
   <div id="projectbrief">Advanced code editor for programmers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('namespaceapi_1_1file.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">api::file Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8a2aa54bb3fdffcb83adb342b0b12fba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapi_1_1file.html#a8a2aa54bb3fdffcb83adb342b0b12fba">all_indices</a> interp pname</td></tr>
<tr class="separator:a8a2aa54bb3fdffcb83adb342b0b12fba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77ca30bc522a39073737e171c67beb2a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapi_1_1file.html#a77ca30bc522a39073737e171c67beb2a">current_index</a> interp pname</td></tr>
<tr class="separator:a77ca30bc522a39073737e171c67beb2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e475712cab7a9fc0a7a631e36889763"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapi_1_1file.html#a8e475712cab7a9fc0a7a631e36889763">get_info</a> interp pname file_index attr</td></tr>
<tr class="separator:a8e475712cab7a9fc0a7a631e36889763"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cf6a0a1718f51ecef65a3b94c963345"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapi_1_1file.html#a9cf6a0a1718f51ecef65a3b94c963345">add_buffer</a> interp pname name save_command args</td></tr>
<tr class="separator:a9cf6a0a1718f51ecef65a3b94c963345"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00bb6b7c590ee8362332cc23832ba1fe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapi_1_1file.html#a00bb6b7c590ee8362332cc23832ba1fe">add_file</a> interp pname args</td></tr>
<tr class="separator:a00bb6b7c590ee8362332cc23832ba1fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9cf6a0a1718f51ecef65a3b94c963345"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cf6a0a1718f51ecef65a3b94c963345">&#9670;&nbsp;</a></span>add_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">api::file::add_buffer</td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">interp pname name save_command args &#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds a buffer to the browser. The first option is the name of the buffer. The second option is a command to execute once the save is successful. The remaining arguments are the following options: </p>

<p class="definition">Definition at line <a class="el" href="api_8tcl_source.html#l00265">265</a> of file <a class="el" href="api_8tcl_source.html">api.tcl</a>.</p>
<div class="fragment"><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keyword">proc</span> add_buffer {interp pname name save_command args} {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keyword">array</span> set opts [list]<span class="comment"></span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="comment"># If we have an odd number of arguments, we have an error condition</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment"></span><span class="comment">      </span><span class="keyword">if</span> {[<span class="keyword">expr</span> [<span class="keyword">llength</span> $args] % 2] == 1} {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keyword">return</span> -code error [msgcat::mc &quot;Argument list to api::add_file was not an even key/value pair&quot;]<span class="comment"></span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment"></span>      }<span class="comment"></span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="comment"># Get the options</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment"></span><span class="comment">      </span><span class="keyword">array</span> set opts $args<span class="comment"></span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="comment"># Change out the gutter commands with interpreter versions</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment"></span><span class="comment">      </span><span class="keyword">if</span> {[<span class="keyword">info</span> exists opts(-gutters)]} {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keyword">set</span> new_gutters [list]<span class="comment"></span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"></span>        <span class="keyword">foreach</span> gutter $opts(-gutters) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;          <span class="keyword">set</span> new_sym [list]<span class="comment"></span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"></span>          <span class="keyword">foreach</span> {symname symopts} [<a class="code" href="tke_8tcl.html#a87a72c8f51e5763f17fa844297d1195c" title="lassign">lassign</a> $gutter gutter_name] {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keyword">set</span> new_symopts [list]<span class="comment"></span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"></span>            <span class="keyword">foreach</span> {symopt symval} $symopts {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;              <span class="keyword">switch</span>  $symopt {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                &quot;-onenter&quot; -</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                &quot;-onleave&quot; -</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                &quot;-onclick&quot; {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                  <span class="keyword">lappend</span> new_symopts $symopt &quot;$interp eval $symval&quot;<span class="comment"></span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"></span>                }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                default {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                  <span class="keyword">lappend</span> new_symopts $symopt $symval<span class="comment"></span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"></span>                }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;              }<span class="comment"></span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment"></span>            }<span class="comment"></span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment"></span>            <span class="keyword">lappend</span> new_sym $symname $new_symopts<span class="comment"></span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment"></span>          }<span class="comment"></span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"></span>          <span class="keyword">lappend</span> new_gutters [list $gutter_name {*}$new_sym]<span class="comment"></span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"></span>        }<span class="comment"></span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"></span>        <span class="keyword">set</span> opts(-gutters) $new_gutters<span class="comment"></span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment"></span>      }<span class="comment"></span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="comment"># Set the tags</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment"></span><span class="comment">      </span><span class="keyword">if</span> {[<span class="keyword">info</span> exists opts(-tags)]} {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keyword">set</span> tag_list [list]<span class="comment"></span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"></span>        <span class="keyword">foreach</span> tag $opts(-tags) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;          <span class="keyword">lappend</span> tag_list &quot;plugin__${pname}__$tag&quot;<span class="comment"></span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"></span>        }<span class="comment"></span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment"></span>        <span class="keyword">set</span> opts(-tags) $tag_list<span class="comment"></span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"></span>      }<span class="comment"></span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="comment"># If the save command was specified, add the interpreter evaluation</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment"></span><span class="comment">      </span><span class="keyword">if</span> {$save_command ne &quot;&quot;} {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keyword">set</span> save_command &quot;$interp eval $save_command&quot;<span class="comment"></span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment"></span>      }<span class="comment"></span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="comment"># Finally, add the buffer</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"></span><span class="comment">      </span><a class="code" href="namespacegui.html#ac656eb206762f24bc0d271e0ca5e14a9" title="gui::add_buffer">gui::add_buffer</a> end $name $save_command {*}[<span class="keyword">array</span> get opts]<span class="comment"></span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="comment"># Allow the plugin to manipulate the ctext widget</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"></span><span class="comment">      </span><span class="keyword">set</span> txt [<a class="code" href="namespacegui.html#aa6a30132775fee676f4e9c5b30efffe7" title="gui::current_txt">gui::current_txt</a>]<span class="comment"></span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment"></span>      $interp alias $txt $txt<span class="comment"></span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keyword">return</span> $txt<span class="comment"></span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a00bb6b7c590ee8362332cc23832ba1fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00bb6b7c590ee8362332cc23832ba1fe">&#9670;&nbsp;</a></span>add_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">api::file::add_file</td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">interp pname args &#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds a file to the browser. If the first argument does not start with a '-' character, the argument is considered to be the name of a file to add. If no filename is specified, an empty/unnamed file will be added. All other options are considered to be parameters.</p>
<p>-savecommand <em>command</em> </p><ul>
<li>Specifies the name of a command to execute after the file is saved.</li>
</ul>
<p>-lock (0|1)</p><ul>
<li>If set to 0, the file will begin in the unlocked state (i.e., the user can edit the file immediately).</li>
<li>If set to 1, the file will begin in the locked state (i.e., the user must unlock the file to edit it)</li>
</ul>
<p>-readonly (0|1)</p><ul>
<li>If set to 1, the file will be considered readonly (i.e., the file will be locked indefinitely); otherwise, the file will be able to be edited.</li>
</ul>
<p>-remember (0|1)</p><ul>
<li>If set to 0, the file will not be saved to the user's session file when the application is quit. By default, the file will be remembered and reloaded when the application is reopened.</li>
</ul>
<p>-sidebar (0|1)</p><ul>
<li>If set to 1 (default), the file's directory contents will be included in the sidebar; otherwise, the file's directory components will not be added to the sidebar.</li>
</ul>
<p>-saveas (0|1)</p><ul>
<li>If set to 0 (default), the file will be saved to the current file; otherwise, the file will always force a save as dialog to be displayed when saving.</li>
</ul>
<p>-buffer (0|1)</p><ul>
<li>If set to 0 (default), the file will be added as a normal file; however, if set to 1, the file will be treated as a temporary file that will be automatically deleted when the tab is closed.</li>
</ul>
<p>-diff (0|1)</p><ul>
<li>If set to 0 (default), the file will be added as an editable file; however, if set to 1, the file will be inserted as a difference viewer, allowing the user to view file differences visually within the editor.</li>
</ul>
<p>-gutters <em>list</em> </p><ul>
<li>Creates a gutter in the editor. The contents of list are as follows: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{name {{symbol_name {symbol_tag_options+}}+}}+</div></div><!-- fragment --> For a list of valid symbol_tag_options, see the options available for tags in a text widget.</li>
</ul>
<p>-other (0|1)</p><ul>
<li>If set to 0 (default), the file will be created in a new tab in the current pane; however, if set to 1, the file will be created in a new tab in the other pane (the other pane will be created if it does not exist).</li>
</ul>
<p>-tags <em>list</em> </p><ul>
<li>A list of plugin bindtag suffixes that will be applied only to this this text widget.</li>
</ul>
<p>-name <em>filename</em> </p><ul>
<li>If this option is specified when the filename is not specified, it will add a new tab to the editor whose name matches the given name. If the user saves the file, the contents will be saved to disk with the given file name. The given filename does not need to exist prior to calling this procedure. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="api_8tcl_source.html#l00396">396</a> of file <a class="el" href="api_8tcl_source.html">api.tcl</a>.</p>
<div class="fragment"><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keyword">proc</span> add_file {interp pname args} {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="keyword">set</span> fname &quot;&quot;<span class="comment"></span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment"></span>      <span class="keyword">array</span> set opts [list]<span class="comment"></span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="comment"># If no filename is given, add a new file to the editor</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment"></span><span class="comment">      </span><span class="keyword">if</span> {([<span class="keyword">llength</span> $args] &gt; 0) &amp;&amp; ([<span class="keyword">string</span> index [<span class="keyword">lindex</span> $args 0] 0] ne &quot;-&quot;)} {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="comment"># Peel the filename from the rest of the arguments</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment"></span><span class="comment">        </span><span class="keyword">set</span> args [<a class="code" href="tke_8tcl.html#a87a72c8f51e5763f17fa844297d1195c" title="lassign">lassign</a> $args fname]<span class="comment"></span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="comment"># Check to make sure that the file is safe to add to the editor, and</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"></span><span class="comment">        </span><span class="comment"># if it is, create the normalized pathname of the filename.</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment"></span><span class="comment">        </span><span class="keyword">if</span> {[<span class="keyword">set</span> fname [<a class="code" href="namespaceinterpreter.html#adfcaac45a2b69fd5fc5922c1452767fe" title="interpreter::check_file">interpreter::check_file</a> $pname $fname]] eq &quot;&quot;} {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;          <span class="keyword">return</span> -code error &quot;permission error&quot;<span class="comment"></span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment"></span>        }<span class="comment"></span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      }<span class="comment"></span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="comment"># If we have an odd number of arguments, we have an error condition</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment"></span><span class="comment">      </span><span class="keyword">if</span> {[<span class="keyword">expr</span> [<span class="keyword">llength</span> $args] % 2] == 1} {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keyword">return</span> -code error [msgcat::mc &quot;Argument list to api::add_file was not an even key/value pair&quot;]<span class="comment"></span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment"></span>      }<span class="comment"></span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="comment"># Get the options</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"></span><span class="comment">      </span><span class="keyword">array</span> set opts $args<span class="comment"></span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="comment"># If the -savecommand option was given, wrap it in an interp eval call</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"></span><span class="comment">      </span><span class="comment"># so that we don&#39;t execute the command in the master interpreter.</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment"></span><span class="comment">      </span><span class="keyword">if</span> {[<span class="keyword">info</span> exists opts(-savecommand)]} {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keyword">set</span> opts(-savecommand) &quot;$interp eval $opts(-savecommand)&quot;<span class="comment"></span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment"></span>      }<span class="comment"></span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <span class="comment"># Change out the gutter commands with interpreter versions</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"></span><span class="comment">      </span><span class="keyword">if</span> {[<span class="keyword">info</span> exists opts(-gutters)]} {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keyword">set</span> new_gutters [list]<span class="comment"></span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment"></span>        <span class="keyword">foreach</span> gutter $opts(-gutters) {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;          <span class="keyword">set</span> new_sym [list]<span class="comment"></span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment"></span>          <span class="keyword">foreach</span> {symname symopts} [<a class="code" href="tke_8tcl.html#a87a72c8f51e5763f17fa844297d1195c" title="lassign">lassign</a> $gutter gutter_name] {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <span class="keyword">set</span> new_symopts [list]<span class="comment"></span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment"></span>            <span class="keyword">foreach</span> {symopt symval} $symopts {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;              <span class="keyword">switch</span>  $symopt {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                &quot;-onenter&quot; -</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                &quot;-onleave&quot; -</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                &quot;-onclick&quot; {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                  <span class="keyword">lappend</span> new_symopts $symopt &quot;$interp eval $symval&quot;<span class="comment"></span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment"></span>                }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                default {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                  <span class="keyword">lappend</span> new_symopts $symopt $symval<span class="comment"></span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment"></span>                }</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;              }<span class="comment"></span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment"></span>            }<span class="comment"></span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment"></span>            <span class="keyword">lappend</span> new_sym $symname $new_symopts<span class="comment"></span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment"></span>          }<span class="comment"></span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment"></span>          <span class="keyword">lappend</span> new_gutters [list $gutter_name {*}$new_sym]<span class="comment"></span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment"></span>        }<span class="comment"></span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment"></span>        <span class="keyword">set</span> opts(-gutters) $new_gutters<span class="comment"></span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment"></span>      }<span class="comment"></span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="comment"># Set the tags</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"></span><span class="comment">      </span><span class="keyword">if</span> {[<span class="keyword">info</span> exists opts(-tags)]} {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keyword">set</span> tag_list [list]<span class="comment"></span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment"></span>        <span class="keyword">foreach</span> tag $opts(-tags) {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;          <span class="keyword">lappend</span> tag_list &quot;plugin__${pname}__$tag&quot;<span class="comment"></span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment"></span>        }<span class="comment"></span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"></span>        <span class="keyword">set</span> opts(-tags) $tag_list<span class="comment"></span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"></span>      }<span class="comment"></span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="comment"># Finally, add the new file</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment"></span><span class="comment">      </span><span class="keyword">if</span> {$fname eq &quot;&quot;} {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <a class="code" href="namespacegui.html#ad078db7812672f2bce3e00d4382d064a" title="gui::add_new_file">gui::add_new_file</a> end {*}[<span class="keyword">array</span> get opts]<span class="comment"></span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment"></span>      } <span class="keyword">else</span> {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <a class="code" href="namespacegui.html#a3f92b9af84ff56b1dac8e147f19daf9b" title="gui::add_file">gui::add_file</a> end $fname {*}[<span class="keyword">array</span> get opts]<span class="comment"></span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment"></span>      }<span class="comment"></span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="comment"># Allow the plugin to manipulate the ctext widget</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment"></span><span class="comment">      </span><span class="keyword">set</span> txt [<a class="code" href="namespacegui.html#aa6a30132775fee676f4e9c5b30efffe7" title="gui::current_txt">gui::current_txt</a>]<span class="comment"></span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment"></span>      $interp alias $txt $txt<span class="comment"></span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keyword">return</span> $txt<span class="comment"></span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a8a2aa54bb3fdffcb83adb342b0b12fba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a2aa54bb3fdffcb83adb342b0b12fba">&#9670;&nbsp;</a></span>all_indices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">api::file::all_indices</td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">interp pname &#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Returns a list containing indices for all of the currently opened files. </dd></dl>

<p class="definition">Definition at line <a class="el" href="api_8tcl_source.html#l00215">215</a> of file <a class="el" href="api_8tcl_source.html">api.tcl</a>.</p>
<div class="fragment"><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keyword">proc</span> all_indices {interp pname} {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keyword">return</span> [<a class="code" href="namespacefiles.html#a4a83ff20816ca00cc7f18e0be0b537a1" title="files::get_indices">files::get_indices</a> fname]<span class="comment"></span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a77ca30bc522a39073737e171c67beb2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77ca30bc522a39073737e171c67beb2a">&#9670;&nbsp;</a></span>current_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">api::file::current_index</td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">interp pname &#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Returns the file index of the file being currently edited. If no such file exists, returns a value of -1. </dd></dl>

<p class="definition">Definition at line <a class="el" href="api_8tcl_source.html#l00224">224</a> of file <a class="el" href="api_8tcl_source.html">api.tcl</a>.</p>
<div class="fragment"><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keyword">proc</span> current_index {interp pname} {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="keyword">return</span> [<span class="keyword">expr</span> {[catch { gui::get_info {} current fileindex } index] ? -1 : $index}]<span class="comment"></span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
<a id="a8e475712cab7a9fc0a7a631e36889763"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e475712cab7a9fc0a7a631e36889763">&#9670;&nbsp;</a></span>get_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">api::file::get_info</td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">interp pname file_index attr &#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Returns the file information at the given file index.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_index</td><td>Unique file identifier that is passed to some plugins. </td></tr>
    <tr><td class="paramname">attr</td><td>File attribute to retrieve. The following values are valid for this option:<ul>
<li><b>fname</b> : Normalized file name</li>
<li><b>mtime</b> : Last mofication timestamp (in seconds)</li>
<li><b>lock</b> : Specifies the current lock status of the file</li>
<li><b>readonly</b> : Specifies if the file is readonly</li>
<li><b>modified</b> : Specifies if the file has been modified since the last save.</li>
<li><b>sb_index</b> : Specifies the index of the file in the sidebar.</li>
<li><b>txt</b> : Specifies the text widget associated with the file</li>
<li><b>current</b> : Returns 1 if the file is the current file being edited</li>
<li><b>vimmode</b> : Returns 1 if the editor is not in edit mode; otherwise, returns 0.</li>
<li><b>lang</b> : Returns the syntax language. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="api_8tcl_source.html#l00247">247</a> of file <a class="el" href="api_8tcl_source.html">api.tcl</a>.</p>
<div class="fragment"><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keyword">proc</span> get_info {interp pname file_index attr} {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="keyword">set</span> value [<a class="code" href="namespacegui.html#a8b121253da2fa95b8c1fd59f3f1e5d34" title="gui::get_file_info">gui::get_file_info</a> $file_index $attr]<span class="comment"></span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keyword">if</span> {$attr eq &quot;txt&quot;} {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="namespaceinterpreter.html#a053babc6c9d651b5cad5d4295f072e90" title="interpreter::add_ctext">interpreter::add_ctext</a> $interp $pname [<span class="keyword">winfo</span> parent $value]<span class="comment"></span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"></span>      }<span class="comment"></span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="keyword">return</span> $value<span class="comment"></span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div></div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceapi.html">api</a></li><li class="navelem"><a class="el" href="namespaceapi_1_1file.html">file</a></li>
    <li class="footer">Generated on Sun Jan 7 2018 08:01:47 for TKE by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
